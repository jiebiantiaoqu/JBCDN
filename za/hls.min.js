





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-FG+rXqMOivrAjdEQE7tO4BwM1poGmg70hJFTlNSxjX87grtrZ6UnPR8NkzwUHlQEGviu9XuRYeO8zH9YwvZhdg==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-146fab5ea30e8afac08dd11013bb4ee0.css" />
  
    <link crossorigin="anonymous" media="all" integrity="sha512-whtr9xYX7utnpWsNSLW7XLm7eJONfryMwfwxIH2SpIRKCZbx4aryDfn/HGMFI5Fee7dogmqmtqvPPh13+2HW2Q==" rel="stylesheet" href="https://github.githubassets.com/assets/github-c21b6bf71617eeeb67a56b0d48b5bb5c.css" />
    
    
    
    


  <meta name="viewport" content="width=device-width">
  
  <title>hlsjs-p2p-engine/hls.min.js at master · cdnbye/hlsjs-p2p-engine</title>
    <meta name="description" content="A hls.js plugin to offload bandwidth from expensive traditional CDNs，while also maximizing a user’s viewing experience.  - cdnbye/hlsjs-p2p-engine">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    <meta name="twitter:image:src" content="https://avatars1.githubusercontent.com/u/38153905?s=400&amp;v=4" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="cdnbye/hlsjs-p2p-engine" /><meta name="twitter:description" content="A hls.js plugin to offload bandwidth from expensive traditional CDNs，while also maximizing a user’s viewing experience.  - cdnbye/hlsjs-p2p-engine" />
    <meta property="og:image" content="https://avatars1.githubusercontent.com/u/38153905?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="cdnbye/hlsjs-p2p-engine" /><meta property="og:url" content="https://github.com/cdnbye/hlsjs-p2p-engine" /><meta property="og:description" content="A hls.js plugin to offload bandwidth from expensive traditional CDNs，while also maximizing a user’s viewing experience.  - cdnbye/hlsjs-p2p-engine" />

  <link rel="assets" href="https://github.githubassets.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6NTE2NzI2MjM4OjIyYWQ3YTQ5MWIxNDBkZTFkMTgxNmQ3ZTMwNDBmNTIxZjMwOWNjZTY0NjhhYTI5ODU5M2UyMGUxY2FlMTliNDM=--dc181630876e3378bc2c558413876127966058b8">
  <link rel="sudo-modal" href="/sessions/sudo_modal">

  <meta name="request-id" content="8DF6:7926:56E2C5:7CB622:5E889353" data-pjax-transient="true" /><meta name="html-safe-nonce" content="26684de156fdcce185c98915c89283c9015f3412" data-pjax-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9jZG5ieWUvaGxzanMtcDJwLWVuZ2luZS90cmVlL21hc3Rlci9kaXN0IiwicmVxdWVzdF9pZCI6IjhERjY6NzkyNjo1NkUyQzU6N0NCNjIyOjVFODg5MzUzIiwidmlzaXRvcl9pZCI6IjI2ODI2OTE0NzI5MzM0NTk3MzMiLCJyZWdpb25fZWRnZSI6ImlhZCIsInJlZ2lvbl9yZW5kZXIiOiJpYWQifQ==" data-pjax-transient="true" /><meta name="visitor-hmac" content="05e76b538273e8cec31b1f534fc677697a0f710e190f20029305bcc4af27d4b3" data-pjax-transient="true" />



  <meta name="github-keyboard-shortcuts" content="repository,source-code" data-pjax-transient="true" />

  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-ga_id" content="" class="js-octo-ga-id" /><meta name="octolytics-actor-id" content="62872211" /><meta name="octolytics-actor-login" content="jiebiantiaoqu" /><meta name="octolytics-actor-hash" content="b640230bc3e20b2b3090783ea940d1df8bd6e7e42b17476e3a90b14cc4825ee6" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" />



    <meta name="google-analytics" content="UA-3769691-2">

  <meta class="js-ga-set" name="userId" content="6da367a6f2eec01ec52a1873bc309ab1">

<meta class="js-ga-set" name="dimension1" content="Logged In">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="jiebiantiaoqu">

      <meta name="expected-hostname" content="github.com">

      <meta name="js-proxy-site-detection-payload" content="MTQ3ODI1M2U1YTI0ZTg4NzdhNDczNGE1NTczOGM4NzdkOTgzNjZlY2M1NDA0NGE4ODQ3ZjM5OTNmYzkzYzM1YXx7InJlbW90ZV9hZGRyZXNzIjoiMjE5Ljc2LjE2My4xMDYiLCJyZXF1ZXN0X2lkIjoiOERGNjo3OTI2OjU2RTJDNTo3Q0I2MjI6NUU4ODkzNTMiLCJ0aW1lc3RhbXAiOjE1ODYwMDg5MTYsImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="MARKETPLACE_FEATURED_BLOG_POSTS,MARKETPLACE_INVOICED_BILLING,MARKETPLACE_SOCIAL_PROOF_CUSTOMERS,MARKETPLACE_TRENDING_SOCIAL_PROOF,MARKETPLACE_RECOMMENDATIONS,MARKETPLACE_PENDING_INSTALLATIONS,RELATED_ISSUES,GHE_CLOUD_TRIAL,PAGE_STALE_CHECK">

  <meta http-equiv="x-pjax-version" content="80ebc3286fe9d88acaddc1320106dfc2">
  

      <link href="https://github.com/cdnbye/hlsjs-p2p-engine/commits/master.atom" rel="alternate" title="Recent Commits to hlsjs-p2p-engine:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/cdnbye/hlsjs-p2p-engine git https://github.com/cdnbye/hlsjs-p2p-engine.git">

  <meta name="octolytics-dimension-user_id" content="38153905" /><meta name="octolytics-dimension-user_login" content="cdnbye" /><meta name="octolytics-dimension-repository_id" content="132340238" /><meta name="octolytics-dimension-repository_nwo" content="cdnbye/hlsjs-p2p-engine" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="132340238" /><meta name="octolytics-dimension-repository_network_root_nwo" content="cdnbye/hlsjs-p2p-engine" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />


    <link rel="canonical" href="https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">

<meta name="theme-color" content="#1e2327">


  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" class="p-3 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
      <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>

    
    



        <header class="Header js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">

  <div class="Header-item d-none d-lg-flex">
    <a class="Header-link" href="https://github.com/" data-hotkey="g d"
  aria-label="Homepage " data-ga-click="Header, go to dashboard, icon:logo">
  <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>

  </div>

  <div class="Header-item d-lg-none">
    <button class="Header-link btn-link js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
      <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"></path></svg>
    </button>
  </div>

  <div class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
      <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="false"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="132340238" data-scoped-search-url="/cdnbye/hlsjs-p2p-engine/search" data-unscoped-search-url="/search" action="/cdnbye/hlsjs-p2p-engine/search" accept-charset="UTF-8" method="get">
      <label class="form-control input-sm header-search-wrapper p-0 header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search or jump to…"
          data-unscoped-placeholder="Search or jump to…"
          data-scoped-placeholder="Search or jump to…"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search or jump to…"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations"
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" value="GTPvoDnJCVai1O4yyL0u8H862mKHkccSIDxde8vfRYyuEQdFZF+qFspLoysomL86bjftyzboZ7eWOSUpAZkYgw==" data-csrf="true" class="js-data-jump-to-suggestions-path-csrf" />
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://github.githubassets.com/images/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <img src="https://github.githubassets.com/images/spinners/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
    </li>
</ul>

            </div>
      </label>
</form>  </div>
</div>


      <nav class="d-flex flex-column flex-lg-row flex-self-stretch flex-lg-self-auto" aria-label="Global">
    <a class="Header-link d-block d-lg-none py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:dashboard:user" aria-label="Dashboard" href="/dashboard">
      Dashboard
</a>
  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="/pulls">
    Pull requests
</a>
  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="/issues">
    Issues
</a>

    <div class="mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15">
      <a class="js-selected-navigation-item Header-link" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-selected-links=" /marketplace" href="/marketplace">
        Marketplace
</a>      

    </div>

  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
    Explore
</a>


    <a class="Header-link d-block d-lg-none mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" href="https://github.com/jiebiantiaoqu">
      <img class="avatar" height="20" width="20" alt="@jiebiantiaoqu" src="https://avatars0.githubusercontent.com/u/62872211?s=60&amp;v=4" />
      jiebiantiaoqu
</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="dAsvXcyt7/6gONYbSWVKhI8YjYwXwHfpFBU9a2ziNuRzy9zHm0E9a3L4lUMZHNloIDnQbzNyhcCoEJorbYW9fQ==" />
      <button type="submit" class="Header-link mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15 d-lg-none btn-link d-block width-full text-left" data-ga-click="Header, sign out, icon:logout" style="padding-left: 2px;">
        <svg class="octicon octicon-sign-out v-align-middle" viewBox="0 0 16 17" version="1.1" width="16" height="17" aria-hidden="true"><path fill-rule="evenodd" d="M12 9V7H8V5h4V3l4 3-4 3zm-2 3H6V3L2 1h8v3h1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v11.38c0 .39.22.73.55.91L6 16.01V13h4c.55 0 1-.45 1-1V8h-1v4z"></path></svg>
        Sign out
      </button>
</form></nav>

  </div>

  <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative">
    <div class="css-truncate css-truncate-target width-fit position-absolute left-0 right-0 text-center">
              <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
    <a class="Header-link" href="/cdnbye">cdnbye</a>
    /
    <a class="Header-link" href="/cdnbye/hlsjs-p2p-engine">hlsjs-p2p-engine</a>

</div>
  </div>

  <div class="Header-item mr-0 mr-lg-3 flex-order-1 flex-lg-order-none">
    

    <a aria-label="You have no unread notifications" class="Header-link notification-indicator position-relative tooltipped tooltipped-sw js-socket-channel js-notification-indicator" data-hotkey="g n" data-ga-click="Header, go to notifications, icon:read" data-channel="notification-changed:62872211" href="/notifications/beta">
        <span class="js-indicator-modifier mail-status "></span>
        <svg class="octicon octicon-bell" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 12v1H0v-1l.73-.58c.77-.77.81-2.55 1.19-4.42C2.69 3.23 6 2 6 2c0-.55.45-1 1-1s1 .45 1 1c0 0 3.39 1.23 4.16 5 .38 1.88.42 3.66 1.19 4.42l.66.58H14zm-7 4c1.11 0 2-.89 2-2H5c0 1.11.89 2 2 2z"></path></svg>
</a>
  </div>


  <div class="Header-item position-relative d-none d-lg-flex">
    <details class="details-overlay details-reset">
  <summary class="Header-link"
      aria-label="Create new…"
      data-ga-click="Header, create new, icon:add">
    <svg class="octicon octicon-plus" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"></path></svg> <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw">
    
<a role="menuitem" class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>


  <div role="none" class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="cdnbye/hlsjs-p2p-engine">This repository</span>
  </div>
    <a role="menuitem" class="dropdown-item" href="/cdnbye/hlsjs-p2p-engine/issues/new/choose" data-ga-click="Header, create new issue" data-skip-pjax>
      New issue
    </a>


  </details-menu>
</details>

  </div>

  <div class="Header-item position-relative mr-0 d-none d-lg-flex">
    
  <details class="details-overlay details-reset js-feature-preview-indicator-container" data-feature-preview-indicator-src="/users/jiebiantiaoqu/feature_preview/indicator_check">

  <summary class="Header-link"
    aria-label="View profile and more"
    data-ga-click="Header, show menu, icon:avatar">
    <img class="avatar " alt="@jiebiantiaoqu" width="20" height="20" src="https://avatars0.githubusercontent.com/u/62872211?s=60&amp;v=4">


      <span class="feature-preview-indicator js-feature-preview-indicator" hidden></span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw mt-2" style="width: 180px">
    <div class="header-nav-current-user css-truncate"><a role="menuitem" class="no-underline user-profile-link px-3 pt-2 pb-2 mb-n2 mt-n1 d-block" href="/jiebiantiaoqu" data-ga-click="Header, go to profile, text:Signed in as">Signed in as <strong class="css-truncate-target">jiebiantiaoqu</strong></a></div>
    <div role="none" class="dropdown-divider"></div>

      <div class="pl-3 pr-3 f6 user-status-container js-user-status-context pb-1" data-url="/users/status?compact=1&amp;link_mentions=0&amp;truncate=1">
        
<div class="js-user-status-container
    user-status-compact rounded-1 px-2 py-1 mt-2
    border
  " data-team-hovercards-enabled>
  <details class="js-user-status-details details-reset details-overlay details-overlay-dark">
    <summary class="btn-link btn-block link-gray no-underline js-toggle-user-status-edit toggle-user-status-edit "
      role="menuitem" data-hydro-click="{&quot;event_type&quot;:&quot;user_profile.click&quot;,&quot;payload&quot;:{&quot;profile_user_id&quot;:38153905,&quot;target&quot;:&quot;EDIT_USER_STATUS&quot;,&quot;user_id&quot;:62872211,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;}}" data-hydro-click-hmac="17e7508770213efe53ebc3e238f39a3ea8f56758f2afab976262d8d0623c7749">
      <div class="d-flex">
        <div class="f6 lh-condensed user-status-header
          d-inline-block v-align-middle
            user-status-emoji-only-header circle
            pr-2
"
            style="max-width: 29px"
          >
          <div class="user-status-emoji-container flex-shrink-0 mr-1 mt-1 lh-condensed-ultra v-align-bottom" style="">
            <svg class="octicon octicon-smiley" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 01-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 01-1.45-2.17A6.59 6.59 0 011.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 018 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>
          </div>
        </div>
        <div class="
          d-inline-block v-align-middle
          
          
           css-truncate css-truncate-target 
           user-status-message-wrapper f6"
           style="line-height: 20px;" >
          <div class="d-inline-block text-gray-dark v-align-text-top text-left">
              <span class="text-gray ml-2">Set status</span>
          </div>
        </div>
      </div>
    </summary>
    <details-dialog class="details-dialog rounded-1 anim-fade-in fast Box Box--overlay" role="dialog" tabindex="-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="position-relative flex-auto js-user-status-form" action="/users/status?compact=1&amp;link_mentions=0&amp;truncate=1" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="u+6/KqMygKkM9It11xB9DCyi0sNKSUHiHSaAfX2jvcDrJnE3Yk+vFBRqpzMLNPa1egcNo5cAWd+NChpDWVnYZA==" />
        <div class="Box-header bg-gray border-bottom p-3">
          <button class="Box-btn-octicon js-toggle-user-status-edit btn-octicon float-right" type="reset" aria-label="Close dialog" data-close-dialog>
            <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
          </button>
          <h3 class="Box-title f5 text-bold text-gray-dark">Edit status</h3>
        </div>
        <input type="hidden" name="emoji" class="js-user-status-emoji-field" value="">
        <input type="hidden" name="organization_id" class="js-user-status-org-id-field" value="">
        <div class="px-3 py-2 text-gray-dark">
          <div class="js-characters-remaining-container position-relative mt-2">
            <div class="input-group d-table form-group my-0 js-user-status-form-group">
              <span class="input-group-button d-table-cell v-align-middle" style="width: 1%">
                <button type="button" aria-label="Choose an emoji" class="btn-outline btn js-toggle-user-status-emoji-picker btn-open-emoji-picker p-0">
                  <span class="js-user-status-original-emoji" hidden></span>
                  <span class="js-user-status-custom-emoji"></span>
                  <span class="js-user-status-no-emoji-icon" >
                    <svg class="octicon octicon-smiley" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 01-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 01-1.45-2.17A6.59 6.59 0 011.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 018 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>
                  </span>
                </button>
              </span>
              <text-expander keys=": @" data-mention-url="/autocomplete/user-suggestions" data-emoji-url="/autocomplete/emoji">
                <input
                  type="text"
                  autocomplete="off"
                  data-no-org-url="/autocomplete/user-suggestions"
                  data-org-url="/suggestions?mention_suggester=1"
                  data-maxlength="80"
                  class="d-table-cell width-full form-control js-user-status-message-field js-characters-remaining-field"
                  placeholder="What's happening?"
                  name="message"
                  value=""
                  aria-label="What is your current status?">
              </text-expander>
              <div class="error">Could not update your status, please try again.</div>
            </div>
            <div style="margin-left: 53px" class="my-1 text-small label-characters-remaining js-characters-remaining" data-suffix="remaining" hidden>
              80 remaining
            </div>
          </div>
          <include-fragment class="js-user-status-emoji-picker" data-url="/users/status/emoji"></include-fragment>
          <div class="overflow-auto ml-n3 mr-n3 px-3 border-bottom" style="max-height: 33vh">
            <div class="user-status-suggestions js-user-status-suggestions collapsed overflow-hidden">
              <h4 class="f6 text-normal my-3">Suggestions:</h4>
              <div class="mx-3 mt-2 clearfix">
                  <div class="float-left col-6">
                      <button type="button" value=":palm_tree:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="palm_tree" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f334.png">🌴</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          On vacation
                        </div>
                      </button>
                      <button type="button" value=":face_with_thermometer:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="face_with_thermometer" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f912.png">🤒</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Out sick
                        </div>
                      </button>
                  </div>
                  <div class="float-left col-6">
                      <button type="button" value=":house:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="house" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3e0.png">🏠</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Working from home
                        </div>
                      </button>
                      <button type="button" value=":dart:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="dart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3af.png">🎯</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Focusing
                        </div>
                      </button>
                  </div>
              </div>
            </div>
            <div class="user-status-limited-availability-container">
              <div class="form-checkbox my-0">
                <input type="checkbox" name="limited_availability" value="1" class="js-user-status-limited-availability-checkbox" data-default-message="I may be slow to respond." aria-describedby="limited-availability-help-text-truncate-true-compact-true" id="limited-availability-truncate-true-compact-true">
                <label class="d-block f5 text-gray-dark mb-1" for="limited-availability-truncate-true-compact-true">
                  Busy
                </label>
                <p class="note" id="limited-availability-help-text-truncate-true-compact-true">
                  When others mention you, assign you, or request your review,
                  GitHub will let them know that you have limited availability.
                </p>
              </div>
            </div>
          </div>
          <div class="d-inline-block f5 mr-2 pt-3 pb-2" >
  <div class="d-inline-block mr-1">
    Clear status
  </div>

  <details class="js-user-status-expire-drop-down f6 dropdown details-reset details-overlay d-inline-block mr-2">
    <summary class="f5 btn-link link-gray-dark border px-2 py-1 rounded-1" aria-haspopup="true">
      <div class="js-user-status-expiration-interval-selected d-inline-block v-align-baseline">
        Never
      </div>
      <div class="dropdown-caret"></div>
    </summary>

    <ul class="dropdown-menu dropdown-menu-se pl-0 overflow-auto" style="width: 220px; max-height: 15.5em">
      <li>
        <button type="button" class="btn-link dropdown-item js-user-status-expire-button ws-normal" title="Never">
          <span class="d-inline-block text-bold mb-1">Never</span>
          <div class="f6 lh-condensed">Keep this status until you clear your status or edit your status.</div>
        </button>
      </li>
      <li class="dropdown-divider" role="none"></li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 30 minutes" value="2020-04-04T22:31:56+08:00">
            in 30 minutes
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 1 hour" value="2020-04-04T23:01:56+08:00">
            in 1 hour
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 4 hours" value="2020-04-05T02:01:56+08:00">
            in 4 hours
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="today" value="2020-04-04T23:59:59+08:00">
            today
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="this week" value="2020-04-05T23:59:59+08:00">
            this week
          </button>
        </li>
    </ul>
  </details>
  <input class="js-user-status-expiration-date-input" type="hidden" name="expires_at" value="">
</div>

          <include-fragment class="js-user-status-org-picker" data-url="/users/status/organizations"></include-fragment>
        </div>
        <div class="d-flex flex-items-center flex-justify-between p-3 border-top">
          <button type="submit" disabled class="width-full btn btn-primary mr-2 js-user-status-submit">
            Set status
          </button>
          <button type="button" disabled class="width-full js-clear-user-status-button btn ml-2 ">
            Clear status
          </button>
        </div>
</form>    </details-dialog>
  </details>
</div>

      </div>
      <div role="none" class="dropdown-divider"></div>

    <a role="menuitem" class="dropdown-item" href="/jiebiantiaoqu" data-ga-click="Header, go to profile, text:your profile">Your profile</a>

    <a role="menuitem" class="dropdown-item" href="/jiebiantiaoqu?tab=repositories" data-ga-click="Header, go to repositories, text:your repositories">Your repositories</a>

    <a role="menuitem" class="dropdown-item" href="/jiebiantiaoqu?tab=projects" data-ga-click="Header, go to projects, text:your projects">Your projects</a>

    <a role="menuitem" class="dropdown-item" href="/jiebiantiaoqu?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">Your stars</a>
      <a role="menuitem" class="dropdown-item" href="https://gist.github.com/mine" data-ga-click="Header, your gists, text:your gists">Your gists</a>





    <div role="none" class="dropdown-divider"></div>
      
<div id="feature-enrollment-toggle" class="hide-sm hide-md feature-preview-details position-relative">
  <button
    type="button"
    class="dropdown-item btn-link"
    role="menuitem"
    data-feature-preview-trigger-url="/users/jiebiantiaoqu/feature_previews"
    data-feature-preview-close-details="{&quot;event_type&quot;:&quot;feature_preview.clicks.close_modal&quot;,&quot;payload&quot;:{&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}"
    data-feature-preview-close-hmac="08fc1ed6d43e7ab92d47589811ddb82d9f0d469edd259dd61652d8f307632ea2"
    data-hydro-click="{&quot;event_type&quot;:&quot;feature_preview.clicks.open_modal&quot;,&quot;payload&quot;:{&quot;link_location&quot;:&quot;user_dropdown&quot;,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}"
    data-hydro-click-hmac="6cd2e2f25aad1d91f57c530848addfdd3dd5552cc9d7087f83499ec98adaa8d0"
  >
    Feature preview
  </button>
    <span class="feature-preview-indicator js-feature-preview-indicator" hidden></span>
</div>

    <a role="menuitem" class="dropdown-item" href="https://help.github.com" data-ga-click="Header, go to help, text:help">Help</a>
    <a role="menuitem" class="dropdown-item" href="/settings/profile" data-ga-click="Header, go to settings, icon:settings">Settings</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="logout-form" action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="sCIaniOX33koBrGpgZ0ur3rond/X4wA+QocVpvoChNe34ukEdHsN7PrG8vHR5L1D1cnAPPNR8hf+grLm+2UPTg==" />
      
      <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout" role="menuitem">
        Sign out
      </button>
      <input type="text" name="required_field_2a55" hidden="hidden" class="form-control" /><input type="hidden" name="timestamp" value="1586008916733" class="form-control" /><input type="hidden" name="timestamp_secret" value="2c50d7b46d2ed57aa8c1e17b81cee2fb9f2498bccf0e8b6d6272a924c1aafb6a" class="form-control" />
</form>  </details-menu>
</details>

  </div>

</header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>


    <div id="js-flash-container">


  <template class="js-flash-template">
    <div class="flash flash-full  js-flash-template-container">
  <div class="container-lg px-2" >
    <button class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    
      <div class="js-flash-template-message"></div>

  </div>
</div>
  </template>
</div>


      

  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>




  <div class="application-main " data-commit-hovercards-enabled>
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main  >
      

  


      <div class="border-bottom shelf intro-shelf js-notice mb-0 pb-4">
  <div class="width-full container">
    <div class="width-full mx-auto shelf-content">
      <h2 class="shelf-title">Learn Git and GitHub without any code!</h2>
      <p class="shelf-lead">
          Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
      </p>
      <a class="btn btn-primary shelf-cta" target="_blank" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;READ_GUIDE&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="21bf04840fd3205902d67b24dbee2eae33557c2dcee2a399d321d16d7e696ac9" href="https://guides.github.com/activities/hello-world/">Read the guide</a>
    </div>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="shelf-dismiss js-notice-dismiss" action="/dashboard/dismiss_bootcamp" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="delete" /><input type="hidden" name="authenticity_token" value="3V/JLb+n874sGmdWMVte5qPKgE9qKM55Ar7nsUCcKc9QPcJ8eemFVWNFcuomYKvSB3iSX7JH4INq9ZolPtw9cw==" />
      <button name="button" type="submit" class="mr-1 close-button tooltipped tooltipped-w" aria-label="Hide this notice forever" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;DISMISS_BANNER&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="031197054d656be080f4a0085e37c4d012476bd32c4cce636f8f203b3917b44c">
        <svg aria-label="Hide this notice forever" class="octicon octicon-x v-align-text-top" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
</button></form>  </div>
</div>



  









  <div class="pagehead repohead hx_repohead readability-menu bg-gray-light pb-0 pt-0 pt-lg-3">

    <div class="d-flex container-lg mb-4 p-responsive d-none d-lg-flex">

      <div class="flex-auto min-width-0 width-fit mr-3">
        <h1 class="public  d-flex flex-wrap flex-items-center break-word float-none ">
    <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  <span class="author ml-1 flex-self-stretch" itemprop="author">
    <a class="url fn" rel="author" data-hovercard-type="organization" data-hovercard-url="/orgs/cdnbye/hovercard" href="/cdnbye">cdnbye</a>
  </span>
  <span class="path-divider flex-self-stretch">/</span>
  <strong itemprop="name" class="mr-2 flex-self-stretch">
    <a data-pjax="#js-repo-pjax-container" href="/cdnbye/hlsjs-p2p-engine">hlsjs-p2p-engine</a>
  </strong>
  
</h1>


      </div>

      <ul class="pagehead-actions flex-shrink-0 " >



    <li >
      
    <details class="dropdown details-reset details-overlay d-inline-block float-left"
      data-deferred-details-content-url="/cdnbye/hlsjs-p2p-engine/used_by_contents"
    >
      <summary class="btn btn-sm btn-with-count" data-menu-button>
        <svg class="octicon octicon-package v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1 4.27v7.47c0 .45.3.84.75.97l6.5 1.73c.16.05.34.05.5 0l6.5-1.73c.45-.13.75-.52.75-.97V4.27c0-.45-.3-.84-.75-.97l-6.5-1.74a1.4 1.4 0 00-.5 0L1.75 3.3c-.45.13-.75.52-.75.97zm7 9.09l-6-1.59V5l6 1.61v6.75zM2 4l2.5-.67L11 5.06l-2.5.67L2 4zm13 7.77l-6 1.59V6.61l2-.55V8.5l2-.53V5.53L15 5v6.77zm-2-7.24L6.5 2.8l2-.53L15 4l-2 .53z"></path></svg>
        Used by
        <div class="dropdown-caret"></div>
      </summary>
      <include-fragment accept="text/fragment+html">
        <div class="dropdown-menu dropdown-menu-s p-3 text-center" style="width:360px;">
          <img width="32" height="32" alt="Loading..." class="my-0" src="https://github.githubassets.com/images/spinners/octocat-spinner-64.gif" />
          <p class="pt-1 m-0 f5 text-gray-light">
            Loading dependents...
          </p>
        </div>
      </include-fragment>
    </details>
    <a class="social-count"
      href="/cdnbye/hlsjs-p2p-engine/network/dependents?package_id=UGFja2FnZS01OTcwNzYyNw%3D%3D"
      aria-label="2 repositories depend on this package"
    >
      2
    </a>

    </li>

  <li>
    
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-remote="true" class="clearfix js-social-form js-social-container" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="Ip9P+Ee0ADEZU+3R3b3OD6iOIKLzn+PysH5IkRdvf0AzqjgC0U2KD2SEU6SrEqKRijIP4/3LyE1h+Gu4wmG/ZA==" />      <input type="hidden" name="repository_id" value="132340238">

      <details class="details-reset details-overlay select-menu float-left">
        <summary class="select-menu-button float-left btn btn-sm btn-with-count" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="9c5eaf020d94adf72ba16e84db4d2fe6484ab39a6c9bc41440d1f7361c293df6" data-ga-click="Repository, click Watch settings, action:blob#show">          <span data-menu-button>
              <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
              Watch
          </span>
</summary>        <details-menu
          class="select-menu-modal position-absolute mt-5"
          style="z-index: 99;">
          <div class="select-menu-header">
            <span class="select-menu-title">Notifications</span>
          </div>
          <div class="select-menu-list">
            <button type="submit" name="do" value="included" class="select-menu-item width-full" aria-checked="true" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Not watching</span>
                <span class="description">Be notified only when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Watch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="release_only" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Releases only</span>
                <span class="description">Be notified of new releases, and when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch releases
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="subscribed" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Watching</span>
                <span class="description">Be notified of all conversations.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="ignore" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Ignoring</span>
                <span class="description">Never be notified.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-mute v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"></path></svg>
                  Stop ignoring
                </span>
              </div>
            </button>
          </div>
        </details-menu>
      </details>
        <a class="social-count js-social-count"
          href="/cdnbye/hlsjs-p2p-engine/watchers"
          aria-label="42 users are watching this repository">
          42
        </a>
</form>
  </li>

  <li>
      <div class="js-toggler-container js-social-container starring-container ">
    <form class="starred js-social-form" action="/cdnbye/hlsjs-p2p-engine/unstar" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="h0D3JYLD0pXRb9QMfK0IRLat6O70Z6IeqfTa0ghIt6q3hiZRqP28bmLSZRX42YSPAwni7Qk7nqZnMr5TujL01g==" />
      <input type="hidden" name="context" value="repository"></input>
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Unstar cdnbye/hlsjs-p2p-engine" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;UNSTAR_BUTTON&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="1362ff9fb91b5edd2d2d153442c869e9635a30beda2f5081213eb61ba49e4d30" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">        <svg height="16" class="octicon octicon-star v-align-text-bottom" vertical_align="text_bottom" viewBox="0 0 14 16" version="1.1" width="14" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>

        Unstar
</button>        <a class="social-count js-social-count" href="/cdnbye/hlsjs-p2p-engine/stargazers"
           aria-label="589 users starred this repository">
           589
        </a>
</form>
    <form class="unstarred js-social-form" action="/cdnbye/hlsjs-p2p-engine/star" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="oo9JPr06hpESiHZvjtEzuY/4n1vwvmLm2lpCto82/k/KhKoNlMpkkFpeCIooHmuPBh+eCnYb/naQImReBXCt5Q==" />
      <input type="hidden" name="context" value="repository"></input>
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Star cdnbye/hlsjs-p2p-engine" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;STAR_BUTTON&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="8952e956a1a4e1526c81fd51f2873a402bad28ca3ea879ba34bbc965b7385074" data-ga-click="Repository, click star button, action:blob#show; text:Star">        <svg height="16" class="octicon octicon-star v-align-text-bottom" vertical_align="text_bottom" viewBox="0 0 14 16" version="1.1" width="14" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>

        Star
</button>        <a class="social-count js-social-count" href="/cdnbye/hlsjs-p2p-engine/stargazers"
           aria-label="589 users starred this repository">
          589
        </a>
</form>  </div>

  </li>

  <li>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="btn-with-count" action="/cdnbye/hlsjs-p2p-engine/fork" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="O/H0WVJ22Q89ULmNlMydqL7s89NdZ6UZSRyo0kBxIcBJlFM6KWEP6HpfIvG9SniiwAsGe1fCzhvz7g4lOFC8EQ==" />
            <button class="btn btn-sm btn-with-count" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FORK_BUTTON&quot;,&quot;repository_id&quot;:132340238,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="8192635b1f3c9e184b790efc17fb4971cf5b2f2f02a1344b35af5baa21cee6b4" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork" type="submit" title="Fork your own copy of cdnbye/hlsjs-p2p-engine to your account" aria-label="Fork your own copy of cdnbye/hlsjs-p2p-engine to your account">              <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 00-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 002 1a1.993 1.993 0 00-1 3.72V6.5l3 3v1.78A1.993 1.993 0 005 15a1.993 1.993 0 001-3.72V9.5l3-3V4.72A1.993 1.993 0 008 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
              Fork
</button></form>
    <a href="/cdnbye/hlsjs-p2p-engine/network/members" class="social-count"
       aria-label="121 users forked this repository">
      121
    </a>
  </li>
</ul>

    </div>
      
<nav class="hx_reponav reponav js-repo-nav js-sidenav-container-pjax clearfix container-lg p-responsive d-none d-lg-block"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
    aria-label="Repository"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /cdnbye/hlsjs-p2p-engine" href="/cdnbye/hlsjs-p2p-engine">
      <div class="d-inline"><svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg></div>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /cdnbye/hlsjs-p2p-engine/issues" href="/cdnbye/hlsjs-p2p-engine/issues">
        <div class="d-inline"><svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 011.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>
        <span itemprop="name">Issues</span>
        <span class="Counter">5</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" data-skip-pjax="true" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /cdnbye/hlsjs-p2p-engine/pulls" href="/cdnbye/hlsjs-p2p-engine/pulls">
      <div class="d-inline"><svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0010 15a1.993 1.993 0 001-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 00-1 3.72v6.56A1.993 1.993 0 002 15a1.993 1.993 0 001-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg></div>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="4">
</a>  </span>


    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement" class="position-relative float-left">
      <a data-hotkey="g w" data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="repo_actions /cdnbye/hlsjs-p2p-engine/actions" href="/cdnbye/hlsjs-p2p-engine/actions">
        <div class="d-inline"><svg class="octicon octicon-play" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 8A7 7 0 110 8a7 7 0 0114 0zm-8.223 3.482l4.599-3.066a.5.5 0 000-.832L5.777 4.518A.5.5 0 005 4.934v6.132a.5.5 0 00.777.416z"></path></svg></div>
        Actions
</a>
    </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /cdnbye/hlsjs-p2p-engine/projects" href="/cdnbye/hlsjs-p2p-engine/projects">
      <div class="d-inline"><svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg></div>
      Projects
      <span class="Counter">0</span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /cdnbye/hlsjs-p2p-engine/wiki" href="/cdnbye/hlsjs-p2p-engine/wiki">
      <div class="d-inline"><svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg></div>
      Wiki
</a>
    <a data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="security overview alerts policy token_scanning code_scanning /cdnbye/hlsjs-p2p-engine/security" href="/cdnbye/hlsjs-p2p-engine/security">
      <div class="d-inline"><svg class="octicon octicon-shield" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 2l7-2 7 2v6.02C14 12.69 8.69 16 7 16c-1.69 0-7-3.31-7-7.98V2zm1 .75L7 1l6 1.75v5.268C13 12.104 8.449 15 7 15c-1.449 0-6-2.896-6-6.982V2.75zm1 .75L7 2v12c-1.207 0-5-2.482-5-5.985V3.5z"></path></svg></div>
      Security
</a>
    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people /cdnbye/hlsjs-p2p-engine/pulse" href="/cdnbye/hlsjs-p2p-engine/pulse">
      <div class="d-inline"><svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg></div>
      Insights
</a>

</nav>

  <div class="reponav-wrapper reponav-small d-lg-none">
  <nav class="reponav js-reponav text-center no-wrap"
       itemscope
       itemtype="http://schema.org/BreadcrumbList">

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a class="js-selected-navigation-item selected reponav-item" itemprop="url" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /cdnbye/hlsjs-p2p-engine" href="/cdnbye/hlsjs-p2p-engine">
        <span itemprop="name">Code</span>
        <meta itemprop="position" content="1">
</a>    </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /cdnbye/hlsjs-p2p-engine/issues" href="/cdnbye/hlsjs-p2p-engine/issues">
          <span itemprop="name">Issues</span>
          <span class="Counter">5</span>
          <meta itemprop="position" content="2">
</a>      </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /cdnbye/hlsjs-p2p-engine/pulls" href="/cdnbye/hlsjs-p2p-engine/pulls">
        <span itemprop="name">Pull requests</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="4">
</a>    </span>


      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /cdnbye/hlsjs-p2p-engine/projects" href="/cdnbye/hlsjs-p2p-engine/projects">
          <span itemprop="name">Projects</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="5">
</a>      </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_actions /cdnbye/hlsjs-p2p-engine/actions" href="/cdnbye/hlsjs-p2p-engine/actions">
          <span itemprop="name">Actions</span>
          <meta itemprop="position" content="6">
</a>      </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_wiki /cdnbye/hlsjs-p2p-engine/wiki" href="/cdnbye/hlsjs-p2p-engine/wiki">
          <span itemprop="name">Wiki</span>
          <meta itemprop="position" content="7">
</a>      </span>

      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="security overview alerts policy token_scanning code_scanning /cdnbye/hlsjs-p2p-engine/security" href="/cdnbye/hlsjs-p2p-engine/security">
        <span itemprop="name">Security</span>
        <meta itemprop="position" content="8">
</a>
      <a class="js-selected-navigation-item reponav-item" data-selected-links="pulse /cdnbye/hlsjs-p2p-engine/pulse" href="/cdnbye/hlsjs-p2p-engine/pulse">
        Pulse
</a>
      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="community /cdnbye/hlsjs-p2p-engine/community" href="/cdnbye/hlsjs-p2p-engine/community">
          Community
</a>      </span>

  </nav>
</div>


  </div>

  

  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>


<div class="container-lg clearfix new-discussion-timeline  p-responsive">
  <div class="repository-content ">

    
    


  


    <a class="d-none js-permalink-shortcut" data-hotkey="y" href="/cdnbye/hlsjs-p2p-engine/blob/ecaa2fa74a939b6339c8f126f2c385ceb6891c01/dist/hls.min.js">Permalink</a>

    <!-- blob contrib key: blob_contributors:v22:c9f91bbbe9cefa11aaca10fdba5b37a2 -->
    

    <div class="d-flex flex-items-start flex-shrink-0 flex-column flex-md-row pb-3">
      <span class="d-flex flex-justify-between width-full width-md-auto">
        
<details class="details-reset details-overlay branch-select-menu " id="branch-select-menu">
  <summary class="btn css-truncate btn-sm"
           data-hotkey="w"
           title="Switch branches or tags">
    <i>Branch:</i>
    <span class="css-truncate-target" data-menu-button>master</span>
    <span class="dropdown-caret"></span>
  </summary>

  <details-menu class="SelectMenu SelectMenu--hasFilter" src="/cdnbye/hlsjs-p2p-engine/refs/master/dist/hls.min.js?source_action=show&amp;source_controller=blob" preload>
    <div class="SelectMenu-modal">
      <include-fragment class="SelectMenu-loading" aria-label="Menu is loading">
        <svg class="octicon octicon-octoface anim-pulse" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg>
      </include-fragment>
    </div>
  </details-menu>
</details>

        <div class="BtnGroup flex-shrink-0 d-md-none">
          <a href="/cdnbye/hlsjs-p2p-engine/find/master"
                class="js-pjax-capture-input btn btn-sm BtnGroup-item"
                data-pjax
                data-hotkey="t">
            Find file
          </a>
          <clipboard-copy value="dist/hls.min.js" class="btn btn-sm BtnGroup-item">
            Copy path
          </clipboard-copy>
        </div>
      </span>
      <h2 id="blob-path" class="breadcrumb flex-auto min-width-0 text-normal flex-md-self-center ml-md-2 mr-md-3 my-2 my-md-0">
        <span class="js-repo-root text-bold"><span class="js-path-segment"><a data-pjax="true" href="/cdnbye/hlsjs-p2p-engine"><span>hlsjs-p2p-engine</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="/cdnbye/hlsjs-p2p-engine/tree/master/dist"><span>dist</span></a></span><span class="separator">/</span><strong class="final-path">hls.min.js</strong>
          <span class="separator">/</span><details class="details-reset details-overlay d-inline" id="jumpto-symbol-select-menu">
  <summary class="btn-link link-gray css-truncate" aria-haspopup="true" data-hotkey="r" data-hydro-click="{&quot;event_type&quot;:&quot;code_navigation.click_on_blob_definitions&quot;,&quot;payload&quot;:{&quot;action&quot;:&quot;click_on_blob_definitions&quot;,&quot;repository_id&quot;:132340238,&quot;ref&quot;:&quot;master&quot;,&quot;language&quot;:&quot;JavaScript&quot;,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}" data-hydro-click-hmac="1f2b23b28cfca5303460d045f02f9dc1ee86c79484fef6ed2f32b9f9dafa66c3">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
    <span data-menu-button>Jump to</span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="SelectMenu SelectMenu--hasFilter" role="menu">
    <div class="SelectMenu-modal">
      <header class="SelectMenu-header">
        <span class="SelectMenu-title">Code definitions</span>
        <button class="SelectMenu-closeButton" type="button" data-toggle-for="jumpto-symbol-select-menu">
          <svg aria-label="Close menu" class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
        </button>
      </header>
        <div class="SelectMenu-filter">
          <input
            class="SelectMenu-input form-control js-filterable-field"
            id="jumpto-symbols-filter-field"
            type="text"
            autocomplete="off"
            spellcheck="false"
            autofocus
            placeholder="Filter definitions"
            aria-label="Filter definitions">
        </div>
      <div class="SelectMenu-list">
        <div data-filterable-for="jumpto-symbols-filter-field" data-filterable-type="substring">
          
        </div>
      </div>
      <footer class="SelectMenu-footer">
        <div class="d-flex flex-justify-between">
          Code navigation index up-to-date
          <svg class="octicon octicon-primitive-dot text-green" viewBox="0 0 8 16" version="1.1" width="8" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 8c0-2.2 1.8-4 4-4s4 1.8 4 4-1.8 4-4 4-4-1.8-4-4z"></path></svg>
        </div>
      </footer>
    </div>
  </details-menu>
</details>

      </h2>

      <div class="BtnGroup flex-shrink-0 d-none d-md-inline-block">
        <a href="/cdnbye/hlsjs-p2p-engine/find/master"
              class="js-pjax-capture-input btn btn-sm BtnGroup-item"
              data-pjax
              data-hotkey="t">
          Find file
        </a>
        <clipboard-copy value="dist/hls.min.js" class="btn btn-sm BtnGroup-item">
          Copy path
        </clipboard-copy>
      </div>
    </div>



    <include-fragment src="/cdnbye/hlsjs-p2p-engine/contributors/master/dist/hls.min.js" class="Box Box--condensed commit-loader">
      <div class="Box-body bg-blue-light f6">
        Fetching contributors&hellip;
      </div>

      <div class="Box-body d-flex flex-items-center" >
        <img alt="" class="loader-loading mr-2" src="https://github.githubassets.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" height="16" />
        <span class="text-red h6 loader-error">Cannot retrieve contributors at this time</span>
      </div>
</include-fragment>





    <div class="Box mt-3 position-relative
      ">
      
<div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">

      1 lines (1 sloc)
      <span class="file-info-divider"></span>
    358 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="/cdnbye/hlsjs-p2p-engine/raw/master/dist/hls.min.js">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="/cdnbye/hlsjs-p2p-engine/blame/master/dist/hls.min.js">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="/cdnbye/hlsjs-p2p-engine/commits/master/dist/hls.min.js">History</a>
    </div>


    <div>
          <a class="btn-octicon tooltipped tooltipped-nw js-remove-unless-platform"
             data-platforms="windows,mac"
             href="https://desktop.github.com"
             aria-label="Open this file in GitHub Desktop"
             data-ga-click="Repository, open with desktop">
              <svg class="octicon octicon-device-desktop" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"></path></svg>
          </a>

          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form js-update-url-with-hash" action="/cdnbye/hlsjs-p2p-engine/edit/master/dist/hls.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="To1Bv7O3r15oE4s602gC8XgvE+LkEb74VxrPfIfx57Z55NXU2+v8RoP+XhI1pbUukPZI/c60H7g1SEshvzfnaA==" />
            <button class="btn-octicon tooltipped tooltipped-nw" type="submit"
              aria-label="Fork this project and edit the file" data-hotkey="e" data-disable-with>
              <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 011.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path></svg>
            </button>
</form>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form" action="/cdnbye/hlsjs-p2p-engine/delete/master/dist/hls.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="Hi0AUK/m5PnOKrAu1zI0sLryqO/3OucthyrHfFTnDb77Gc7L6MJKwcGVVXkN4A1eFnbJTzHgYbnHE6ByQHQCbw==" />
            <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
              aria-label="Fork this project and delete the file" data-disable-with>
              <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"></path></svg>
            </button>
</form>    </div>
  </div>
</div>



      

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip>
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line">!function(e,t){&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?module.exports=t():&quot;function&quot;==typeof define&amp;&amp;define.amd?define([],t):&quot;object&quot;==typeof exports?exports.Hls=t():e.Hls=t()}(&quot;undefined&quot;!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return t.d(r,&quot;a&quot;,r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=&quot;&quot;,t(t.s=6)}([function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return&quot;function&quot;==typeof e}function i(e){return&quot;number&quot;==typeof e}function a(e){return&quot;object&quot;==typeof e&amp;&amp;null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e&lt;0||isNaN(e))throw TypeError(&quot;n must be a positive number&quot;);return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,l,u;if(this._events||(this._events={}),&quot;error&quot;===e&amp;&amp;(!this._events.error||a(this._events.error)&amp;&amp;!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error(&#39;Uncaught, unspecified &quot;error&quot; event. (&#39;+t+&quot;)&quot;);throw c.context=t,c}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l&lt;i;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError(&quot;listener must be a function&quot;);return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit(&quot;newListener&quot;,e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&amp;&amp;!this._events[e].warned&amp;&amp;(i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&amp;&amp;i&gt;0&amp;&amp;this._events[e].length&gt;i&amp;&amp;(this._events[e].warned=!0,console.error(&quot;(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.&quot;,this._events[e].length),&quot;function&quot;==typeof console.trace&amp;&amp;console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError(&quot;listener must be a function&quot;);var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,o,s;if(!n(t))throw TypeError(&quot;listener must be a function&quot;);if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,i=-1,r===t||n(r.listener)&amp;&amp;r.listener===t)delete this._events[e],this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t);else if(a(r)){for(s=o;s-- &gt;0;)if(r[s]===t||r[s].listener&amp;&amp;r[s].listener===t){i=s;break}if(i&lt;0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&amp;&amp;delete this._events[e],this;if(0===arguments.length){for(t in this._events)&quot;removeListener&quot;!==t&amp;&amp;this.removeAllListeners(t);return this.removeAllListeners(&quot;removeListener&quot;),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&amp;&amp;this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){&quot;use strict&quot;;(function(e){var r,n,i,a=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e};!function(o,s){&quot;object&quot;==a(t)&amp;&amp;&quot;object&quot;==a(e)?e.exports=s():(n=[],r=s,void 0!==(i=&quot;function&quot;==typeof r?r.apply(t,n):r)&amp;&amp;(e.exports=i))}(&quot;undefined&quot;!=typeof self&amp;&amp;self,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return t.d(r,&quot;a&quot;,r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=&quot;&quot;,t(t.s=5)}([function(e,t,r){Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.default={DC_PING:&quot;PING&quot;,DC_PONG:&quot;PONG&quot;,DC_SIGNAL:&quot;SIGNAL&quot;,DC_OPEN:&quot;OPEN&quot;,DC_REQUEST:&quot;REQUEST&quot;,DC_PIECE_NOT_FOUND:&quot;PIECE_NOT_FOUND&quot;,DC_CLOSE:&quot;CLOSE&quot;,DC_RESPONSE:&quot;RESPONSE&quot;,DC_ERROR:&quot;ERROR&quot;,DC_PIECE:&quot;PIECE&quot;,DC_TIMEOUT:&quot;TIMEOUT&quot;,DC_PIECE_ACK:&quot;PIECE_ACK&quot;,DC_BITFIELD:&quot;BITFIELD&quot;,DC_PLAT_ANDROID:&quot;ANDROID&quot;,DC_PLAT_IOS:&quot;IOS&quot;,DC_PLAT_WEB:&quot;WEB&quot;,DC_CHOKE:&quot;CHOKE&quot;,DC_UNCHOKE:&quot;UNCHOKE&quot;,DC_USELESS:&quot;USELESS&quot;,DC_HAVE:&quot;HAVE&quot;,DC_LOST:&quot;LOST&quot;,BM_LOST:&quot;lost&quot;,FRAG_CHANGED:&quot;FRAG_CHANGED&quot;,FRAG_LOADED:&quot;FRAG_LOADED&quot;,FRAG_LOADING:&quot;FRAG_LOADING&quot;,RESTART_P2P:&quot;RESTART_P2P&quot;},e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,&quot;loaded&quot;,{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,&quot;id&quot;,{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n;&quot;function&quot;==typeof Symbol&amp;&amp;Symbol.iterator,function(i){function a(e,t){var r=(65535&amp;e)+(65535&amp;t);return(e&gt;&gt;16)+(t&gt;&gt;16)+(r&gt;&gt;16)&lt;&lt;16|65535&amp;r}function o(e,t){return e&lt;&lt;t|e&gt;&gt;&gt;32-t}function s(e,t,r,n,i,s){return a(o(a(a(t,e),a(n,s)),i),r)}function l(e,t,r,n,i,a,o){return s(t&amp;r|~t&amp;n,e,t,i,a,o)}function u(e,t,r,n,i,a,o){return s(t&amp;n|r&amp;~n,e,t,i,a,o)}function c(e,t,r,n,i,a,o){return s(t^r^n,e,t,i,a,o)}function d(e,t,r,n,i,a,o){return s(r^(t|~n),e,t,i,a,o)}function f(e,t){e[t&gt;&gt;5]|=128&lt;&lt;t%32,e[14+(t+64&gt;&gt;&gt;9&lt;&lt;4)]=t;var r,n,i,o,s,f=1732584193,h=-271733879,g=-1732584194,p=271733878;for(r=0;r&lt;e.length;r+=16)n=f,i=h,o=g,s=p,f=l(f,h,g,p,e[r],7,-680876936),p=l(p,f,h,g,e[r+1],12,-389564586),g=l(g,p,f,h,e[r+2],17,606105819),h=l(h,g,p,f,e[r+3],22,-1044525330),f=l(f,h,g,p,e[r+4],7,-176418897),p=l(p,f,h,g,e[r+5],12,1200080426),g=l(g,p,f,h,e[r+6],17,-1473231341),h=l(h,g,p,f,e[r+7],22,-45705983),f=l(f,h,g,p,e[r+8],7,1770035416),p=l(p,f,h,g,e[r+9],12,-1958414417),g=l(g,p,f,h,e[r+10],17,-42063),h=l(h,g,p,f,e[r+11],22,-1990404162),f=l(f,h,g,p,e[r+12],7,1804603682),p=l(p,f,h,g,e[r+13],12,-40341101),g=l(g,p,f,h,e[r+14],17,-1502002290),h=l(h,g,p,f,e[r+15],22,1236535329),f=u(f,h,g,p,e[r+1],5,-165796510),p=u(p,f,h,g,e[r+6],9,-1069501632),g=u(g,p,f,h,e[r+11],14,643717713),h=u(h,g,p,f,e[r],20,-373897302),f=u(f,h,g,p,e[r+5],5,-701558691),p=u(p,f,h,g,e[r+10],9,38016083),g=u(g,p,f,h,e[r+15],14,-660478335),h=u(h,g,p,f,e[r+4],20,-405537848),f=u(f,h,g,p,e[r+9],5,568446438),p=u(p,f,h,g,e[r+14],9,-1019803690),g=u(g,p,f,h,e[r+3],14,-187363961),h=u(h,g,p,f,e[r+8],20,1163531501),f=u(f,h,g,p,e[r+13],5,-1444681467),p=u(p,f,h,g,e[r+2],9,-51403784),g=u(g,p,f,h,e[r+7],14,1735328473),h=u(h,g,p,f,e[r+12],20,-1926607734),f=c(f,h,g,p,e[r+5],4,-378558),p=c(p,f,h,g,e[r+8],11,-2022574463),g=c(g,p,f,h,e[r+11],16,1839030562),h=c(h,g,p,f,e[r+14],23,-35309556),f=c(f,h,g,p,e[r+1],4,-1530992060),p=c(p,f,h,g,e[r+4],11,1272893353),g=c(g,p,f,h,e[r+7],16,-155497632),h=c(h,g,p,f,e[r+10],23,-1094730640),f=c(f,h,g,p,e[r+13],4,681279174),p=c(p,f,h,g,e[r],11,-358537222),g=c(g,p,f,h,e[r+3],16,-722521979),h=c(h,g,p,f,e[r+6],23,76029189),f=c(f,h,g,p,e[r+9],4,-640364487),p=c(p,f,h,g,e[r+12],11,-421815835),g=c(g,p,f,h,e[r+15],16,530742520),h=c(h,g,p,f,e[r+2],23,-995338651),f=d(f,h,g,p,e[r],6,-198630844),p=d(p,f,h,g,e[r+7],10,1126891415),g=d(g,p,f,h,e[r+14],15,-1416354905),h=d(h,g,p,f,e[r+5],21,-57434055),f=d(f,h,g,p,e[r+12],6,1700485571),p=d(p,f,h,g,e[r+3],10,-1894986606),g=d(g,p,f,h,e[r+10],15,-1051523),h=d(h,g,p,f,e[r+1],21,-2054922799),f=d(f,h,g,p,e[r+8],6,1873313359),p=d(p,f,h,g,e[r+15],10,-30611744),g=d(g,p,f,h,e[r+6],15,-1560198380),h=d(h,g,p,f,e[r+13],21,1309151649),f=d(f,h,g,p,e[r+4],6,-145523070),p=d(p,f,h,g,e[r+11],10,-1120210379),g=d(g,p,f,h,e[r+2],15,718787259),h=d(h,g,p,f,e[r+9],21,-343485551),f=a(f,n),h=a(h,i),g=a(g,o),p=a(p,s);return[f,h,g,p]}function h(e){var t,r=&quot;&quot;,n=32*e.length;for(t=0;t&lt;n;t+=8)r+=String.fromCharCode(e[t&gt;&gt;5]&gt;&gt;&gt;t%32&amp;255);return r}function g(e){var t,r=[];for(r[(e.length&gt;&gt;2)-1]=void 0,t=0;t&lt;r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t&lt;n;t+=8)r[t&gt;&gt;5]|=(255&amp;e.charCodeAt(t/8))&lt;&lt;t%32;return r}function p(e){return h(f(g(e),8*e.length))}function v(e,t){var r,n,i=g(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length&gt;16&amp;&amp;(i=f(i,8*e.length)),r=0;r&lt;16;r+=1)a[r]=909522486^i[r],o[r]=1549556828^i[r];return n=f(a.concat(g(t)),512+8*t.length),h(f(o.concat(n),640))}function m(e){var t,r,n=&quot;0123456789abcdef&quot;,i=&quot;&quot;;for(r=0;r&lt;e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t&gt;&gt;&gt;4&amp;15)+n.charAt(15&amp;t);return i}function y(e){return unescape(encodeURIComponent(e))}function b(e){return p(y(e))}function E(e){return m(b(e))}function _(e,t){return v(y(e),y(t))}function T(e,t){return m(_(e,t))}function S(e,t,r){return t?r?_(t,e):T(t,e):r?b(e):E(e)}void 0!==(n=function(){return S}.call(t,r,t,e))&amp;&amp;(e.exports=n)}()},function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return&quot;function&quot;==typeof e}function o(e){return&quot;number&quot;==typeof e}function s(e){return&quot;object&quot;===(void 0===e?&quot;undefined&quot;:u(e))&amp;&amp;null!==e}function l(e){return void 0===e}var u=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==a(Symbol.iterator)?function(e){return void 0===e?&quot;undefined&quot;:a(e)}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:void 0===e?&quot;undefined&quot;:a(e)};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e&lt;0||isNaN(e))throw TypeError(&quot;n must be a positive number&quot;);return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,a,o,u;if(this._events||(this._events={}),&quot;error&quot;===e&amp;&amp;(!this._events.error||s(this._events.error)&amp;&amp;!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error(&#39;Uncaught, unspecified &quot;error&quot; event. (&#39;+t+&quot;)&quot;);throw c.context=t,c}if(r=this._events[e],l(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),u=r.slice(),n=u.length,o=0;o&lt;n;o++)u[o].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError(&quot;listener must be a function&quot;);return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit(&quot;newListener&quot;,e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&amp;&amp;!this._events[e].warned&amp;&amp;(r=l(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&amp;&amp;r&gt;0&amp;&amp;this._events[e].length&gt;r&amp;&amp;(this._events[e].warned=!0,console.error(&quot;(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.&quot;,this._events[e].length),&quot;function&quot;==typeof console.trace&amp;&amp;console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError(&quot;listener must be a function&quot;);var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,a,o;if(!i(t))throw TypeError(&quot;listener must be a function&quot;);if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,n=-1,r===t||i(r.listener)&amp;&amp;r.listener===t)delete this._events[e],this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t);else if(s(r)){for(o=a;o-- &gt;0;)if(r[o]===t||r[o].listener&amp;&amp;r[o].listener===t){n=o;break}if(n&lt;0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&amp;&amp;delete this._events[e],this;if(0===arguments.length){for(t in this._events)&quot;removeListener&quot;!==t&amp;&amp;this.removeAllListeners(t);return this.removeAllListeners(&quot;removeListener&quot;),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&amp;&amp;this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){function n(e){if(e&gt;E)throw new RangeError(&#39;The value &quot;&#39;+e+&#39;&quot; is invalid for option &quot;size&quot;&#39;);var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,r){if(&quot;number&quot;==typeof e){if(&quot;string&quot;==typeof t)throw new TypeError(&#39;The &quot;string&quot; argument must be of type string. Received type number&#39;);return u(e)}return o(e,t,r)}function o(e,t,r){if(&quot;string&quot;==typeof e)return c(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError(&quot;The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type &quot;+(void 0===e?&quot;undefined&quot;:b(e)));if(m(e,ArrayBuffer)||e&amp;&amp;m(e.buffer,ArrayBuffer))return f(e,t,r);if(&quot;number&quot;==typeof e)throw new TypeError(&#39;The &quot;value&quot; argument must not be of type number. Received type number&#39;);var n=e.valueOf&amp;&amp;e.valueOf();if(null!=n&amp;&amp;n!==e)return i.from(n,t,r);var a=h(e);if(a)return a;if(&quot;undefined&quot;!=typeof Symbol&amp;&amp;null!=Symbol.toPrimitive&amp;&amp;&quot;function&quot;==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive](&quot;string&quot;),t,r);throw new TypeError(&quot;The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type &quot;+(void 0===e?&quot;undefined&quot;:b(e)))}function s(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&#39;&quot;size&quot; argument must be of type number&#39;);if(e&lt;0)throw new RangeError(&#39;The value &quot;&#39;+e+&#39;&quot; is invalid for option &quot;size&quot;&#39;)}function l(e,t,r){return s(e),e&lt;=0?n(e):void 0!==t?&quot;string&quot;==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function u(e){return s(e),n(e&lt;0?0:0|g(e))}function c(e,t){if(&quot;string&quot;==typeof t&amp;&amp;&quot;&quot;!==t||(t=&quot;utf8&quot;),!i.isEncoding(t))throw new TypeError(&quot;Unknown encoding: &quot;+t);var r=0|p(e,t),a=n(r),o=a.write(e,t);return o!==r&amp;&amp;(a=a.slice(0,o)),a}function d(e){for(var t=e.length&lt;0?0:0|g(e.length),r=n(t),i=0;i&lt;t;i+=1)r[i]=255&amp;e[i];return r}function f(e,t,r){if(t&lt;0||e.byteLength&lt;t)throw new RangeError(&#39;&quot;offset&quot; is outside of buffer bounds&#39;);if(e.byteLength&lt;t+(r||0))throw new RangeError(&#39;&quot;length&quot; is outside of buffer bounds&#39;);var n;return n=void 0===t&amp;&amp;void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.__proto__=i.prototype,n}function h(e){if(i.isBuffer(e)){var t=0|g(e.length),r=n(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}return void 0!==e.length?&quot;number&quot;!=typeof e.length||y(e.length)?n(0):d(e):&quot;Buffer&quot;===e.type&amp;&amp;Array.isArray(e.data)?d(e.data):void 0}function g(e){if(e&gt;=E)throw new RangeError(&quot;Attempt to allocate Buffer larger than maximum size: 0x&quot;+E.toString(16)+&quot; bytes&quot;);return 0|e}function p(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||m(e,ArrayBuffer))return e.byteLength;if(&quot;string&quot;!=typeof e)throw new TypeError(&#39;The &quot;string&quot; argument must be one of type string, Buffer, or ArrayBuffer. Received type &#39;+(void 0===e?&quot;undefined&quot;:b(e)));var r=e.length,n=arguments.length&gt;2&amp;&amp;!0===arguments[2];if(!n&amp;&amp;0===r)return 0;for(var a=!1;;)switch(t){case&quot;ascii&quot;:case&quot;latin1&quot;:case&quot;binary&quot;:return r;case&quot;utf8&quot;:case&quot;utf-8&quot;:return v(e).length;case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return 2*r;case&quot;hex&quot;:return r&gt;&gt;&gt;1;default:if(a)return n?-1:v(e).length;t=(&quot;&quot;+t).toLowerCase(),a=!0}}function v(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o&lt;n;++o){if((r=e.charCodeAt(o))&gt;55295&amp;&amp;r&lt;57344){if(!i){if(r&gt;56319){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);continue}if(o+1===n){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);continue}i=r;continue}if(r&lt;56320){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189),i=r;continue}r=65536+(i-55296&lt;&lt;10|r-56320)}else i&amp;&amp;(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);if(i=null,r&lt;128){if((t-=1)&lt;0)break;a.push(r)}else if(r&lt;2048){if((t-=2)&lt;0)break;a.push(r&gt;&gt;6|192,63&amp;r|128)}else if(r&lt;65536){if((t-=3)&lt;0)break;a.push(r&gt;&gt;12|224,r&gt;&gt;6&amp;63|128,63&amp;r|128)}else{if(!(r&lt;1114112))throw new Error(&quot;Invalid code point&quot;);if((t-=4)&lt;0)break;a.push(r&gt;&gt;18|240,r&gt;&gt;12&amp;63|128,r&gt;&gt;6&amp;63|128,63&amp;r|128)}}return a}function m(e,t){return e instanceof t||null!=e&amp;&amp;null!=e.constructor&amp;&amp;null!=e.constructor.name&amp;&amp;e.constructor.name===t.name}function y(e){return e!==e}var b=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==a(Symbol.iterator)?function(e){return void 0===e?&quot;undefined&quot;:a(e)}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:void 0===e?&quot;undefined&quot;:a(e)};t.Buffer=i;var E=2147483647;t.kMaxLength=E,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||&quot;undefined&quot;==typeof console||&quot;function&quot;!=typeof console.error||console.error(&quot;This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.&quot;),&quot;undefined&quot;!=typeof Symbol&amp;&amp;null!=Symbol.species&amp;&amp;i[Symbol.species]===i&amp;&amp;Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.from=function(e,t,r){return o(e,t,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,r){return l(e,t,r)},i.allocUnsafe=function(e){return u(e)},i.isBuffer=function(e){return null!=e&amp;&amp;!0===e._isBuffer&amp;&amp;e!==i.prototype},i.isEncoding=function(e){switch(String(e).toLowerCase()){case&quot;hex&quot;:case&quot;utf8&quot;:case&quot;utf-8&quot;:case&quot;ascii&quot;:case&quot;latin1&quot;:case&quot;binary&quot;:case&quot;base64&quot;:case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError(&#39;&quot;list&quot; argument must be an Array of Buffers&#39;);if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r&lt;e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),a=0;for(r=0;r&lt;e.length;++r){var o=e[r];if(m(o,Uint8Array)&amp;&amp;(o=i.from(o)),!i.isBuffer(o))throw new TypeError(&#39;&quot;list&quot; argument must be an Array of Buffers&#39;);o.copy(n,a),a+=o.length}return n},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError(&quot;argument should be a Buffer&quot;);if(r||(r=0),n||0===n||(n=this.length),t&gt;=e.length&amp;&amp;(t=e.length),t||(t=0),n&gt;0&amp;&amp;n&lt;r&amp;&amp;(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t&lt;0)throw new RangeError(&quot;targetStart out of bounds&quot;);if(r&lt;0||r&gt;=this.length)throw new RangeError(&quot;Index out of range&quot;);if(n&lt;0)throw new RangeError(&quot;sourceEnd out of bounds&quot;);n&gt;this.length&amp;&amp;(n=this.length),e.length-t&lt;n-r&amp;&amp;(n=e.length-t+r);var a=n-r;if(this===e&amp;&amp;&quot;function&quot;==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&amp;&amp;r&lt;t&amp;&amp;t&lt;n)for(var o=a-1;o&gt;=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return a}},function(e,t,r){function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.getPeersThrottle=t.getBrowserRTC=t.Buffer=t.Fetcher=t.Events=t.DataChannel=void 0;var i=r(6),a=n(i),o=r(0),s=n(o),l=r(9),u=n(l),c=r(11),d=n(c),f=r(12),h=n(f),g=r(4).Buffer;t.DataChannel=a.default,t.Events=s.default,t.Fetcher=u.default,t.Buffer=g,t.getBrowserRTC=d.default,t.getPeersThrottle=h.default},function(e,t,r){(function(e){function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function o(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=(void 0===t?&quot;undefined&quot;:a(t))&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+(void 0===t?&quot;undefined&quot;:a(t)));e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,r,n){var i=[];if(n){for(var a=void 0,o=0;o&lt;r-1;o++)a=e[c(&quot;0x7a&quot;)](o*t,(o+1)*t),i[c(&quot;0x7b&quot;)](a);a=e[c(&quot;0x7a&quot;)](e[c(&quot;0x65&quot;)]-n,e.byteLength),i[c(&quot;0x7b&quot;)](a)}else for(var s=void 0,l=0;l&lt;r;l++)s=e[c(&quot;0x7a&quot;)](l*t,(l+1)*t),i.push(s);return i}var u=[&quot;ZGF0YWNoYW5uZWwgdGltZW91dCB3aGlsZSBkb3dubG9hZGluZyBmcm9tIA==&quot;,&quot;RENfVElNRU9VVA==&quot;,&quot;IGlzIGNob2tlZA==&quot;,&quot;IGlzIHVuY2hva2Vk&quot;,&quot;cG9w&quot;,&quot;cmN2ZFJlcVF1ZXVlIHBvcCA=&quot;,&quot;Yml0c2V0&quot;,&quot;aGFz&quot;,&quot;cGVlciBhbHJlYWR5IGhhcyA=&quot;,&quot;LCBub3RpZnkgcGVlcg==&quot;,&quot;aXNBdmFpbGFibGVVcmdlbnRseQ==&quot;,&quot;c2xpY2U=&quot;,&quot;cHVzaA==&quot;,&quot;ZXhwb3J0cw==&quot;,&quot;ZGVmaW5lUHJvcGVydHk=&quot;,&quot;YXNzaWdu&quot;,&quot;bGVuZ3Ro&quot;,&quot;cHJvdG90eXBl&quot;,&quot;Y2FsbA==&quot;,&quot;ZW51bWVyYWJsZQ==&quot;,&quot;Y29uZmlndXJhYmxl&quot;,&quot;dmFsdWU=&quot;,&quot;a2V5&quot;,&quot;VkVSU0lPTg==&quot;,&quot;X19wcm90b19f&quot;,&quot;Z2V0UHJvdG90eXBlT2Y=&quot;,&quot;ZW5naW5l&quot;,&quot;Y2hhbm5lbA==&quot;,&quot;ZmV0Y2hlcg==&quot;,&quot;bG9nZ2Vy&quot;,&quot;Y29uZmln&quot;,&quot;cmVtb3RlUGVlcklk&quot;,&quot;Y2hhbm5lbElk&quot;,&quot;cGxhdGZvcm0=&quot;,&quot;dW5rbm93bg==&quot;,&quot;Y29ubmVjdGVk&quot;,&quot;bWlzcw==&quot;,&quot;YnVmQXJy&quot;,&quot;cGFja2V0U2l6ZQ==&quot;,&quot;Y29ublRpbWVvdXQ=&quot;,&quot;c2V0VGltZW91dA==&quot;,&quot;aW5mbw==&quot;,&quot;ZGMg&quot;,&quot;IGNvbm5lY3Rpb24gdGltZW91dA==&quot;,&quot;ZW1pdA==&quot;,&quot;ZGVmYXVsdA==&quot;,&quot;RENfRVJST1I=&quot;,&quot;cmN2ZFJlcVF1ZXVl&quot;,&quot;dXBsb2FkaW5n&quot;,&quot;Y2hva2Vk&quot;,&quot;d2VpZ2h0&quot;,&quot;dGltZXM=&quot;,&quot;ZGVsYXlz&quot;,&quot;dGltZXN0YW1w&quot;,&quot;dmVyc2lvbg==&quot;,&quot;X2RhdGFjaGFubmVs&quot;,&quot;X2luaXQ=&quot;,&quot;ZG93bmxvYWROdW0=&quot;,&quot;c3RhcnRTTg==&quot;,&quot;TUFYX1NBRkVfSU5URUdFUg==&quot;,&quot;ZXJyb3I=&quot;,&quot;RENfU0lHTkFM&quot;,&quot;ZGF0YWNoYW5uZWwgQ09OTkVDVEVEIHRvIA==&quot;,&quot;Y2xlYXJUaW1lb3V0&quot;,&quot;bXNnUXVldWU=&quot;,&quot;b25jZQ==&quot;,&quot;c3RyaW5n&quot;,&quot;ZGVidWc=&quot;,&quot;ZGF0YWNoYW5uZWwgcmVjZWl2ZSBzdHJpbmc6IA==&quot;,&quot;ZXZlbnQ=&quot;,&quot;RENfSEFWRQ==&quot;,&quot;ZW5kU04=&quot;,&quot;RENfUElFQ0U=&quot;,&quot;X3ByZXBhcmVGb3JCaW5hcnk=&quot;,&quot;YXR0YWNobWVudHM=&quot;,&quot;c2l6ZQ==&quot;,&quot;bGV2ZWw=&quot;,&quot;RENfUElFQ0VfTk9UX0ZPVU5E&quot;,&quot;X2hhbmRsZVJlcXVlc3RNc2c=&quot;,&quot;X2hhbmRsZVBpZWNlQWNr&quot;,&quot;RENfQklURklFTEQ=&quot;,&quot;d2Fybg==&quot;,&quot;cGVlciBjaGFubmVsIA==&quot;,&quot;RENfUExBVF9BTkRST0lE&quot;,&quot;RENfUExBVF9JT1M=&quot;,&quot;RENfUExBVF9XRUI=&quot;,&quot;IHBsYXRmb3JtIA==&quot;,&quot;ZmllbGQ=&quot;,&quot;bGl2ZQ==&quot;,&quot;cmVtYWluQXR0YWNobWVudHM=&quot;,&quot;ZXhwZWN0ZWRTaXpl&quot;,&quot;dGltZVNlbmRSZXF1ZXN0&quot;,&quot;X2hhbmRsZUJpbmFyeURhdGE=&quot;,&quot;Y2xvc2U=&quot;,&quot;RENfQ0xPU0U=&quot;,&quot;c2VuZEpzb24=&quot;,&quot;c2VuZA==&quot;,&quot;ZGF0YWNoYW5uZWwg&quot;,&quot;IHNlbmQgZGF0YSBmYWlsZWQsIGNsb3NlIGl0&quot;,&quot;c2VuZEJ1ZmZlcg==&quot;,&quot;Zmxvb3I=&quot;,&quot;cmVxdWVzdERhdGFCeUlk&quot;,&quot;dXJnZW50&quot;,&quot;bm93&quot;,&quot;cmVxdWVzdERhdGFCeVNO&quot;,&quot;cmVjZWl2ZVNpZ25hbA==&quot;,&quot;ZGVzdHJveQ==&quot;,&quot;Y2hva2VUaW1lcg==&quot;,&quot;cmVtb3ZlQWxsTGlzdGVuZXJz&quot;,&quot;IHRvIHJjdmRSZXFRdWV1ZQ==&quot;,&quot;dW5zaGlmdA==&quot;,&quot;RENfUkVRVUVTVA==&quot;,&quot;Z2V0UmVxdWVzdEZyb21RdWV1ZQ==&quot;,&quot;c2VnSWQ=&quot;,&quot;Y29uY2F0&quot;,&quot;Ynl0ZUxlbmd0aA==&quot;,&quot;cmVwb3J0RENUcmFmZmlj&quot;,&quot;YnVmZmVy&quot;,&quot;RENfUkVTUE9OU0U=&quot;,&quot;YnVmU04=&quot;,&quot;ZXhwZWN0ZWRTaXplIA==&quot;,&quot;IG5vdCBlcXVhbCB0byBieXRlTGVuZ3RoIA==&quot;,&quot;ZGF0YWNoYW5uZWwgZmluaXNoIGRvd25sb2FkaW5nIA==&quot;,&quot;IGZyb20g&quot;,&quot;bG9hZHRpbWVvdXQ=&quot;];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(u,264);var c=function e(t,r){t-=0;var n=u[t];void 0===e.KiMGLa&amp;&amp;(function(){var e;try{var t=Function(&#39;return (function() {}.constructor(&quot;return this&quot;)( ));&#39;);e=t()}catch(t){e=window}e.atob||(e.atob=function(e){for(var t,r,n=String(e).replace(/=+$/,&quot;&quot;),i=0,a=0,o=&quot;&quot;;r=n.charAt(a++);~r&amp;&amp;(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&amp;t&gt;&gt;(-2*i&amp;6)):0)r=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;.indexOf(r);return o})}(),e.vJyQdm=function(e){for(var t=atob(e),r=[],n=0,i=t.length;n&lt;i;n++)r+=&quot;%&quot;+(&quot;00&quot;+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(r)},e.IrzcwA={},e.KiMGLa=!![]);var i=e.IrzcwA[t];return void 0===i?(n=e.vJyQdm(n),e.IrzcwA[t]=n):n=i,n};Object[c(&quot;0x0&quot;)](t,&quot;__esModule&quot;,{value:!![]});var d=Object[c(&quot;0x1&quot;)]||function(e){for(var t=1;t&lt;arguments[c(&quot;0x2&quot;)];t++){var r=arguments[t];for(var n in r)Object[c(&quot;0x3&quot;)].hasOwnProperty[c(&quot;0x4&quot;)](r,n)&amp;&amp;(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r&lt;t[c(&quot;0x2&quot;)];r++){var n=t[r];n.enumerable=n[c(&quot;0x5&quot;)]||![],n[c(&quot;0x6&quot;)]=!![],c(&quot;0x7&quot;)in n&amp;&amp;(n.writable=!![]),Object[c(&quot;0x0&quot;)](e,n[c(&quot;0x8&quot;)],n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),h=r(7),g=n(h),p=r(3),v=n(p),m=r(0),y=n(m),b=r(4).Buffer,E=65536,_=function(e){function t(e,r,n,a,s){i(this,t);var l=o(this,(t[c(&quot;0xa&quot;)]||Object[c(&quot;0xb&quot;)](t))[c(&quot;0x4&quot;)](this));l[c(&quot;0xc&quot;)]=e,l[c(&quot;0xd&quot;)]=e[c(&quot;0xe&quot;)].channelId,l[c(&quot;0xf&quot;)]=e[c(&quot;0xf&quot;)],l[c(&quot;0x10&quot;)]=s,l[c(&quot;0x11&quot;)]=n,l[c(&quot;0x12&quot;)]=a?r+&quot;-&quot;+n:n+&quot;-&quot;+r,l[c(&quot;0x13&quot;)]=c(&quot;0x14&quot;),l[c(&quot;0x15&quot;)]=![],l.msgQueue=[],l[c(&quot;0x16&quot;)]=0,l[c(&quot;0x17&quot;)]=[],l[c(&quot;0x18&quot;)]=E,l[c(&quot;0x19&quot;)]=window[c(&quot;0x1a&quot;)](function(){l[c(&quot;0xf&quot;)][c(&quot;0x1b&quot;)](c(&quot;0x1c&quot;)+l[c(&quot;0x12&quot;)]+c(&quot;0x1d&quot;)),l[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x20&quot;)])},3e4),l[c(&quot;0x21&quot;)]=[],l[c(&quot;0x22&quot;)]=![],l[c(&quot;0x23&quot;)]=![],l.timeSendRequest=0,l[c(&quot;0x24&quot;)]=0,l[c(&quot;0x25&quot;)]=0,l[c(&quot;0x26&quot;)]=[];var u=l[c(&quot;0xc&quot;)][c(&quot;0xe&quot;)],f=u.channelId,h=u.id,p=u[c(&quot;0x27&quot;)],v=u.v,m=l.engine[c(&quot;0x28&quot;)];return l[c(&quot;0x29&quot;)]=new(g[c(&quot;0x1f&quot;)])(d({initiator:a,channelName:l.channelId,objectMode:!![],signInfo:{channelId:f,id:h,timestamp:p,version:m,v:v}},l.config.webRTCConfig)),l.isInitiator=a,l[c(&quot;0x2a&quot;)](l._datachannel),l[c(&quot;0x2b&quot;)]=0,l[c(&quot;0x2c&quot;)]=Number[c(&quot;0x2d&quot;)],l.endSN=-1,l}return s(t,e),f(t,null,[{key:c(&quot;0x9&quot;),get:function(){return&quot;v2&quot;}}]),f(t,[{key:c(&quot;0x2a&quot;),value:function(e){var t=this;e.on(c(&quot;0x2e&quot;),function(e){t[c(&quot;0x1e&quot;)](y.default[c(&quot;0x20&quot;)])}),e.on(&quot;signal&quot;,function(e){t.emit(y.default[c(&quot;0x2f&quot;)],e)});var r=function(){for(t[c(&quot;0xf&quot;)].info(c(&quot;0x30&quot;)+t[c(&quot;0x11&quot;)]),t[c(&quot;0x15&quot;)]=!![],window[c(&quot;0x31&quot;)](t[c(&quot;0x19&quot;)]),t[c(&quot;0x1e&quot;)](y.default.DC_OPEN);t[c(&quot;0x32&quot;)][c(&quot;0x2&quot;)]&gt;0;){var e=t[c(&quot;0x32&quot;)].shift();t.emit(e.event,e)}};e[c(&quot;0x33&quot;)](&quot;connect&quot;,r),e.on(&quot;data&quot;,function(e){if((void 0===e?&quot;undefined&quot;:a(e))===c(&quot;0x34&quot;)){t[c(&quot;0xf&quot;)][c(&quot;0x35&quot;)](c(&quot;0x36&quot;)+e+&quot; from &quot;+t[c(&quot;0x11&quot;)]);var r=JSON.parse(e);if(!t[c(&quot;0x15&quot;)])return void t[c(&quot;0x32&quot;)].push(r);switch(r[c(&quot;0x37&quot;)]){case y[c(&quot;0x1f&quot;)][c(&quot;0x38&quot;)]:if(t[c(&quot;0x1e&quot;)](r[c(&quot;0x37&quot;)],r),!r.sn||t[c(&quot;0x10&quot;)].live)return;r.sn&lt;t[c(&quot;0x2c&quot;)]&amp;&amp;(t[c(&quot;0x2c&quot;)]=r.sn),r.sn&gt;t[c(&quot;0x39&quot;)]&amp;&amp;(t[c(&quot;0x39&quot;)]=r.sn);break;case y[c(&quot;0x1f&quot;)][c(&quot;0x3a&quot;)]:t[c(&quot;0x3b&quot;)](r[c(&quot;0x3c&quot;)],r.seg_id,r.sn,r[c(&quot;0x3d&quot;)],r[c(&quot;0x3e&quot;)]),t.emit(r[c(&quot;0x37&quot;)],r);break;case y[c(&quot;0x1f&quot;)][c(&quot;0x3f&quot;)]:t[c(&quot;0x2b&quot;)]&gt;=0&amp;&amp;t.downloadNum--,t[c(&quot;0x1e&quot;)](r[c(&quot;0x37&quot;)],r);break;case y.default.DC_REQUEST:t[c(&quot;0x40&quot;)](r);break;case y[c(&quot;0x1f&quot;)].DC_PIECE_ACK:t[c(&quot;0x41&quot;)](),t[c(&quot;0x1e&quot;)](r[c(&quot;0x37&quot;)],r);break;case y[c(&quot;0x1f&quot;)][c(&quot;0x42&quot;)]:var n=r[c(&quot;0xd&quot;)];if(n&amp;&amp;t.channel!==n)return t[c(&quot;0xf&quot;)][c(&quot;0x43&quot;)](c(&quot;0x44&quot;)+n+&quot; not matched!&quot;),void t[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x20&quot;)]);switch(r.platform){case y[c(&quot;0x1f&quot;)][c(&quot;0x45&quot;)]:t[c(&quot;0x13&quot;)]=y[c(&quot;0x1f&quot;)][c(&quot;0x45&quot;)];break;case y[c(&quot;0x1f&quot;)][c(&quot;0x46&quot;)]:t.platform=y.default[c(&quot;0x46&quot;)];break;case y[c(&quot;0x1f&quot;)][c(&quot;0x47&quot;)]:t.platform=y[c(&quot;0x1f&quot;)].DC_PLAT_WEB}if(t[c(&quot;0xf&quot;)].info(t[c(&quot;0x11&quot;)]+c(&quot;0x48&quot;)+t.platform),t[c(&quot;0x1e&quot;)](r[c(&quot;0x37&quot;)],r),!r[c(&quot;0x49&quot;)]||t[c(&quot;0x10&quot;)][c(&quot;0x4a&quot;)])return;r[c(&quot;0x49&quot;)].forEach(function(e){e&gt;0&amp;&amp;(e&lt;t[c(&quot;0x2c&quot;)]&amp;&amp;(t[c(&quot;0x2c&quot;)]=e),e&gt;t.endSN&amp;&amp;(t[c(&quot;0x39&quot;)]=e))});break;case y[c(&quot;0x1f&quot;)].DC_CHOKE:t.choked=!![];break;case y.default.DC_UNCHOKE:t.choked=![];break;default:t.emit(r[c(&quot;0x37&quot;)],r)}}else if(t[c(&quot;0x17&quot;)].push(e),t.remainAttachments--,0===t[c(&quot;0x4b&quot;)]){var i=t[c(&quot;0x4c&quot;)]/(performance.now()-t[c(&quot;0x4d&quot;)]),o=t[c(&quot;0x24&quot;)]*t[c(&quot;0x25&quot;)];t.weight=(o+i)/++t[c(&quot;0x25&quot;)],t[c(&quot;0x2b&quot;)]&gt;=0&amp;&amp;t[c(&quot;0x2b&quot;)]--,t.sendJson({event:y[c(&quot;0x1f&quot;)].DC_PIECE_ACK,sn:t.bufSN,seg_id:t.segId,size:t[c(&quot;0x4c&quot;)]}),t[c(&quot;0x4e&quot;)]()}}),e[c(&quot;0x33&quot;)](c(&quot;0x4f&quot;),function(){t[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x50&quot;)])})}},{key:c(&quot;0x51&quot;),value:function(e){this[c(&quot;0x52&quot;)](JSON.stringify(e))}},{key:c(&quot;0x52&quot;),value:function(e){if(this[c(&quot;0x29&quot;)]&amp;&amp;this[c(&quot;0x29&quot;)][c(&quot;0x15&quot;)])try{this[c(&quot;0x29&quot;)][c(&quot;0x52&quot;)](e)}catch(e){this[c(&quot;0xf&quot;)][c(&quot;0x43&quot;)](c(&quot;0x53&quot;)+this[c(&quot;0x12&quot;)]+c(&quot;0x54&quot;)),this[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x20&quot;)])}}},{key:&quot;sendBitField&quot;,value:function(e){this.sendJson({event:y.default[c(&quot;0x42&quot;)],field:e,platform:y.default[c(&quot;0x47&quot;)],channel:this.channel})}},{key:c(&quot;0x55&quot;),value:function(e,t,r,n){this.uploading=!![];var i=n.byteLength,a=0,o=0;i%this[c(&quot;0x18&quot;)]==0?o=i/this[c(&quot;0x18&quot;)]:(o=Math[c(&quot;0x56&quot;)](i/this.packetSize)+1,a=i%this[c(&quot;0x18&quot;)]);var s={};s[c(&quot;0x37&quot;)]=y.default.DC_PIECE,s[c(&quot;0x3c&quot;)]=o,s.seg_id=r,s.sn=e,s[c(&quot;0x3e&quot;)]=t,s.size=i,this[c(&quot;0x51&quot;)](s);for(var u=l(n,this[c(&quot;0x18&quot;)],o,a),d=0;d&lt;u[c(&quot;0x2&quot;)];d++)this[c(&quot;0x52&quot;)](u[d])}},{key:c(&quot;0x57&quot;),value:function(e,t){var r=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:![];this[c(&quot;0x2b&quot;)]++;var n={};n[c(&quot;0x37&quot;)]=y.default.DC_REQUEST,n.seg_id=e,n.sn=t,n[c(&quot;0x58&quot;)]=r,this.sendJson(n),this[c(&quot;0x4d&quot;)]=performance[c(&quot;0x59&quot;)]()}},{key:c(&quot;0x5a&quot;),value:function(e){var t=arguments[c(&quot;0x2&quot;)]&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:![];this[c(&quot;0x2b&quot;)]++;var r={};r[c(&quot;0x37&quot;)]=y.default.DC_REQUEST,r.sn=e,r[c(&quot;0x58&quot;)]=t,this.sendJson(r),this[c(&quot;0x4d&quot;)]=performance[c(&quot;0x59&quot;)]()}},{key:c(&quot;0x4f&quot;),value:function(){this[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x50&quot;)])}},{key:c(&quot;0x5b&quot;),value:function(e){this._datachannel.signal(e)}},{key:c(&quot;0x5c&quot;),value:function(){this[c(&quot;0xf&quot;)][c(&quot;0x1b&quot;)](&quot;destroy datachannel &quot;+this.channelId),this[c(&quot;0x5d&quot;)]&amp;&amp;window[c(&quot;0x31&quot;)](this.chokeTimer),this[c(&quot;0x19&quot;)]&amp;&amp;window[c(&quot;0x31&quot;)](this.connTimeout);var e={};e.event=y.default.DC_CLOSE,this[c(&quot;0x51&quot;)](e),this[c(&quot;0x29&quot;)].removeAllListeners(),this[c(&quot;0x5e&quot;)](),this[c(&quot;0x29&quot;)].destroy()}},{key:c(&quot;0x40&quot;),value:function(e){this[c(&quot;0x22&quot;)]||this[c(&quot;0x21&quot;)][c(&quot;0x2&quot;)]&gt;0?(this.logger[c(&quot;0x1b&quot;)](&quot;add request sn &quot;+e.sn+c(&quot;0x5f&quot;)),e.urgent?this.rcvdReqQueue.push(e.sn):this[c(&quot;0x21&quot;)][c(&quot;0x60&quot;)](e.sn)):this[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x61&quot;)],e)}},{key:c(&quot;0x41&quot;),value:function(){this[c(&quot;0x22&quot;)]=![];var e=this[c(&quot;0x62&quot;)]();e&amp;&amp;this[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)].DC_REQUEST,{sn:e})}},{key:&quot;_prepareForBinary&quot;,value:function(e,t,r,n,i){this.bufArr=[],this[c(&quot;0x4b&quot;)]=e,this[c(&quot;0x63&quot;)]=t,this[c(&quot;0x3e&quot;)]=i,this.bufSN=r,this[c(&quot;0x4c&quot;)]=n}},{key:c(&quot;0x4e&quot;),value:function(){var e=b[c(&quot;0x64&quot;)](this[c(&quot;0x17&quot;)]);if(e[c(&quot;0x65&quot;)]==this[c(&quot;0x4c&quot;)]){this[c(&quot;0xc&quot;)][c(&quot;0xe&quot;)]?this[c(&quot;0xc&quot;)][c(&quot;0xe&quot;)][c(&quot;0x66&quot;)](this[c(&quot;0x4c&quot;)]):console[c(&quot;0x43&quot;)](&quot;DC report failed&quot;);var t=new Uint8Array(e)[c(&quot;0x67&quot;)];this[c(&quot;0x1e&quot;)](y[c(&quot;0x1f&quot;)][c(&quot;0x68&quot;)],{seg_id:this[c(&quot;0x63&quot;)],sn:this[c(&quot;0x69&quot;)],data:t,level:this.level})}else this.logger[c(&quot;0x2e&quot;)](c(&quot;0x6a&quot;)+this.expectedSize+c(&quot;0x6b&quot;)+e[c(&quot;0x65&quot;)]);this[c(&quot;0xf&quot;)][c(&quot;0x1b&quot;)](c(&quot;0x6c&quot;)+this.segId+c(&quot;0x6d&quot;)+this[c(&quot;0x11&quot;)]),this.segId=&quot;&quot;,this[c(&quot;0x17&quot;)]=[],this.expectedSize=-1}},{key:c(&quot;0x6e&quot;),value:function(){var e=this;if(this.logger[c(&quot;0x1b&quot;)](c(&quot;0x6f&quot;)+this[c(&quot;0x11&quot;)]),this.emit(y[c(&quot;0x1f&quot;)][c(&quot;0x70&quot;)]),++this[c(&quot;0x16&quot;)]&gt;=4&amp;&amp;!this.choked){this[c(&quot;0x23&quot;)]=!![];var t=10*this[c(&quot;0x16&quot;)];this[c(&quot;0xf&quot;)].warn(c(&quot;0x53&quot;)+this[c(&quot;0x12&quot;)]+c(&quot;0x71&quot;)),t&lt;=150&amp;&amp;(this[c(&quot;0x5d&quot;)]=setTimeout(function(){e.choked=![],e[c(&quot;0xf&quot;)][c(&quot;0x43&quot;)](c(&quot;0x53&quot;)+e[c(&quot;0x12&quot;)]+c(&quot;0x72&quot;))},1e3*t))}}},{key:c(&quot;0x62&quot;),value:function(){if(0===this[c(&quot;0x21&quot;)][c(&quot;0x2&quot;)])return null;var e=this[c(&quot;0x21&quot;)][c(&quot;0x73&quot;)]();return this.logger.info(c(&quot;0x74&quot;)+e),this[c(&quot;0x75&quot;)][c(&quot;0x76&quot;)](e)?(this[c(&quot;0xf&quot;)][c(&quot;0x1b&quot;)](c(&quot;0x77&quot;)+e+c(&quot;0x78&quot;)),this[c(&quot;0x51&quot;)]({event:y[c(&quot;0x1f&quot;)][c(&quot;0x3f&quot;)],sn:e}),this[c(&quot;0x62&quot;)]()):e}},{key:&quot;isAvailable&quot;,get:function(){return this[c(&quot;0x2b&quot;)]&lt;2&amp;&amp;this[c(&quot;0x23&quot;)]===![]}},{key:c(&quot;0x79&quot;),get:function(){return 0===this.downloadNum&amp;&amp;this[c(&quot;0x23&quot;)]===![]}}]),t}(v.default);t[c(&quot;0x1f&quot;)]=_,e[c(&quot;0x7c&quot;)]=t[c(&quot;0x1f&quot;)]}).call(t,r(1)(e))},function(e,t,r){function n(e){for(var t=&quot;&quot;,r=0;r&lt;e.length;++r)t+=e[r].toString(16).padStart(2,&quot;0&quot;);return t}function i(e){var t=this;if(!(t instanceof i))return new i(e);h.call(t),t.s=e.signInfo,t.channelName=e.initiator?e.channelName||n(p(20)):null,t._isChromium=&quot;undefined&quot;!=typeof window&amp;&amp;!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||i.channelConfig,t.channelConfig.negotiated=!1,t.channelConfig.ordered=!0,t.channelConfig.maxRetransmits=30,t.config=e.config||i.config,t.constraints=t._transformConstraints(e.constraints||i.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&amp;&amp;&quot;object&quot;===c(e.wrtc)?e.wrtc:window,t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!1,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new WeakMap,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isReactNativeWebrtc=&quot;number&quot;==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},&quot;addTrack&quot;in t._pc&amp;&amp;(t.streams&amp;&amp;t.streams.forEach(function(e){t.addStream(e)}),t._pc.ontrack=function(e){t._onTrack(e)}),t.initiator&amp;&amp;t._needsNegotiation()}function o(e,t){var r=new Error(e);return r.code=t,r}function s(){}var l=[&quot;cHJvdG90eXBl&quot;,&quot;ZnVuY3Rpb24=&quot;,&quot;aXRlcmF0b3I=&quot;,&quot;c3ltYm9s&quot;,&quot;Y29uc3RydWN0b3I=&quot;];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(l,261);var u=function e(t,r){t-=0;var n=l[t];void 0===e.MmxMDU&amp;&amp;(function(){var e;try{var t=Function(&#39;return (function() {}.constructor(&quot;return this&quot;)( ));&#39;);e=t()}catch(t){e=window}e.atob||(e.atob=function(e){for(var t,r,n=String(e).replace(/=+$/,&quot;&quot;),i=0,a=0,o=&quot;&quot;;r=n.charAt(a++);~r&amp;&amp;(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&amp;t&gt;&gt;(-2*i&amp;6)):0)r=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;.indexOf(r);return o})}(),e.vwwVPh=function(e){for(var t=atob(e),r=[],n=0,i=t.length;n&lt;i;n++)r+=&quot;%&quot;+(&quot;00&quot;+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(r)},e.XACOAc={},e.MmxMDU=!![]);var i=e.XACOAc[t];return void 0===i?(n=e.vwwVPh(n),e.XACOAc[t]=n):n=i,n},c=(&quot;undefined&quot;==typeof Symbol?&quot;undefined&quot;:a(Symbol))===u(&quot;0x0&quot;)&amp;&amp;a(Symbol[u(&quot;0x1&quot;)])===u(&quot;0x2&quot;)?function(e){return void 0===e?&quot;undefined&quot;:a(e)}:function(e){return e&amp;&amp;(&quot;undefined&quot;==typeof Symbol?&quot;undefined&quot;:a(Symbol))===u(&quot;0x0&quot;)&amp;&amp;e[u(&quot;0x3&quot;)]===Symbol&amp;&amp;e!==Symbol[u(&quot;0x4&quot;)]?u(&quot;0x2&quot;):void 0===e?&quot;undefined&quot;:a(e)},d=r(2),f=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(d);e.exports=i;var h=r(3),g=r(8),p=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t};String.prototype.padStart||(String.prototype.padStart=function(e,t){return e&gt;&gt;=0,t=String(void 0!==t?t:&quot; &quot;),this.length&gt;e||&quot;&quot;===t?String(this):(e-=this.length,e&gt;t.length&amp;&amp;(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),g(i,h),i.config={iceServers:[{urls:&quot;stun:stun.l.google.com:19302&quot;},{urls:&quot;stun:global.stun.twilio.com:3478?transport=udp&quot;}]},i.constraints={},i.channelConfig={},Object.defineProperty(i.prototype,&quot;bufferSize&quot;,{get:function(){var e=this;return e._channel&amp;&amp;e._channel.bufferedAmount||0}}),i.prototype.address=function(){var e=this;return{port:e.localPort,family:&quot;IPv4&quot;,address:e.localAddress}},i.prototype.signal=function(e){var t=this;if(t.destroyed)throw o(&quot;cannot signal after peer is destroyed&quot;,&quot;ERR_SIGNALING&quot;);if(&quot;string&quot;==typeof e)try{e=JSON.parse(e)}catch(t){e={}}e.renegotiate&amp;&amp;t._needsNegotiation(),e.candidate&amp;&amp;(t._pc.remoteDescription&amp;&amp;t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&amp;&amp;t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],&quot;offer&quot;===t._pc.remoteDescription.type&amp;&amp;t._createAnswer())},function(e){t.destroy(o(e,&quot;ERR_SET_REMOTE_DESCRIPTION&quot;))}),e.sdp||e.candidate||e.renegotiate||t.destroy(o(&quot;signal() called with invalid signal data&quot;,&quot;ERR_SIGNALING&quot;))},i.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),s,function(e){t.destroy(o(e,&quot;ERR_ADD_ICE_CANDIDATE&quot;))})}catch(e){t.destroy(o(&quot;error adding candidate: &quot;+e.message,&quot;ERR_ADD_ICE_CANDIDATE&quot;))}},i.prototype.send=function(e){this._channel.send(e)},i.prototype.addStream=function(e){var t=this;e.getTracks().forEach(function(r){t.addTrack(r,e)})},i.prototype.addTrack=function(e,t){var r=this,n=r._pc.addTrack(e,t),i=r._senderMap.get(e)||new WeakMap;i.set(t,n),r._senderMap.set(e,i),r._needsNegotiation()},i.prototype.removeTrack=function(e,t){var r=this,n=r._senderMap.get(e),i=n?n.get(t):null;i||r.destroy(new Error(&quot;Cannot remove track that was never added.&quot;));try{r._pc.removeTrack(i)}catch(e){&quot;NS_ERROR_UNEXPECTED&quot;===e.name?r._sendersAwaitingStable.push(i):r.destroy(e)}},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(r){t.removeTrack(r,e)})},i.prototype._needsNegotiation=function(){var e=this;e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout(function(){e._batchedNegotiation=!1,e.negotiate()},0))},i.prototype.negotiate=function(){var e=this;e.initiator?e._isNegotiating?e._queuedNegotiation=!0:e._createOffer():e.emit(&quot;signal&quot;,{renegotiate:!0}),e._isNegotiating=!0},i.prototype.destroy=function(e){var t=this;if(!t.destroyed){if(t.destroyed=!0,t.connected=!1,t._pcReady=!1,t._channelReady=!1,t._remoteTracks=null,t._remoteStreams=null,t._senderMap=null,clearInterval(t._interval),t._interval=null,t._chunk=null,t._cb=null,t._channel){try{t._channel.close()}catch(e){}t._channel.onmessage=null,t._channel.onopen=null,t._channel.onclose=null,t._channel.onerror=null}if(t._pc){try{t._pc.close()}catch(e){}t._pc.oniceconnectionstatechange=null,t._pc.onicegatheringstatechange=null,t._pc.onsignalingstatechange=null,t._pc.onicecandidate=null,&quot;addTrack&quot;in t._pc&amp;&amp;(t._pc.ontrack=null),t._pc.ondatachannel=null}t._pc=null,t._channel=null,e&amp;&amp;t.emit(&quot;error&quot;,e),t.emit(&quot;close&quot;)}},i.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(o(&quot;Data channel event is missing `channel` property&quot;,&quot;ERR_DATA_CHANNEL&quot;));t._channel=e.channel,t._channel.binaryType=&quot;arraybuffer&quot;,&quot;number&quot;==typeof t._channel.bufferedAmountLowThreshold&amp;&amp;(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(o(e,&quot;ERR_DATA_CHANNEL&quot;))}},i.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(e.offerConstraints).then(function(t){function r(){e.destroyed||(e.trickle||e._iceComplete?i():e.once(&quot;_iceComplete&quot;,i))}function n(t){e.destroy(o(t,&quot;ERR_SET_LOCAL_DESCRIPTION&quot;))}function i(){var r=e._pc.localDescription||t;e.emit(&quot;signal&quot;,{type:r.type,sdp:r.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then(r).catch(n))}).catch(function(t){e.destroy(o(t,&quot;ERR_CREATE_OFFER&quot;))})},i.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(e.answerConstraints).then(function(t){function r(){e.destroyed||(e.trickle||e._iceComplete?i():e.once(&quot;_iceComplete&quot;,i))}function n(t){e.destroy(o(t,&quot;ERR_SET_LOCAL_DESCRIPTION&quot;))}function i(){var r=e._pc.localDescription||t;e.emit(&quot;signal&quot;,{type:r.type,sdp:r.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then(r).catch(n))}).catch(function(t){e.destroy(o(t,&quot;ERR_CREATE_ANSWER&quot;))})},i.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,r=e._pc.iceGatheringState;e.emit(&quot;iceStateChange&quot;,t,r),&quot;connected&quot;!==t&amp;&amp;&quot;completed&quot;!==t||(e._pcReady=!0,e._maybeReady()),&quot;failed&quot;===t&amp;&amp;e.destroy(o(&quot;Ice connection failed.&quot;,&quot;ERR_ICE_CONNECTION_FAILURE&quot;)),&quot;closed&quot;===t&amp;&amp;e.destroy(new Error(&quot;Ice connection closed.&quot;))}},i.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var r=[];t.forEach(function(e){r.push(e)}),e(null,r)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var r=[];t.forEach(function(e){r.push(e)}),e(null,r)},function(t){e(t)}):t._pc.getStats.length&gt;0?t._pc.getStats(function(r){if(!t.destroyed){var n=[];r.result().forEach(function(e){var t={};e.names().forEach(function(r){t[r]=e.stat(r)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)}},function(t){e(t)}):e(null,[])},i.prototype._maybeReady=function(){function e(){t.destroyed||t.getStats(function(r,n){function i(e){u=!0;var r=s[e.localCandidateId];r&amp;&amp;r.ip?(t.localAddress=r.ip,t.localPort=Number(r.port)):r&amp;&amp;r.ipAddress?(t.localAddress=r.ipAddress,t.localPort=Number(r.portNumber)):&quot;string&quot;==typeof e.googLocalAddress&amp;&amp;(r=e.googLocalAddress.split(&quot;:&quot;),t.localAddress=r[0],t.localPort=Number(r[1]));var n=a[e.remoteCandidateId];n&amp;&amp;n.ip?(t.remoteAddress=n.ip,t.remotePort=Number(n.port)):n&amp;&amp;n.ipAddress?(t.remoteAddress=n.ipAddress,t.remotePort=Number(n.portNumber)):&quot;string&quot;==typeof e.googRemoteAddress&amp;&amp;(n=e.googRemoteAddress.split(&quot;:&quot;),t.remoteAddress=n[0],t.remotePort=Number(n[1])),t.remoteFamily=&quot;IPv4&quot;}if(!t.destroyed){r&amp;&amp;(n=[]);var a={},s={},l={},u=!1;if(n.forEach(function(e){&quot;remotecandidate&quot;!==e.type&amp;&amp;&quot;remote-candidate&quot;!==e.type||(a[e.id]=e),&quot;localcandidate&quot;!==e.type&amp;&amp;&quot;local-candidate&quot;!==e.type||(s[e.id]=e),&quot;candidatepair&quot;!==e.type&amp;&amp;&quot;candidate-pair&quot;!==e.type||(l[e.id]=e)}),n.forEach(function(e){&quot;transport&quot;===e.type&amp;&amp;e.selectedCandidatePairId&amp;&amp;i(l[e.selectedCandidatePairId]),(&quot;googCandidatePair&quot;===e.type&amp;&amp;&quot;true&quot;===e.googActiveConnection||(&quot;candidatepair&quot;===e.type||&quot;candidate-pair&quot;===e.type)&amp;&amp;e.selected)&amp;&amp;i(e)}),!(u||Object.keys(l).length&amp;&amp;!Object.keys(s).length))return void setTimeout(e,100);if(t._connecting=!1,t.connected=!0,t._chunk){try{t.send(t._chunk)}catch(r){return t.destroy(o(r,&quot;ERR_DATA_CHANNEL&quot;))}t._chunk=null;var c=t._cb;t._cb=null,c(null)}&quot;number&quot;!=typeof t._channel.bufferedAmountLowThreshold&amp;&amp;(t._interval=setInterval(function(){t._onInterval()},150),t._interval.unref&amp;&amp;t._interval.unref());var d=[&quot;cm1QeHQ=&quot;,&quot;UU5zTEg=&quot;,&quot;WUxWS2E=&quot;,&quot;U0sqQEllRV5yMA==&quot;,&quot;ZW1pdA==&quot;,&quot;Y29ubmVjdA==&quot;];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(d,450);var h=function e(t,r){t-=0;var n=d[t];void 0===e.ddzinM&amp;&amp;(function(){var e=function(){var e;try{e=Function(&#39;return (function() {}.constructor(&quot;return this&quot;)( ));&#39;)()}catch(t){e=window}return e}();e.atob||(e.atob=function(e){for(var t,r,n=String(e).replace(/=+$/,&quot;&quot;),i=0,a=0,o=&quot;&quot;;r=n.charAt(a++);~r&amp;&amp;(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&amp;t&gt;&gt;(-2*i&amp;6)):0)r=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;.indexOf(r);return o})}(),e.qBHZHa=function(e){for(var t=atob(e),r=[],n=0,i=t.length;n&lt;i;n++)r+=&quot;%&quot;+(&quot;00&quot;+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(r)},e.bWbEuz={},e.ddzinM=!![]);var i=e.bWbEuz[t];return void 0===i?(n=e.qBHZHa(n),e.bWbEuz[t]=n):n=i,n},g=t.s,p=g.channelId,v=g.id,m=g.timestamp,y=g.version,b=g.v,E=function(e,t,r,n){var i={};return i[h(&quot;0x0&quot;)]=function(e,t,r){return e(t,r)},i[h(&quot;0x1&quot;)]=function(e,t){return e+t},i[h(&quot;0x2&quot;)]=h(&quot;0x3&quot;),i.rmPxt(f.default,i[h(&quot;0x1&quot;)](i[h(&quot;0x1&quot;)](i[h(&quot;0x1&quot;)](e,t),r),i[h(&quot;0x2&quot;)]),n)}(p,v,m,y);t[h(&quot;0x4&quot;)](E.substr(0,8)===b?h(&quot;0x5&quot;):&quot;&quot;)}})}var t=this;!t.connected&amp;&amp;!t._connecting&amp;&amp;t._pcReady&amp;&amp;t._channelReady&amp;&amp;(t._connecting=!0,e())},i.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount&gt;65536||e._onChannelBufferedAmountLow()},i.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(&quot;stable&quot;===e._pc.signalingState&amp;&amp;(e._isNegotiating=!1,e._sendersAwaitingStable.forEach(function(t){e.removeTrack(t),e._queuedNegotiation=!0}),e._sendersAwaitingStable=[],e._queuedNegotiation&amp;&amp;(e._queuedNegotiation=!1,e._needsNegotiation()),e.emit(&quot;negotiate&quot;)),e.emit(&quot;signalingStateChange&quot;,e._pc.signalingState))},i.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&amp;&amp;t.trickle?t.emit(&quot;signal&quot;,{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit(&quot;_iceComplete&quot;)))},i.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var r=e.data;r instanceof ArrayBuffer&amp;&amp;(r=new Uint8Array(r)),t.emit(&quot;data&quot;,r)}},i.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&amp;&amp;e._cb){var t=e._cb;e._cb=null,t(null)}},i.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._channelReady=!0,e._maybeReady())},i.prototype._onChannelClose=function(){var e=this;e.destroyed||e.destroy()},i.prototype._onTrack=function(e){var t=this;t.destroyed||e.streams.forEach(function(r){t.emit(&quot;track&quot;,e.track,r),t._remoteTracks.push({track:e.track,stream:r}),t._remoteStreams.some(function(e){return e.id===r.id})||(t._remoteStreams.push(r),setTimeout(function(){t.emit(&quot;stream&quot;,r)},0))})},i.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&amp;&amp;!t._isChromium){var r=Object.assign({},e.optional,e.mandatory);return void 0!==r.OfferToReceiveVideo&amp;&amp;(r.offerToReceiveVideo=r.OfferToReceiveVideo,delete r.OfferToReceiveVideo),void 0!==r.OfferToReceiveAudio&amp;&amp;(r.offerToReceiveAudio=r.OfferToReceiveAudio,delete r.OfferToReceiveAudio),r}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&amp;&amp;(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&amp;&amp;(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}},function(e,t){&quot;function&quot;==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function a(e,t,r,n){var i=window.location.hostname;return function(e,t,r,n,i){return(0,d.default)(e+t+r+n,i)}(i,t,r,n,e).substr(0,8)}var o=[&quot;Y29uZmlndXJhYmxl&quot;,&quot;dmFsdWU=&quot;,&quot;a2V5&quot;,&quot;ZGVmaW5lUHJvcGVydHk=&quot;,&quot;bGVuZ3Ro&quot;,&quot;cHJvdG90eXBl&quot;,&quot;aGFzT3duUHJvcGVydHk=&quot;,&quot;ZW51bWVyYWJsZQ==&quot;];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(o,459);var s=function e(t,r){t-=0;var n=o[t];void 0===e.sKvnta&amp;&amp;(function(){var e=function(){var e;try{e=Function(&#39;return (function() {}.constructor(&quot;return this&quot;)( ));&#39;)()}catch(t){e=window}return e}();e.atob||(e.atob=function(e){for(var t,r,n=String(e).replace(/=+$/,&quot;&quot;),i=0,a=0,o=&quot;&quot;;r=n.charAt(a++);~r&amp;&amp;(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&amp;t&gt;&gt;(-2*i&amp;6)):0)r=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;.indexOf(r);return o})}(),e.TQyUNq=function(e){for(var t=atob(e),r=[],n=0,i=t.length;n&lt;i;n++)r+=&quot;%&quot;+(&quot;00&quot;+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(r)},e.iXCWVT={},e.sKvnta=!![]);var i=e.iXCWVT[t];return void 0===i?(n=e.TQyUNq(n),e.iXCWVT[t]=n):n=i,n};Object[s(&quot;0x0&quot;)](t,&quot;__esModule&quot;,{value:!![]});var l=Object.assign||function(e){for(var t=1;t&lt;arguments[s(&quot;0x1&quot;)];t++){var r=arguments[t];for(var n in r)Object[s(&quot;0x2&quot;)][s(&quot;0x3&quot;)].call(r,n)&amp;&amp;(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r&lt;t[s(&quot;0x1&quot;)];r++){var n=t[r];n[s(&quot;0x4&quot;)]=n[s(&quot;0x4&quot;)]||![],n[s(&quot;0x5&quot;)]=!![],s(&quot;0x6&quot;)in n&amp;&amp;(n.writable=!![]),Object[s(&quot;0x0&quot;)](e,n[s(&quot;0x7&quot;)],n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),c=r(2),d=n(c),f=r(10),h=n(f),g=r(0),p=n(g),v=&quot;1.2.0&quot;,m=&quot;https://tracker.cdnbye.com/v1&quot;,y=Symbol(&quot;httpDownloaded&quot;),b=Symbol(&quot;p2pDownloaded&quot;),E=Symbol(&quot;p2pUploaded&quot;),_=function(){function e(t,r,n,o,s){i(this,e),this.engine=t,this.key=r,this.baseUrl=o||m,this.channelId=window.btoa(n),this.timestamp=Date.parse(new Date)/1e3;var u=h.default.parseURL(this.baseUrl).netLoc.replace(/\/\//,&quot;&quot;),c=a(this.timestamp,v,u,this.channelId);this.announceInfo=l({},s,{channel:this.channelId,ts:this.timestamp,version:v,v:c,announce:u}),this.announceURL=this.baseUrl+&quot;/channel&quot;,this.reportFails=0,this.conns=0,this.failConns=0,this.totalHTTPDownloaded=0,this.totalP2PDownloaded=0,this.totalP2PUploaded=0,this[y]=0,this[b]=0,this[E]=0,this.errsBufStalled=0,this.errsInternalExpt=0,s.bundle?this.native=!0:this.native=!1}return u(e,[{key:&quot;btAnnounce&quot;,value:function(){var e=this,t=this.engine.logger;return new Promise(function(r,n){fetch(e.announceURL,{headers:e._requestHeader,method:&quot;POST&quot;,body:JSON.stringify(e.announceInfo)}).then(function(e){return e.json()}).then(function(t){if(-1===t.ret)n(t.data.msg);else{var i=t.data;i.info&amp;&amp;console.info(&quot;&quot;+i.info),i.warn&amp;&amp;console.warn(&quot;&quot;+i.warn),i.min_conns||(i.min_conns=8),(!i.rejected||i.rejected&amp;&amp;i.share_only)&amp;&amp;i.id&amp;&amp;i.v&amp;&amp;i.report_interval&amp;&amp;i.peers?(e.peerId=e.id=i.id,e.v=i.v,i.report_interval&lt;10&amp;&amp;(i.report_interval=10),e.btStats(i.report_interval),e.getPeersURL=e.baseUrl+&quot;/channel/&quot;+e.channelId+&quot;/node/&quot;+e.peerId+&quot;/peers&quot;,e.statsURL=e.baseUrl+&quot;/channel/&quot;+e.channelId+&quot;/node/&quot;+e.peerId+&quot;/stats&quot;,r(t.data)):e.engine.p2pEnabled=!1}}).catch(function(e){t.error(&quot;btAnnounce error &quot;+e),n(e)})})}},{key:&quot;btStats&quot;,value:function(){var e=this,t=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:10,r=this.engine.logger;this.heartbeater=window.setInterval(function(){fetch(e.statsURL,{method:&quot;POST&quot;,body:JSON.stringify(e._makeStatsBody())}).then(function(e){return e.json()}).then(function(t){if(-1===t.ret)window.clearInterval(e.heartbeater),e.engine.emit(p.default.RESTART_P2P);else{r.debug(&quot;sucessfully report stats&quot;);var n=e.lastStats||{},i=n.http,a=void 0===i?0:i,o=n.p2p,s=void 0===o?0:o,l=n.share,u=void 0===l?0:l,c=n.conns,d=void 0===c?0:c,f=n.failConns,h=void 0===f?0:f,g=n.errsBufStalled,v=void 0===g?0:g,m=n.errsInternalExpt,_=void 0===m?0:m;e[y]&gt;=a&amp;&amp;(e[y]-=a),e[b]&gt;=s&amp;&amp;(e[b]-=s),e[E]&gt;=u&amp;&amp;(e[E]-=u),e.conns-=d,e.failConns&gt;=h&amp;&amp;(e.failConns-=h),e.errsBufStalled&gt;=v&amp;&amp;(e.errsBufStalled-=v),e.errsInternalExpt&gt;=_&amp;&amp;(e.errsInternalExpt-=_),e.exptMsg&amp;&amp;(e.exptMsg=void 0)}}).catch(function(t){r.error(&quot;btStats error &quot;+t),++e.reportFails&gt;=2&amp;&amp;window.clearInterval(e.heartbeater)})},1e3*t)}},{key:&quot;btGetPeers&quot;,value:function(){var e=this,t=this.engine.logger;return new Promise(function(r,n){fetch(e.getPeersURL,{headers:e._requestHeader,method:&quot;POST&quot;}).then(function(e){return e.json()}).then(function(e){-1===e.ret?n(e.data.msg):r(e.data)}).catch(function(e){t.error(&quot;btGetPeers error &quot;+e),n(e)})})}},{key:&quot;increConns&quot;,value:function(){this.conns++}},{key:&quot;decreConns&quot;,value:function(){this.conns--}},{key:&quot;increFailConns&quot;,value:function(){this.failConns++}},{key:&quot;reportFlow&quot;,value:function(e){var t=Math.round(e/1024);this[y]+=t,this.totalHTTPDownloaded+=t,this._emitStats()}},{key:&quot;reportDCTraffic&quot;,value:function(e){var t=Math.round(e/1024);this[b]+=t,this.totalP2PDownloaded+=t,this._emitStats()}},{key:&quot;reportUploaded&quot;,value:function(){var e=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:0;this.totalP2PUploaded+=Math.round(e/1024),this[E]+=Math.round(e/1024),this._emitStats()}},{key:&quot;destroy&quot;,value:function(){this.engine.logger.warn(&quot;destroy fetcher&quot;),window.clearInterval(this.heartbeater)}},{key:&quot;_emitStats&quot;,value:function(){this.engine.emit(&quot;stats&quot;,{totalHTTPDownloaded:this.totalHTTPDownloaded,totalP2PDownloaded:this.totalP2PDownloaded,totalP2PUploaded:this.totalP2PUploaded});var e=this.engine.config.getStats;e&amp;&amp;&quot;function&quot;==typeof e&amp;&amp;e(this.totalP2PDownloaded,this.totalP2PUploaded,this.totalHTTPDownloaded)}},{key:&quot;_makeStatsBody&quot;,value:function(){var e={conns:this.conns,failConns:this.failConns,errsBufStalled:this.errsBufStalled,errsInternalExpt:this.errsInternalExpt,http:Math.round(this[y])||0,p2p:Math.round(this[b])||0,share:Math.round(this[E])||0};return this.lastStats=JSON.parse(JSON.stringify(e)),Object.keys(e).forEach(function(t){0===e[t]&amp;&amp;delete e[t]}),e.device=this.announceInfo.device,this.exptMsg&amp;&amp;(e.exptMsg=v+&quot; &quot;+this.exptMsg),e}},{key:&quot;_requestHeader&quot;,get:function(){var e={};return this.native&amp;&amp;(e.token=this.key),e}}]),e}();t.default=_,e.exports=t.default},function(e,t,r){(function(e){var r,n,i=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==a(Symbol.iterator)?function(e){return void 0===e?&quot;undefined&quot;:a(e)}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:void 0===e?&quot;undefined&quot;:a(e)};!function(a){var o=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,s=/^([^\/;?#]*)(.*)$/,l=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,c={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=c.parseURL(e);if(!n)throw new Error(&quot;Error trying to parse base URL.&quot;);return n.path=c.normalizePath(n.path),c.buildURLFromParts(n)}var i=c.parseURL(t);if(!i)throw new Error(&quot;Error trying to parse relative URL.&quot;);if(i.scheme)return r.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var a=c.parseURL(e);if(!a)throw new Error(&quot;Error trying to parse base URL.&quot;);if(!a.netLoc&amp;&amp;a.path&amp;&amp;&quot;/&quot;!==a.path[0]){var o=s.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&amp;&amp;!a.path&amp;&amp;(a.path=&quot;/&quot;);var l={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&amp;&amp;(l.netLoc=a.netLoc,&quot;/&quot;!==i.path[0]))if(i.path){var u=a.path,d=u.substring(0,u.lastIndexOf(&quot;/&quot;)+1)+i.path;l.path=c.normalizePath(d)}else l.path=a.path,i.params||(l.params=a.params,i.query||(l.query=a.query));return null===l.path&amp;&amp;(l.path=r.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(l)},parseURL:function(e){var t=o.exec(e);return t?{scheme:t[1]||&quot;&quot;,netLoc:t[2]||&quot;&quot;,path:t[3]||&quot;&quot;,params:t[4]||&quot;&quot;,query:t[5]||&quot;&quot;,fragment:t[6]||&quot;&quot;}:null},normalizePath:function(e){for(e=e.split(&quot;&quot;).reverse().join(&quot;&quot;).replace(l,&quot;&quot;);e.length!==(e=e.replace(u,&quot;&quot;)).length;);return e.split(&quot;&quot;).reverse().join(&quot;&quot;)},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};&quot;object&quot;===i(t)&amp;&amp;&quot;object&quot;===i(e)?e.exports=c:(r=[],void 0!==(n=function(){return c}.apply(t,r))&amp;&amp;(e.exports=n))}()}).call(t,r(1)(e))},function(e,t,r){e.exports=function(){if(&quot;undefined&quot;==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,r){function n(e,t){var r=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:120,n=null,i=!1,a=r;return function(){if(arguments.length&gt;0&amp;&amp;void 0!==arguments[0]&amp;&amp;arguments[0])return void window.clearTimeout(n);i||(i=!0,n=setTimeout(function(){e.call(t),i=!1,n=null},1e3*a),a*=1.5)}}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.default=n,e.exports=t.default}])})}).call(t,r(11)(e))},function(e,t,r){&quot;use strict&quot;;function n(){return!0}function i(e){var t=new RegExp(&quot;(^|&amp;)&quot;+e+&quot;=([^&amp;]*)(&amp;|$)&quot;),r=window.location.search.substr(1).match(t);return null!=r&amp;&amp;&quot;&quot;!==r[2]?r[2].toString():&quot;&quot;}function a(e,t){var r=s.default.parseURL(e),n=r.path.split(&quot;.&quot;)[1];return-1!==t.indexOf(n)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.noop=n,t.getQueryParam=i,t.isBlockType=a;var o=r(3),s=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(o)},function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error(&quot;Error trying to parse base URL.&quot;);return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error(&quot;Error trying to parse relative URL.&quot;);if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error(&quot;Error trying to parse base URL.&quot;);if(!s.netLoc&amp;&amp;s.path&amp;&amp;&quot;/&quot;!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&amp;&amp;!s.path&amp;&amp;(s.path=&quot;/&quot;);var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&amp;&amp;(u.netLoc=s.netLoc,&quot;/&quot;!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf(&quot;/&quot;)+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&amp;&amp;(u.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||&quot;&quot;,netLoc:t[2]||&quot;&quot;,path:t[3]||&quot;&quot;,params:t[4]||&quot;&quot;,query:t[5]||&quot;&quot;,fragment:t[6]||&quot;&quot;}:null},normalizePath:function(e){for(e=e.split(&quot;&quot;).reverse().join(&quot;&quot;).replace(i,&quot;&quot;);e.length!==(e=e.replace(a,&quot;&quot;)).length;);return e.split(&quot;&quot;).reverse().join(&quot;&quot;)},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},function(e,t,r){&quot;use strict&quot;;function n(){return navigator.userAgent.toLowerCase()}function i(e){return&quot;&quot;+(new RegExp(e+&quot;(\\d+((\\.|_)\\d+)*)&quot;).exec(n())||[,0])[1]||void 0}function a(e){return parseFloat((e||&quot;&quot;).replace(/\_/g,&quot;.&quot;))||0}var o={ANDROID_WEB:&quot;android-web&quot;,IOS_WEB:&quot;iOS-web&quot;,PC_NATIVE:&quot;PC-native&quot;,PC_WEB:&quot;PC-web&quot;},s={getNetType:function(){return(new RegExp(&quot;nettype\\/(\\w*)&quot;).exec(n())||[,&quot;&quot;])[1].toLowerCase()},getPlatform:function(){return s.isAndroid()?o.ANDROID_WEB:s.isIOS()?o.IOS_WEB:s.isElectron()?o.PC_NATIVE:o.PC_WEB},isX5:function(){return this.isAndroid()&amp;&amp;/\s(TBS|X5Core)\/[\w\.\-]+/i.test(n())},isPC:function(){return!a(i(&quot;os &quot;))&amp;&amp;!a(i(&quot;android[/ ]&quot;))},isIOS:function(){return a(i(&quot;os &quot;))},isAndroid:function(){return a(i(&quot;android[/ ]&quot;))},isSafari:function(){return this.isIOS()&amp;&amp;/^((?!chrome|android).)*safari/i.test(n())},isElectron:function(){return/electron/i.test(n())},isMobile:function(){return s.isAndroid()||s.isIOS()},device:o};e.exports=s},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.config=t.FragLoader=t.Tracker=void 0;var i=r(9),a=n(i),o=r(15),s=n(o),l={prefetchNum:10};t.Tracker=a.default,t.FragLoader=s.default,t.config=l},function(e,t,r){&quot;use strict&quot;;function n(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function i(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function a(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var o,s=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),l=r(7),u=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(l);o=r(26);var c={maxBufferLength:5,liveSyncDurationCount:10,liveBackBufferLength:5},d={maxBufferLength:60},f=function(e){function t(){var e=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=e.p2pConfig||{},a=!0===r.live?c:d,s=JSON.parse(JSON.stringify(a));for(var l in e)&quot;p2pConfig&quot;!==l&amp;&amp;(s[l]=e[l]);var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s));return f._restartEvent=function(){console.warn(&quot;hlsjs restartP2P&quot;),f.restartP2P()},u.default.isSupported()&amp;&amp;(f._p2pEngine=new u.default(f,r),f._p2pEngine.on(u.default.Events.RESTART_P2P,f._restartEvent)),f.on(o.Events.DESTROYING,function(){console.warn(&quot;destroying hlsjs&quot;),f._p2pEngine&amp;&amp;(f._p2pEngine.destroy(),f._p2pEngine=null)}),f}return a(t,e),s(t,null,[{key:&quot;P2PEvents&quot;,get:function(){return u.default.Events}}]),s(t,[{key:&quot;enableP2P&quot;,value:function(){this._p2pEngine=this._p2pEngine.enableP2P()}},{key:&quot;disableP2P&quot;,value:function(){this._p2pEngine.disableP2P()}},{key:&quot;restartP2P&quot;,value:function(){var e=this;this._p2pEngine.disableP2P(),window.setTimeout(function(){e.enableP2P()},2e3),this._p2pEngine.removeListener(u.default.Events.RESTART_P2P,this._restartEvent)}},{key:&quot;p2pEngine&quot;,get:function(){return this._p2pEngine}}]),t}(o);f.engineVersion=u.default.version,f.WEBRTC_SUPPORT=u.default.isSupported(),t.default=f,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function a(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function o(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var s=Object.assign||function(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&amp;&amp;(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),u=r(0),c=n(u),d=r(3),f=n(d),h=r(8),g=n(h),p=r(5),v=r(23),m=n(v),y=r(1),b=r(24),E=n(b),_=r(4),T=n(_),S=r(2),w=r(25),R=n(w);if(window.cdnbyeloaded)throw new Error(&quot;CDNBye plugin is loaded before(重复加载CDNBye插件)&quot;);window.cdnbyeloaded=!0;var A=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r=r||{},r.tag&amp;&amp;r.tag.length&gt;20)throw new Error(&quot;Tag is too long&quot;);if(r.agent&amp;&amp;r.agent.length&gt;20)throw new Error(&quot;Agent is too long&quot;);if(r.appName&amp;&amp;r.appName.length&gt;30)throw new Error(&quot;appName is too long&quot;);if(r.appId&amp;&amp;r.appId.length&gt;30)throw new Error(&quot;appId is too long&quot;);if(r.token&amp;&amp;r.token.length&gt;20)throw new Error(&quot;Token is too long&quot;);n.config=Object.assign({},g.default,r),e.config.segmentId=n.config.segmentId,n.hlsjs=e,n.p2pEnabled=!(!1===n.config.p2pEnabled||&quot;0&quot;===(0,S.getQueryParam)(&quot;_p2p&quot;)),n.HLSEvents=e.constructor.Events;var o=function r(i,a){var o=a.details,l=o.live;n.config.live=n.hlsjs.config.live=l,n.config.startSN=o.startSN,n.config.endSN=o.endSN;var u=T.default.getPlatform(),c=T.default.getNetType()||void 0;n.browserInfo={device:u,netType:c,tag:n.config.tag||(0,R.default)(),live:l,type:&quot;hls&quot;,agent:n.config.agent||void 0},u===T.default.device.PC_NATIVE&amp;&amp;(n.browserInfo=s({},n.browserInfo,{app:n.config.appName,bundle:n.config.appId})),!1!==n.config.useHttpRange&amp;&amp;l&amp;&amp;(n.config.useHttpRange=!0);var d=f.default.parseURL(n.config.wsSignalerAddr).netLoc.substr(2);n.channel=n.config.channelId(e.url,n.browserInfo)+&quot;|&quot;+d+&quot;[&quot;+y.DataChannel.VERSION+&quot;]&quot;;var h=new E.default(n.config);n.hlsjs.config.logger=n.logger=h,h.info(&quot;CDNBye version: &quot;+t.version+&quot; Hlsjs version: &quot;+e.constructor.version),h.info(&quot;channel &quot;+n.channel),h.info(&quot;device &quot;+u+&quot; netType &quot;+c),n.eventListened=!1,n._init(n.channel,n.browserInfo),h.info(&quot;startSN &quot;+o.startSN+&quot; endSN &quot;+o.endSN),e.off(n.HLSEvents.LEVEL_LOADED,r)};return e.on(n.HLSEvents.LEVEL_LOADED,o),n}return o(t,e),l(t,null,[{key:&quot;Events&quot;,get:function(){return y.Events}}]),l(t,[{key:&quot;_init&quot;,value:function(e,t){var r=this;if(this.p2pEnabled){this.hlsjs.config.p2pEnabled=this.p2pEnabled,this.bufMgr=new m.default(this,this.config),this.hlsjs.config.bufMgr=this.bufMgr,this.media=this.hlsjs.media;var n=new y.Fetcher(this,this.config.token,window.encodeURIComponent(e),this.config.announce||&quot;&quot;,t);this.fetcher=n,this.tracker=new p.Tracker(this,n,this.config),this.tracker.scheduler.bufferManager=this.bufMgr,this.hlsjs.config.fLoader=p.FragLoader,this.hlsjs.config.scheduler=this.tracker.scheduler,this.hlsjs.config.fetcher=n,this.hlsjs.config.p2pBlackList=this.config.p2pBlackList,this.trackerTried=!1,this.eventListened||(this.hlsjs.on(this.HLSEvents.FRAG_LOADING,this._onFragLoading.bind(this)),this.hlsjs.on(this.HLSEvents.FRAG_LOADED,this._onFragLoaded.bind(this)),this.hlsjs.on(this.HLSEvents.FRAG_CHANGED,this._onFragChanged.bind(this)),this.hlsjs.on(this.HLSEvents.ERROR,this._onHlsError.bind(this)),this.eventListened=!0),window.addEventListener(&quot;beforeunload&quot;,function(){r.p2pEnabled&amp;&amp;r.disableP2P()}),window.addEventListener(&quot;unload&quot;,function(){r.p2pEnabled&amp;&amp;r.disableP2P()})}}},{key:&quot;_onFragLoading&quot;,value:function(e,t){var r=t.frag.sn;(0,S.isBlockType)(t.frag.url,this.config.p2pBlackList)||(this.logger.debug(&quot;loading frag &quot;+r),this.emit(y.Events.FRAG_LOADING,r))}},{key:&quot;_onFragLoaded&quot;,value:function(e,t){var r=this,n=t.frag,i=n.sn,a=n.duration;if(!(0,S.isBlockType)(t.frag.url,this.config.p2pBlackList)&amp;&amp;(this.emit(y.Events.FRAG_LOADED,i,a),this.trackerTried||this.tracker.connected||!this.config.p2pEnabled||(this.tracker.resumeP2P(),this.trackerTried=!0,this.config.useHttpRange?fetch(t.frag.url,{headers:{Range:&quot;bytes=0-10&quot;}}).then(function(e){206===e.status&amp;&amp;(r.config.httpRangeSupported=!0,r.logger.info(&quot;http range request is supported&quot;))}).catch(function(e){r.config.httpRangeSupported=!1,r.logger.warn(&quot;http range request is not supported&quot;)}):this.config.httpRangeSupported=!1),this.config.p2pEnabled&amp;&amp;this.bufMgr.hasSegOfSN(i+1))){var o=this.bufMgr.getSegIdbySN(i+1),s=this.bufMgr.getSegById(o).level;this.hlsjs.nextLoadLevel=s}}},{key:&quot;_onFragChanged&quot;,value:function(e,t){if(!(0,S.isBlockType)(t.frag.url,this.config.p2pBlackList)){this.logger.debug(&quot;frag changed: &quot;+t.frag.sn);var r=t.frag,n=r.sn,i=r.duration;this.emit(y.Events.FRAG_CHANGED,n,i)}}},{key:&quot;_onHlsError&quot;,value:function(e,t){t.fatal?this.logger.error(t.type+&quot; details &quot;+t.details+&quot; reason &quot;+t.reason):this.logger.warn(t.type+&quot; details &quot;+t.details+&quot; reason &quot;+t.reason);var r=this.hlsjs.constructor.ErrorDetails;switch(t.details){case r.BUFFER_STALLED_ERROR:this.fetcher&amp;&amp;this.fetcher.errsBufStalled++;break;case r.INTERNAL_EXCEPTION:this.fetcher&amp;&amp;(this.fetcher.errsInternalExpt++,this.fetcher.exptMsg=t.err.message),console.warn(&quot;INTERNAL_EXCEPTION event &quot;+t.event+&quot; err &quot;+t.err.message)}}},{key:&quot;disableP2P&quot;,value:function(){this.logger&amp;&amp;this.logger.warn(&quot;disable P2P&quot;),this.removeAllListeners(),this.p2pEnabled&amp;&amp;(this.p2pEnabled=!1,this.config.p2pEnabled=this.hlsjs.config.p2pEnabled=this.p2pEnabled,this.tracker&amp;&amp;(this.tracker.stopP2P(),this.tracker={},this.fetcher=null,this.bufMgr.destroy(),this.bufMgr=null,this.hlsjs.config.fLoader=this.hlsjs.constructor.DefaultConfig.loader))}},{key:&quot;enableP2P&quot;,value:function(){return this.p2pEnabled?null:(this.logger.info(&quot;enable P2P&quot;),this.p2pEnabled=!0,this.config.p2pEnabled=this.hlsjs.config.p2pEnabled=this.p2pEnabled,this._init(this.channel,this.browserInfo),this)}},{key:&quot;destroy&quot;,value:function(){this.disableP2P(),this.removeAllListeners(),console.warn(&quot;destroy p2p engine&quot;)}},{key:&quot;version&quot;,get:function(){return t.version}}],[{key:&quot;isSupported&quot;,value:function(){var e=(0,y.getBrowserRTC)();return e&amp;&amp;void 0!==e.RTCPeerConnection.prototype.createDataChannel}}]),t}(c.default);A.WEBRTC_SUPPORT=!!(0,y.getBrowserRTC)(),A.version=&quot;1.2.0&quot;,t.default=A,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var n=Object.assign||function(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&amp;&amp;(e[n]=r[n])}return e},i=r(5),a=r(3),o=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(a),s=n({wsSignalerAddr:&quot;wss://signal.cdnbye.com&quot;,wsMaxRetries:15,wsReconnectInterval:30,p2pEnabled:!0,memoryCacheLimit:{pc:536870912,mobile:268435456},dcDownloadTimeout:25,logLevel:&quot;none&quot;,tag:&quot;&quot;,webRTCConfig:{},p2pBlackList:[&quot;aac&quot;,&quot;mp3&quot;,&quot;vtt&quot;,&quot;webvtt&quot;,&quot;key&quot;],agent:&quot;&quot;,token:&quot;free&quot;,appName:void 0,appId:void 0},i.config);s.channelId=function(e){var t=(arguments.length&gt;1&amp;&amp;void 0!==arguments[1]&amp;&amp;arguments[1],o.default.parseURL(e));return&quot;&quot;+(t.netLoc.substr(2)+t.path.split(&quot;.&quot;)[0])},s.segmentId=function(e,t,r){return e+&quot;-&quot;+t},s.validateSegment=function(e,t,r){return!0},s.getStats=function(e,t,r){},s.getPeerId=function(e){},s.getPeersInfo=function(e){},t.default=s,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t&lt;e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function o(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var l=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),u=r(0),c=n(u),d=r(10),f=n(d),h=r(13),g=n(h),p=r(1),v=(r(2),r(4)),m=n(v),y=15,b=8,E=function(e){function t(e,r,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.engine=e,i.logger=e.logger,i.config=n,i.connected=!1,i.scheduler=new f.default(e,n),i.DCMap=new Map,i.failedDCSet=new Set,i.signalerWs=null,i.fetcher=r,i.peers=[],i.minConns=0,i.requestMorePeers=(0,p.getPeersThrottle)(i._requestMorePeers,i),i.maxConns=m.default.isMobile()?b:y,i}return s(t,e),l(t,[{key:&quot;resumeP2P&quot;,value:function(){var e=this;this.fetcher.btAnnounce().then(function(t){e.logger.info(&quot;announce request response &quot;+JSON.stringify(t)),e.engine.peerId=e.peerId=t.id,e.minConns=t.min_conns,t.share_only&amp;&amp;e.scheduler&amp;&amp;e.scheduler.setShareOnly(),e.signalerWs=e._initSignalerWs(),0===t.peers.length?e.requestMorePeers():e._handlePeers(t.peers),e.engine.emit(&quot;peerId&quot;,e.peerId);var r=e.engine.config.getPeerId;r&amp;&amp;&quot;function&quot;==typeof r&amp;&amp;r(e.peerId)}).catch(function(e){console.warn(e)})}},{key:&quot;stopP2P&quot;,value:function(){this.fetcher.destroy(),this.fetcher=null,this.requestMorePeers(!0),this.scheduler.destroy(),this.scheduler=null,this.signalerWs&amp;&amp;(this.signalerWs.destroy(),this.signalerWs=null),this.peers=[];var e=!0,t=!1,r=void 0;try{for(var n,i=this.DCMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.destroy()}}catch(e){t=!0,r=e}finally{try{!e&amp;&amp;i.return&amp;&amp;i.return()}finally{if(t)throw r}}this.DCMap.clear(),this.failedDCSet.clear(),this.logger.warn(&quot;tracker stop p2p&quot;)}},{key:&quot;destroy&quot;,value:function(){this.stopP2P(),this.removeAllListeners(),this.logger.warn(&quot;destroy tracker&quot;)}},{key:&quot;_handlePeers&quot;,value:function(e){var t=this,r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.peers.push({id:l.id})}}catch(e){n=!0,a=e}finally{try{!r&amp;&amp;s.return&amp;&amp;s.return()}finally{if(n)throw a}}this.peers=this.peers.filter(function(e){for(var r=[].concat(i(t.DCMap.keys()),i(t.failedDCSet.keys())),n=0;n&lt;r.length;n++){var a=r[n];if(e.id===a)return!1}return!0})}},{key:&quot;_tryConnectToAllPeers&quot;,value:function(){var e=this;0!==this.peers.length&amp;&amp;(this.logger.info(&quot;try connect to &quot;+this.peers.length+&quot; peers&quot;),this.peers.forEach(function(t){var r=new p.DataChannel(e.engine,e.peerId,t.id,!0,e.config);e.DCMap.set(t.id,r),e._setupDC(r)}),this.peers=[])}},{key:&quot;_setupDC&quot;,value:function(e){var t=this;e.on(p.Events.DC_SIGNAL,function(r){var n=e.remotePeerId;t.signalerWs.sendSignal(n,r)}).once(p.Events.DC_ERROR,function(){t.logger.info(&quot;datachannel connect &quot;+e.channelId+&quot; failed&quot;),t.scheduler&amp;&amp;t.scheduler.deletePeer(e),t.DCMap.delete(e.remotePeerId),t.failedDCSet.add(e.remotePeerId),e.destroy(),t.requestMorePeers(),e.connected&amp;&amp;t.fetcher?t.fetcher.decreConns():t.fetcher.increFailConns()}).once(p.Events.DC_CLOSE,function(){t.logger.info(&quot;datachannel &quot;+e.channelId+&quot; closed&quot;),t.scheduler&amp;&amp;t.scheduler.deletePeer(e),t.DCMap.delete(e.remotePeerId),t.failedDCSet.add(e.remotePeerId),e.destroy(),t.requestMorePeers(),t.fetcher&amp;&amp;t.fetcher.decreConns()}).once(p.Events.DC_OPEN,function(){t.scheduler.handshakePeer(e);var r=!(t.scheduler.peersNum&lt;=t.minConns);t.requestMorePeers(r),t.fetcher.increConns()})}},{key:&quot;_initSignalerWs&quot;,value:function(){var e=this,t=new g.default(this.engine,this.peerId,this.config);return t.onopen=function(){e.connected=!0,e._tryConnectToAllPeers()},t.onmessage=function(t){var r=JSON.parse(t.data),n=r.action;switch(n){case&quot;signal&quot;:var i=r.from_peer_id;if(e.failedDCSet.has(i)||!i)return;if(e.logger.debug(&quot;handle signal of &quot;+i),r.data)e._handleSignal(i,r.data);else{e.logger.info(&quot;signaling &quot;+i+&quot; not found&quot;);var a=e.DCMap.get(i);a&amp;&amp;(a.destroy(),e.DCMap.delete(i)),e.failedDCSet.add(i)}break;case&quot;reject&quot;:e.stopP2P();break;default:e.logger.warn(&quot;Signaler websocket unknown action &quot;+n)}},t.onclose=function(){e.connected=!1},t}},{key:&quot;_handleSignal&quot;,value:function(e,t){var r=this.DCMap.get(e);if(r&amp;&amp;r.connected)return void this.logger.info(&quot;datachannel had connected, signal ignored&quot;);if(!r){if(this.logger.debug(&quot;receive node &quot;+e+&quot; connection request&quot;),this.failedDCSet.has(e))return;if(this.scheduler.peersNum&gt;this.maxConns)return void this.logger.info(&quot;Peers num excess MAX_CONNS &quot;+this.maxConns);r=new p.DataChannel(this.engine,this.peerId,e,!1,this.config),this.DCMap.set(e,r),this._setupDC(r)}r.receiveSignal(t)}},{key:&quot;_requestMorePeers&quot;,value:function(){var e=this;this.scheduler.peersNum&lt;=this.minConns&amp;&amp;this.fetcher.btGetPeers().then(function(t){e.logger.info(&quot;request more peers &quot;+JSON.stringify(t)),e._handlePeers(t.peers),e._tryConnectToAllPeers()}).catch(function(t){e.logger.error(&quot;_requestMorePeers error &quot;+t)})}}]),t}(c.default);t.default=E,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t&lt;e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function o(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return 0===e?p:.33*e+1.67}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var u=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),c=r(0),d=n(c),f=r(1),h=r(12),g=n(h),p=3,v=50,m=5,y=Symbol(&quot;shareOnly&quot;),b=function(e){function t(e,r){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.engine=e,n.config=r,n.bufMgr=null,n.peerManager=new g.default,n.bitset=new Set,n.bitCounts=new Map,n.targetPeer=null,n._setupEngine(),n.currPlaySN=0,n.currLostSN=-1,n.checkTimer=null,n.loadedPeerNum=0,n.config.live?n.maxPrefetchCount=m:(n.maxPrefetchCount=v,n.startCheckPeersTimer()),n.requestingMap=new Map,n.dcDownloadTimeout=r.dcDownloadTimeout,n.mBufferedDuration=0,n[y]=!1,n}return s(t,e),u(t,[{key:&quot;startCheckPeersTimer&quot;,value:function(){var e=this,t=l(this.loadedPeerNum);this.engine.logger.info(&quot;loaded peers &quot;+this.loadedPeerNum+&quot; next checkDelay is &quot;+t),this.loadedPeerNum=0,this.checkTimer=window.setTimeout(function(){e.checkPeers(),e.startCheckPeersTimer()},1e3*t)}},{key:&quot;updateLoadedSN&quot;,value:function(e){this.bitset.add(e),this.bitCounts.has(e)&amp;&amp;this.bitCounts.delete(e);var t={event:f.Events.DC_HAVE,sn:e};this._broadcastToPeers(t)}},{key:&quot;updatePlaySN&quot;,value:function(e){this.engine.logger.info(&quot;updatePlaySN &quot;+e),this.currPlaySN=e}},{key:&quot;checkPeers&quot;,value:function(){var e=this.engine.logger;if(!(this.currLostSN&gt;=0&amp;&amp;this.currLostSN&gt;=this.currPlaySN-5)&amp;&amp;this.hasPeers){var t=this.peerManager.getAvailablePeers();if(0!==t.length){var r=[],n=this.config,a=n.prefetchNum,o=n.endSN,s=0,l=this.loadingSN+1;if(!this.config.live){var u=Math.min.apply(Math,i(t.filter(function(e){return e.endSN&gt;=l}).map(function(e){return e?e.startSN:1/0})));if(!isFinite(u))return;l&lt;u&amp;&amp;(l=u)}for(;r.length&lt;=a&amp;&amp;r.length&lt;t.length&amp;&amp;s&lt;this.maxPrefetchCount;){if(!this.config.live&amp;&amp;l&gt;o)return;if(this.bitset.has(l))l++;else{if(l!==this.loadingSN&amp;&amp;this.bitCounts.has(l)&amp;&amp;!this.requestingMap.has(l)){var c=!0,d=!1,f=void 0;try{for(var h,g=t[Symbol.iterator]();!(c=(h=g.next()).done);c=!0){var p=h.value;if(!r.includes(p)&amp;&amp;p.bitset.has(l)){p.requestDataBySN(l,!1),e.info(&quot;request prefetch &quot;+l+&quot; from peer &quot;+p.remotePeerId+&quot; downloadNum &quot;+p.downloadNum),r.push(p),this.requestingMap.set(l,p.remotePeerId);break}}}catch(e){d=!0,f=e}finally{try{!c&amp;&amp;g.return&amp;&amp;g.return()}finally{if(d)throw f}}}s++,l++}}this.loadedPeerNum=r.length}}}},{key:&quot;chokePeerRequest&quot;,value:function(e){var t={event:f.Events.DC_CHOKE};e?e.sendJson(t):this._broadcastToPeers(t)}},{key:&quot;unchokePeerRequest&quot;,value:function(e){var t={event:f.Events.DC_UNCHOKE};e?e.sendJson(t):this._broadcastToPeers(t)}},{key:&quot;stopRequestFromPeers&quot;,value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.peerManager.getPeerValues()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.choked=!0}}catch(e){t=!0,r=e}finally{try{!e&amp;&amp;i.return&amp;&amp;i.return()}finally{if(t)throw r}}}},{key:&quot;resumeRequestFromPeers&quot;,value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.peerManager.getPeerValues()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.choked=!1}}catch(e){t=!0,r=e}finally{try{!e&amp;&amp;i.return&amp;&amp;i.return()}finally{if(t)throw r}}}},{key:&quot;setShareOnly&quot;,value:function(){this[y]=!0}},{key:&quot;deletePeer&quot;,value:function(e){var t=this;this.peerManager.hasPeer(e.remotePeerId)&amp;&amp;(this.peerManager.removePeer(e.remotePeerId),e.bitset.forEach(function(e){t._decreBitCounts(e)})),this._peersStats(this.peerManager.getPeerIds())}},{key:&quot;handshakePeer&quot;,value:function(e){this._setupDC(e),e.sendBitField(Array.from(this.bitset))}},{key:&quot;addPeer&quot;,value:function(e){this.engine.logger.debug(&quot;add peer &quot;+e.remotePeerId),this.peerManager.addPeer(e.remotePeerId,e),this[y]&amp;&amp;(e.choked=!0),this._peersStats(this.peerManager.getPeerIds())}},{key:&quot;peersHasSN&quot;,value:function(e){return this.bitCounts.has(e)}},{key:&quot;hasAndSetTargetPeer&quot;,value:function(e){var t=this.engine.logger;if(this.bufferedDuration&lt;=5)return!1;if(this.requestingMap.has(e))return!0;if(!this.hasIdlePeers||!this.peersHasSN(e))return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=this.peerManager.getPeersOrderByWeight()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if(s.bitset.has(e))return t.info(&quot;found sn &quot;+e+&quot; from peer &quot;+s.remotePeerId),this.targetPeer=s,!0}}catch(e){n=!0,i=e}finally{try{!r&amp;&amp;o.return&amp;&amp;o.return()}finally{if(n)throw i}}return t.info(&quot;idle peers hasn&#39;t sn &quot;+e+&quot; or busy&quot;),!1}},{key:&quot;load&quot;,value:function(e,t,r){var n=this.engine.logger;this.context=e;var i=e.frag,a=this.config.segmentId(i.level,i.sn,i.url);this.callbacks=r,this.stats={trequest:performance.now(),retry:0,tfirst:0,tload:0,loaded:0},this.criticalSeg={sn:i.sn,segId:a};var o=this.mBufferedDuration-5;o&gt;this.dcDownloadTimeout?o=this.dcDownloadTimeout:o&lt;3&amp;&amp;(o=3),this.requestingMap.has(i.sn)?n.info(&quot;wait for criticalSeg segId &quot;+a+&quot; at &quot;+i.sn+&quot; timeout &quot;+o):(this.targetPeer.requestDataById(a,i.sn,!0),n.info(&quot;request criticalSeg segId &quot;+a+&quot; at &quot;+i.sn+&quot; timeout &quot;+o)),this.criticaltimeouter=window.setTimeout(this._criticaltimeout.bind(this),1e3*o)}},{key:&quot;destroy&quot;,value:function(){var e=this.engine.logger;this.peersNum&gt;0&amp;&amp;this.peerManager.clear(),this.removeAllListeners(),this.checkTimer&amp;&amp;(window.clearTimeout(this.checkTimer),this.checkTimer=null),e.warn(&quot;destroy scheduler&quot;)}},{key:&quot;_setupDC&quot;,value:function(e){var t=this,r=this.engine.logger;e.on(f.Events.DC_BITFIELD,function(r){r.field&amp;&amp;(e.bitset=new Set(r.field),r.field.forEach(function(e){t.bitset.has(e)||t._increBitCounts(e)}),t.addPeer(e))}).on(f.Events.DC_HAVE,function(r){if(r.sn&amp;&amp;e.bitset){var n=r.sn;if(e.bitset.add(n),t.bitset.has(n)||t._increBitCounts(n),t.config.live){var i=n-60;i&gt;0&amp;&amp;e.bitset.delete(i)}}}).on(f.Events.DC_LOST,function(r){if(r.sn&amp;&amp;e.bitset){var n=r.sn;e.bitset.delete(n),t._decreBitCounts(n)}}).on(f.Events.DC_PIECE_ACK,function(e){e.size&amp;&amp;t.engine.fetcher.reportUploaded(e.size)}).on(f.Events.DC_PIECE,function(e){t.criticalSeg&amp;&amp;t.criticalSeg.segId===e.seg_id&amp;&amp;(t.stats.tfirst=Math.max(performance.now(),t.stats.trequest))}).on(f.Events.DC_PIECE_NOT_FOUND,function(n){t.criticalSeg&amp;&amp;t.criticalSeg.segId===n.seg_id&amp;&amp;(window.clearTimeout(t.criticaltimeouter),r.info(&quot;DC_PIECE_NOT_FOUND&quot;),t.callbacks.onTimeout(t.stats,t.context,null)),e.bitset.delete(n.sn),t.requestingMap.delete(n.sn),t._decreBitCounts(n.sn)}).on(f.Events.DC_RESPONSE,function(n){var i=n.level,a=n.sn,o=n.data,s=n.seg_id,l=t.criticalSeg&amp;&amp;t.criticalSeg.segId===s;if(t.config.validateSegment(i,a,o)){if(l){r.info(&quot;receive criticalSeg seg_id &quot;+s),window.clearTimeout(t.criticaltimeouter),t.criticaltimeouter=null,e.miss=0;var u=t.stats;u.tload=Math.max(u.tfirst,performance.now()),u.loaded=u.total=o.byteLength,t.criticalSeg=null;var c=t.context.frag;c.fromPeerId=e.remotePeerId,c.loadByP2P=!0,t.callbacks.onSuccess(n,u,t.context)}else t.bufMgr.handleFrag(a,i,s,o,e.remotePeerId,!1),t.updateLoadedSN(a);t.requestingMap.delete(a)}else r.warn(&quot;segment &quot;+i+&quot;-&quot;+a+&quot; validate failed&quot;),l&amp;&amp;(window.clearTimeout(t.criticaltimeouter),t._criticaltimeout())}).on(f.Events.DC_REQUEST,function(r){var n=&quot;&quot;;if((n=r.seg_id?r.seg_id:t.bufMgr.getSegIdbySN(r.sn))&amp;&amp;t.bufMgr.hasSegOfId(n)){var i=t.bufMgr.getSegById(n);e.sendBuffer(i.sn,i.level,i.segId,i.data)}else e.sendJson({event:f.Events.DC_PIECE_NOT_FOUND,seg_id:n,sn:r.sn})}).on(f.Events.DC_TIMEOUT,function(e){})}},{key:&quot;_setupEngine&quot;,value:function(){var e=this;this.engine.on(f.Events.FRAG_LOADING,function(t){e.loadingSN=t,e.config.live&amp;&amp;e.checkPeers()}).on(f.Events.FRAG_LOADED,function(t,r){e.updateLoadedSN(t)}).on(f.Events.FRAG_CHANGED,function(t,r){e.updatePlaySN(t)})}},{key:&quot;_broadcastToPeers&quot;,value:function(e){if(this.peersNum&gt;0){var t=!0,r=!1,n=void 0;try{for(var i,a=this.peerManager.getPeerValues()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.sendJson(e)}}catch(e){r=!0,n=e}finally{try{!t&amp;&amp;a.return&amp;&amp;a.return()}finally{if(r)throw n}}}}},{key:&quot;_getIdlePeer&quot;,value:function(){return this.peerManager.getAvailablePeers()}},{key:&quot;_decreBitCounts&quot;,value:function(e){if(this.bitCounts.has(e)){var t=this.bitCounts.get(e);1===t?this.bitCounts.delete(e):this.bitCounts.set(e,t-1)}}},{key:&quot;_increBitCounts&quot;,value:function(e){if(this.bitCounts.has(e)){var t=this.bitCounts.get(e);this.bitCounts.set(e,t+1)}else this.bitCounts.set(e,1)}},{key:&quot;_criticaltimeout&quot;,value:function(){var e=this,t=this.engine.logger;if(this.criticalSeg){var r=this.criticalSeg.sn;if(t.info(&quot;critical request sn &quot;+r+&quot; timeout&quot;),this.requestingMap.has(r)&amp;&amp;(this.targetPeer=this.peerManager.getPeer(this.requestingMap.get(r))),this.config.httpRangeSupported&amp;&amp;this.targetPeer&amp;&amp;this.targetPeer.bufSN===r&amp;&amp;this.targetPeer.bufArr.length&gt;0){var n=f.Buffer.concat(this.targetPeer.bufArr);t.info(&quot;continue download from &quot;+this.context.frag.url+&quot; range: &quot;+n.byteLength+&quot;-&quot;),fetch(this.context.frag.url,{headers:{Range:&quot;bytes=&quot;+n.byteLength+&quot;-&quot;}}).then(function(e){return e.arrayBuffer()}).then(function(t){var r=f.Buffer.from(t);e.engine.fetcher.reportFlow(r.byteLength);var i=f.Buffer.concat([n,r]),a=new Uint8Array(i).buffer,o=e.stats;o.tload=Math.max(o.tfirst,performance.now()),o.loaded=o.total=i.byteLength;var s=e.context.frag;s.fromPeerId=e.targetPeer.remotePeerId,s.loadByP2P=!0,e.callbacks.onSuccess({data:a},o,e.context)}).catch(function(r){t.error(&quot;http partial download error &quot;+r),e.callbacks.onTimeout(e.stats,e.context,null)})}else this.callbacks.onTimeout(this.stats,this.context,null),this.targetPeer&amp;&amp;this.targetPeer.loadtimeout();this.criticalSeg=null,this.criticaltimeouter=null}}},{key:&quot;_peersStats&quot;,value:function(e){this.engine.emit(&quot;peers&quot;,e);var t=this.engine.config.getPeersInfo;t&amp;&amp;&quot;function&quot;==typeof t&amp;&amp;t(e)}},{key:&quot;hasPeers&quot;,get:function(){return this.peersNum&gt;0}},{key:&quot;peersNum&quot;,get:function(){return this.peerManager.size()}},{key:&quot;hasIdlePeers&quot;,get:function(){var e=this.engine.logger,t=this._getIdlePeer().length;return e.info(&quot;peers: &quot;+this.peersNum+&quot; idle peers: &quot;+t),t&gt;0}},{key:&quot;bufferedDuration&quot;,get:function(){for(var e=this.engine.media,t=0,r=e.currentTime,n=e.buffered,i=n.length-1;i&gt;=0;i--)if(r&gt;=n.start(i)&amp;&amp;r&lt;=n.end(i)){t=n.end(i)-r;break}return this.engine.logger.info(&quot;bufferedDuration &quot;+t),this.mBufferedDuration=t,t&gt;0?t:0}},{key:&quot;bufferManager&quot;,set:function(e){var t=this;this.bufMgr=e,e.on(f.Events.BM_LOST,function(e){t.currLostSN=e,t.config.live||t._broadcastToPeers({event:f.Events.DC_LOST,sn:e}),t.bitset.delete(e),t.bitCounts.delete(e)})}}]),t}(d.default);t.default=b,e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,&quot;loaded&quot;,{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,&quot;id&quot;,{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){&quot;use strict&quot;;function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t&lt;e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),o=function(){function e(){i(this,e),this.peerMap=new Map}return a(e,[{key:&quot;isEmpty&quot;,value:function(){return 0===this.peerMap.size}},{key:&quot;size&quot;,value:function(){return this.peerMap.size}},{key:&quot;clear&quot;,value:function(){this.peerMap.clear()}},{key:&quot;getPeers&quot;,value:function(){return[].concat(n(this.peerMap.values()))}},{key:&quot;getPeerValues&quot;,value:function(){return this.peerMap.values()}},{key:&quot;hasPeer&quot;,value:function(e){return this.peerMap.has(e)}},{key:&quot;addPeer&quot;,value:function(e,t){this.peerMap.set(e,t)}},{key:&quot;getPeerIds&quot;,value:function(){return[].concat(n(this.peerMap.keys()))}},{key:&quot;removePeer&quot;,value:function(e){this.peerMap.delete(e)}},{key:&quot;getPeersOrderByWeight&quot;,value:function(){var e=this.getPeers().filter(function(e){return e.isAvailableUrgently});return e.sort(function(e,t){return 0===t.weight?1:0===e.weight?-1:t.weight-e.weight}),e}},{key:&quot;getPeer&quot;,value:function(e){return this.peerMap.get(e)}},{key:&quot;getAvailablePeers&quot;,value:function(){return this.getPeers().filter(function(e){return e.isAvailable})}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function a(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function o(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var s=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),l=r(0),u=n(l),c=r(14),d=n(c),f=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.engine=e,o.logger=e.logger,o.peerId=r,o.config=n,o.wsAddr=n.wsSignalerAddr,o.connected=!1,o._ws=o._init(r),o}return o(t,e),s(t,[{key:&quot;_init&quot;,value:function(e){var t=this,r={maxRetries:this.config.wsMaxRetries,minReconnectionDelay:1e3*this.config.wsReconnectInterval},n=&quot;?id=&quot;+e,i=new d.default(this.wsAddr+n,void 0,r);return i.onopen=function(){t.logger.info(&quot;Signaler websocket connection opened&quot;),t.connected=!0,t.onopen&amp;&amp;t.onopen(),t._startPing()},i.push=i.send,i.send=function(e){var r=JSON.stringify(e);i.push(r),t._resetPing()},i.onmessage=function(e){t.onmessage&amp;&amp;t.onmessage(e)},i.onclose=function(e){t.logger.warn(&quot;Signaler websocket closed &quot;+e.code+&quot; &quot;+e.reason),t.onclose&amp;&amp;t.onclose(),t.connected=!1,t._stopPing()},i.onerror=function(e){console.warn(&quot;Signaler websocket error&quot;)},i}},{key:&quot;sendSignal&quot;,value:function(e,t){var r={action:&quot;signal&quot;,to_peer_id:e,data:t};this._send(r)}},{key:&quot;_send&quot;,value:function(e){this.connected?this._ws.send(e):this.logger.warn(&quot;signaler closed, send msg failed&quot;)}},{key:&quot;_startPing&quot;,value:function(){var e=this;this.pingTimer=window.setInterval(function(){e._ws.send(9)},12e4)}},{key:&quot;_resetPing&quot;,value:function(){this._stopPing(),this._startPing()}},{key:&quot;_stopPing&quot;,value:function(){window.clearInterval(this.pingTimer),this.pingTimer=null}},{key:&quot;close&quot;,value:function(){this.logger.warn(&quot;close signal client&quot;),this.connected=!1,this._ws.close(1e3,&quot;stop signaling&quot;,{keepClosed:!0})}},{key:&quot;destroy&quot;,value:function(){this.close(),this._ws=null,this.removeAllListeners(),this.logger.warn(&quot;destroy signaler&quot;)}}]),t}(u.default);t.default=f,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;var n=function(e){return e&amp;&amp;2===e.CLOSING},i=function(){return&quot;undefined&quot;!=typeof WebSocket&amp;&amp;n(WebSocket)},a=function(){return{constructor:i()?WebSocket:null,maxReconnectionDelay:1e4,minReconnectionDelay:1500,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1}},o=function(e,t,r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})},s=function(e){return e.minReconnectionDelay+Math.random()*e.minReconnectionDelay},l=function(e,t){var r=t*e.reconnectionDelayGrowFactor;return r&gt;e.maxReconnectionDelay?e.maxReconnectionDelay:r},u=[&quot;onopen&quot;,&quot;onclose&quot;,&quot;onmessage&quot;,&quot;onerror&quot;],c=function(e,t,r){Object.keys(r).forEach(function(t){r[t].forEach(function(r){var n=r[0],i=r[1];e.addEventListener(t,n,i)})}),t&amp;&amp;u.forEach(function(r){e[r]=t[r]})},d=function(e,t,r){var i=this;void 0===r&amp;&amp;(r={});var u,f,h=0,g=0,p=!0,v=null,m={};if(!(this instanceof d))throw new TypeError(&quot;Failed to construct &#39;ReconnectingWebSocket&#39;: Please use the &#39;new&#39; operator&quot;);var y=a();if(Object.keys(y).filter(function(e){return r.hasOwnProperty(e)}).forEach(function(e){return y[e]=r[e]}),!n(y.constructor))throw new TypeError(&quot;Invalid WebSocket constructor. Set `options.constructor`&quot;);var b=y.debug?function(){for(var e=[],t=0;t&lt;arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,[&quot;RWS:&quot;].concat(e))}:function(){},E=function(e,t){return setTimeout(function(){var r=new Error(t);r.code=e,Array.isArray(m.error)&amp;&amp;m.error.forEach(function(e){return(0,e[0])(r)}),u.onerror&amp;&amp;u.onerror(r)},0)},_=function(){if(b(&quot;handleClose&quot;,{shouldRetry:p}),g++,b(&quot;retries count:&quot;,g),g&gt;y.maxRetries)return void E(&quot;EHOSTDOWN&quot;,&quot;Too many failed connection attempts&quot;);h=h?l(y,h):s(y),b(&quot;handleClose - reconnectDelay:&quot;,h),p&amp;&amp;setTimeout(T,h)},T=function(){if(p){b(&quot;connect&quot;);var r=u,n=&quot;function&quot;==typeof e?e():e;u=new y.constructor(n,t),f=setTimeout(function(){b(&quot;timeout&quot;),u.close(),E(&quot;ETIMEDOUT&quot;,&quot;Connection timeout&quot;)},y.connectionTimeout),b(&quot;bypass properties&quot;);for(var a in u)[&quot;addEventListener&quot;,&quot;removeEventListener&quot;,&quot;close&quot;,&quot;send&quot;].indexOf(a)&lt;0&amp;&amp;o(u,i,a);u.addEventListener(&quot;open&quot;,function(){clearTimeout(f),b(&quot;open&quot;),h=s(y),b(&quot;reconnectDelay:&quot;,h),g=0}),u.addEventListener(&quot;close&quot;,_),c(u,r,m),u.onclose=u.onclose||v,v=null}};b(&quot;init&quot;),T(),this.close=function(e,t,r){void 0===e&amp;&amp;(e=1e3),void 0===t&amp;&amp;(t=&quot;&quot;);var n=void 0===r?{}:r,i=n.keepClosed,a=void 0!==i&amp;&amp;i,o=n.fastClose,s=void 0===o||o,l=n.delay,c=void 0===l?0:l;if(b(&quot;close - params:&quot;,{reason:t,keepClosed:a,fastClose:s,delay:c,retriesCount:g,maxRetries:y.maxRetries}),p=!a&amp;&amp;g&lt;=y.maxRetries,c&amp;&amp;(h=c),u.close(e,t),s){var d={code:e,reason:t,wasClean:!0};_(),u.removeEventListener(&quot;close&quot;,_),Array.isArray(m.close)&amp;&amp;m.close.forEach(function(e){var t=e[0],r=e[1];t(d),u.removeEventListener(&quot;close&quot;,t,r)}),u.onclose&amp;&amp;(v=u.onclose,u.onclose(d),u.onclose=null)}},this.send=function(e){u.send(e)},this.addEventListener=function(e,t,r){Array.isArray(m[e])?m[e].some(function(e){return e[0]===t})||m[e].push([t,r]):m[e]=[[t,r]],u.addEventListener(e,t,r)},this.removeEventListener=function(e,t,r){Array.isArray(m[e])&amp;&amp;(m[e]=m[e].filter(function(e){return e[0]!==t})),u.removeEventListener(e,t,r)}};e.exports=d},function(e,t,r){&quot;use strict&quot;;function n(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function i(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function a(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),s=r(0),l=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(s),u=r(2),c=r(16),d=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.logger=e.logger,r.bufMgr=e.bufMgr,r.xhrLoader=new e.loader(e),r.p2pEnabled=e.p2pEnabled,r.scheduler=e.scheduler,r.fetcher=e.fetcher,r.segmentId=e.segmentId,r.blockTypes=e.p2pBlackList,r.isLive=e.live,r}return a(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.abort()}},{key:&quot;abort&quot;,value:function(){this.xhrLoader.abort()}},{key:&quot;load&quot;,value:function(e,t,r){var n=this,i=this.logger,a=e.frag,o=this.segmentId(a.level,a.sn,a.url);if((0,u.isBlockType)(a.url,this.blockTypes)){i.info(&quot;HTTP load blockType &quot;+a.url),e.frag.loadByHTTP=!0;var s=r.onSuccess;return r.onSuccess=function(e,t,r){i.info(&quot;HTTP load time &quot;+(t.tload-t.trequest)+&quot;ms&quot;),s(e,t,r)},this.xhrLoader.load(e,t,r)}if(this.p2pEnabled&amp;&amp;this.bufMgr.hasSegOfId(o)){i.info(&quot;bufMgr found seg sn &quot;+a.sn+&quot; url &quot;+a.url);var l=this.bufMgr.getSegById(o),d=c.Buffer.from(l.data),f=new c.Buffer(l.data.byteLength);d.copy(f);var h=new Uint8Array(f).buffer,g={url:e.url,data:h},p=void 0,v=void 0,m=void 0,y=void 0,b=void 0;p=performance.now(),v=m=p+10,y=b=a.loaded=l.size;var E={trequest:p,tfirst:v,tload:m,loaded:y,total:b,retry:0};a.loadByP2P=!0,e.frag.fromPeerId=l.fromPeerId,i.debug(&quot;bufMgr loaded &quot;+a.relurl+&quot; at &quot;+a.sn),window.setTimeout(function(){r.onSuccess(g,E,e)},10)}else if(this.p2pEnabled&amp;&amp;this.scheduler.hasAndSetTargetPeer(a.sn)){this.scheduler.load(e,t,r);var _=r.onTimeout;r.onTimeout=function(e,o){i.info(&quot;P2P timeout switched to HTTP load &quot;+a.relurl+&quot; at &quot;+a.sn),n.xhrLoader.load(o,t,r),r.onTimeout=_};var T=r.onSuccess;r.onSuccess=function(e,t,s){r.onSuccess=function(){i.warn(&quot;p2p loaded &quot;+a.sn+&quot;, http ignore&quot;)},n.bufMgr.hasSegOfId(o)||n.bufMgr.handleFrag(a.sn,a.level,o,e.data,a.fromPeerId||n.fetcher.peerId,!0),a.loadByP2P||n.fetcher.reportFlow(t.total),a.loaded=t.loaded,i.info((a.loadByP2P?&quot;P2P&quot;:&quot;HTTP&quot;)+&quot; loaded segment id &quot;+o),T(e,t,s)}}else{i.info(&quot;HTTP load &quot;+a.relurl+&quot; at &quot;+a.sn+&quot; level &quot;+a.level),e.frag.loadByHTTP=!0,this.xhrLoader.load(e,t,r);var S=r.onSuccess;r.onSuccess=function(e,t,r){n.bufMgr.hasSegOfId(o)||n.bufMgr.handleFrag(a.sn,a.level,o,e.data,n.fetcher.peerId,!0),n.fetcher.reportFlow(t.total),i.info(&quot;HTTP loaded &quot;+o+&quot; time &quot;+(t.tload-t.trequest)+&quot;ms&quot;),S(e,t,r)}}}}]),t}(l.default);t.default=d,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.getBrowserRTC=t.Buffer=t.Fetcher=t.Events=t.DataChannel=void 0;var n=r(17),i=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(n),a=r(1),o=r(18).Buffer;t.DataChannel=a.datachannel,t.Events=a.events,t.Fetcher=a.fetcher,t.Buffer=o,t.getBrowserRTC=i.default},function(e,t){e.exports=function(){if(&quot;undefined&quot;==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,r){&quot;use strict&quot;;(function(e){function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()&lt;t)throw new RangeError(&quot;Invalid typed array length&quot;);return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&amp;&amp;(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if(&quot;number&quot;==typeof e){if(&quot;string&quot;==typeof t)throw new Error(&quot;If encoding is specified then the first argument must be a string&quot;);return u(this,e)}return o(this,e,t,r)}function o(e,t,r,n){if(&quot;number&quot;==typeof t)throw new TypeError(&#39;&quot;value&quot; argument must not be a number&#39;);return&quot;undefined&quot;!=typeof ArrayBuffer&amp;&amp;t instanceof ArrayBuffer?f(e,t,r,n):&quot;string&quot;==typeof t?c(e,t,r):h(e,t)}function s(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&#39;&quot;size&quot; argument must be a number&#39;);if(e&lt;0)throw new RangeError(&#39;&quot;size&quot; argument must not be negative&#39;)}function l(e,t,r,n){return s(t),t&lt;=0?i(e,t):void 0!==r?&quot;string&quot;==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function u(e,t){if(s(t),e=i(e,t&lt;0?0:0|g(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r&lt;t;++r)e[r]=0;return e}function c(e,t,r){if(&quot;string&quot;==typeof r&amp;&amp;&quot;&quot;!==r||(r=&quot;utf8&quot;),!a.isEncoding(r))throw new TypeError(&#39;&quot;encoding&quot; must be a valid string encoding&#39;);var n=0|v(t,r);e=i(e,n);var o=e.write(t,r);return o!==n&amp;&amp;(e=e.slice(0,o)),e}function d(e,t){var r=t.length&lt;0?0:0|g(t.length);e=i(e,r);for(var n=0;n&lt;r;n+=1)e[n]=255&amp;t[n];return e}function f(e,t,r,n){if(t.byteLength,r&lt;0||t.byteLength&lt;r)throw new RangeError(&quot;&#39;offset&#39; is out of bounds&quot;);if(t.byteLength&lt;r+(n||0))throw new RangeError(&quot;&#39;length&#39; is out of bounds&quot;);return t=void 0===r&amp;&amp;void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function h(e,t){if(a.isBuffer(t)){var r=0|g(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if(&quot;undefined&quot;!=typeof ArrayBuffer&amp;&amp;t.buffer instanceof ArrayBuffer||&quot;length&quot;in t)return&quot;number&quot;!=typeof t.length||X(t.length)?i(e,0):d(e,t);if(&quot;Buffer&quot;===t.type&amp;&amp;Q(t.data))return d(e,t.data)}throw new TypeError(&quot;First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.&quot;)}function g(e){if(e&gt;=n())throw new RangeError(&quot;Attempt to allocate Buffer larger than maximum size: 0x&quot;+n().toString(16)+&quot; bytes&quot;);return 0|e}function p(e){return+e!=e&amp;&amp;(e=0),a.alloc(+e)}function v(e,t){if(a.isBuffer(e))return e.length;if(&quot;undefined&quot;!=typeof ArrayBuffer&amp;&amp;&quot;function&quot;==typeof ArrayBuffer.isView&amp;&amp;(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;&quot;string&quot;!=typeof e&amp;&amp;(e=&quot;&quot;+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case&quot;ascii&quot;:case&quot;latin1&quot;:case&quot;binary&quot;:return r;case&quot;utf8&quot;:case&quot;utf-8&quot;:case void 0:return W(e).length;case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return 2*r;case&quot;hex&quot;:return r&gt;&gt;&gt;1;case&quot;base64&quot;:return z(e).length;default:if(n)return W(e).length;t=(&quot;&quot;+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t&lt;0)&amp;&amp;(t=0),t&gt;this.length)return&quot;&quot;;if((void 0===r||r&gt;this.length)&amp;&amp;(r=this.length),r&lt;=0)return&quot;&quot;;if(r&gt;&gt;&gt;=0,t&gt;&gt;&gt;=0,r&lt;=t)return&quot;&quot;;for(e||(e=&quot;utf8&quot;);;)switch(e){case&quot;hex&quot;:return C(this,t,r);case&quot;utf8&quot;:case&quot;utf-8&quot;:return k(this,t,r);case&quot;ascii&quot;:return P(this,t,r);case&quot;latin1&quot;:case&quot;binary&quot;:return I(this,t,r);case&quot;base64&quot;:return L(this,t,r);case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return x(this,t,r);default:if(n)throw new TypeError(&quot;Unknown encoding: &quot;+e);e=(e+&quot;&quot;).toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if(&quot;string&quot;==typeof r?(n=r,r=0):r&gt;2147483647?r=2147483647:r&lt;-2147483648&amp;&amp;(r=-2147483648),r=+r,isNaN(r)&amp;&amp;(r=i?0:e.length-1),r&lt;0&amp;&amp;(r=e.length+r),r&gt;=e.length){if(i)return-1;r=e.length-1}else if(r&lt;0){if(!i)return-1;r=0}if(&quot;string&quot;==typeof t&amp;&amp;(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if(&quot;number&quot;==typeof t)return t&amp;=255,a.TYPED_ARRAY_SUPPORT&amp;&amp;&quot;function&quot;==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,i);throw new TypeError(&quot;val must be string, number or Buffer&quot;)}function E(e,t,r,n,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==n&amp;&amp;(&quot;ucs2&quot;===(n=String(n).toLowerCase())||&quot;ucs-2&quot;===n||&quot;utf16le&quot;===n||&quot;utf-16le&quot;===n)){if(e.length&lt;2||t.length&lt;2)return-1;o=2,s/=2,l/=2,r/=2}var u;if(i){var c=-1;for(u=r;u&lt;s;u++)if(a(e,u)===a(t,-1===c?0:u-c)){if(-1===c&amp;&amp;(c=u),u-c+1===l)return c*o}else-1!==c&amp;&amp;(u-=u-c),c=-1}else for(r+l&gt;s&amp;&amp;(r=s-l),u=r;u&gt;=0;u--){for(var d=!0,f=0;f&lt;l;f++)if(a(e,u+f)!==a(t,f)){d=!1;break}if(d)return u}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))&gt;i&amp;&amp;(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError(&quot;Invalid hex string&quot;);n&gt;a/2&amp;&amp;(n=a/2);for(var o=0;o&lt;n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function T(e,t,r,n){return q(W(t,e.length-r),e,r,n)}function S(e,t,r,n){return q(H(t),e,r,n)}function w(e,t,r,n){return S(e,t,r,n)}function R(e,t,r,n){return q(z(t),e,r,n)}function A(e,t,r,n){return q(Y(t,e.length-r),e,r,n)}function L(e,t,r){return 0===t&amp;&amp;r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i&lt;r;){var a=e[i],o=null,s=a&gt;239?4:a&gt;223?3:a&gt;191?2:1;if(i+s&lt;=r){var l,u,c,d;switch(s){case 1:a&lt;128&amp;&amp;(o=a);break;case 2:l=e[i+1],128==(192&amp;l)&amp;&amp;(d=(31&amp;a)&lt;&lt;6|63&amp;l)&gt;127&amp;&amp;(o=d);break;case 3:l=e[i+1],u=e[i+2],128==(192&amp;l)&amp;&amp;128==(192&amp;u)&amp;&amp;(d=(15&amp;a)&lt;&lt;12|(63&amp;l)&lt;&lt;6|63&amp;u)&gt;2047&amp;&amp;(d&lt;55296||d&gt;57343)&amp;&amp;(o=d);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128==(192&amp;l)&amp;&amp;128==(192&amp;u)&amp;&amp;128==(192&amp;c)&amp;&amp;(d=(15&amp;a)&lt;&lt;18|(63&amp;l)&lt;&lt;12|(63&amp;u)&lt;&lt;6|63&amp;c)&gt;65535&amp;&amp;d&lt;1114112&amp;&amp;(o=d)}}null===o?(o=65533,s=1):o&gt;65535&amp;&amp;(o-=65536,n.push(o&gt;&gt;&gt;10&amp;1023|55296),o=56320|1023&amp;o),n.push(o),i+=s}return D(n)}function D(e){var t=e.length;if(t&lt;=$)return String.fromCharCode.apply(String,e);for(var r=&quot;&quot;,n=0;n&lt;t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function P(e,t,r){var n=&quot;&quot;;r=Math.min(e.length,r);for(var i=t;i&lt;r;++i)n+=String.fromCharCode(127&amp;e[i]);return n}function I(e,t,r){var n=&quot;&quot;;r=Math.min(e.length,r);for(var i=t;i&lt;r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t&lt;0)&amp;&amp;(t=0),(!r||r&lt;0||r&gt;n)&amp;&amp;(r=n);for(var i=&quot;&quot;,a=t;a&lt;r;++a)i+=K(e[a]);return i}function x(e,t,r){for(var n=e.slice(t,r),i=&quot;&quot;,a=0;a&lt;n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function O(e,t,r){if(e%1!=0||e&lt;0)throw new RangeError(&quot;offset is not uint&quot;);if(e+t&gt;r)throw new RangeError(&quot;Trying to access beyond buffer length&quot;)}function N(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError(&#39;&quot;buffer&quot; argument must be a Buffer instance&#39;);if(t&gt;i||t&lt;o)throw new RangeError(&#39;&quot;value&quot; argument is out of bounds&#39;);if(r+n&gt;e.length)throw new RangeError(&quot;Index out of range&quot;)}function M(e,t,r,n){t&lt;0&amp;&amp;(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i&lt;a;++i)e[r+i]=(t&amp;255&lt;&lt;8*(n?i:1-i))&gt;&gt;&gt;8*(n?i:1-i)}function F(e,t,r,n){t&lt;0&amp;&amp;(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i&lt;a;++i)e[r+i]=t&gt;&gt;&gt;8*(n?i:3-i)&amp;255}function U(e,t,r,n,i,a){if(r+n&gt;e.length)throw new RangeError(&quot;Index out of range&quot;);if(r&lt;0)throw new RangeError(&quot;Index out of range&quot;)}function B(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function G(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function j(e){if(e=V(e).replace(ee,&quot;&quot;),e.length&lt;2)return&quot;&quot;;for(;e.length%4!=0;)e+=&quot;=&quot;;return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,&quot;&quot;)}function K(e){return e&lt;16?&quot;0&quot;+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o&lt;n;++o){if((r=e.charCodeAt(o))&gt;55295&amp;&amp;r&lt;57344){if(!i){if(r&gt;56319){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);continue}if(o+1===n){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);continue}i=r;continue}if(r&lt;56320){(t-=3)&gt;-1&amp;&amp;a.push(239,191,189),i=r;continue}r=65536+(i-55296&lt;&lt;10|r-56320)}else i&amp;&amp;(t-=3)&gt;-1&amp;&amp;a.push(239,191,189);if(i=null,r&lt;128){if((t-=1)&lt;0)break;a.push(r)}else if(r&lt;2048){if((t-=2)&lt;0)break;a.push(r&gt;&gt;6|192,63&amp;r|128)}else if(r&lt;65536){if((t-=3)&lt;0)break;a.push(r&gt;&gt;12|224,r&gt;&gt;6&amp;63|128,63&amp;r|128)}else{if(!(r&lt;1114112))throw new Error(&quot;Invalid code point&quot;);if((t-=4)&lt;0)break;a.push(r&gt;&gt;18|240,r&gt;&gt;12&amp;63|128,r&gt;&gt;6&amp;63|128,63&amp;r|128)}}return a}function H(e){for(var t=[],r=0;r&lt;e.length;++r)t.push(255&amp;e.charCodeAt(r));return t}function Y(e,t){for(var r,n,i,a=[],o=0;o&lt;e.length&amp;&amp;!((t-=2)&lt;0);++o)r=e.charCodeAt(o),n=r&gt;&gt;8,i=r%256,a.push(i),a.push(n);return a}function z(e){return Z.toByteArray(j(e))}function q(e,t,r,n){for(var i=0;i&lt;n&amp;&amp;!(i+r&gt;=t.length||i&gt;=e.length);++i)t[i+r]=e[i];return i}function X(e){return e!==e}var Z=r(20),J=r(21),Q=r(22);t.Buffer=a,t.SlowBuffer=p,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&amp;&amp;&quot;function&quot;==typeof e.subarray&amp;&amp;0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return o(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&amp;&amp;(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.species&amp;&amp;a[Symbol.species]===a&amp;&amp;Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return l(null,e,t,r)},a.allocUnsafe=function(e){return u(null,e)},a.allocUnsafeSlow=function(e){return u(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError(&quot;Arguments must be Buffers&quot;);if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i&lt;o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r&lt;n?-1:n&lt;r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case&quot;hex&quot;:case&quot;utf8&quot;:case&quot;utf-8&quot;:case&quot;ascii&quot;:case&quot;latin1&quot;:case&quot;binary&quot;:case&quot;base64&quot;:case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return!0;default:return!1}},a.concat=function(e,t){if(!Q(e))throw new TypeError(&#39;&quot;list&quot; argument must be an Array of Buffers&#39;);if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r&lt;e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r&lt;e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError(&#39;&quot;list&quot; argument must be an Array of Buffers&#39;);o.copy(n,i),i+=o.length}return n},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(&quot;Buffer size must be a multiple of 16-bits&quot;);for(var t=0;t&lt;e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(&quot;Buffer size must be a multiple of 32-bits&quot;);for(var t=0;t&lt;e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(&quot;Buffer size must be a multiple of 64-bits&quot;);for(var t=0;t&lt;e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?&quot;&quot;:0===arguments.length?k(this,0,e):m.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError(&quot;Argument must be a Buffer&quot;);return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e=&quot;&quot;,r=t.INSPECT_MAX_BYTES;return this.length&gt;0&amp;&amp;(e=this.toString(&quot;hex&quot;,0,r).match(/.{2}/g).join(&quot; &quot;),this.length&gt;r&amp;&amp;(e+=&quot; ... &quot;)),&quot;&lt;Buffer &quot;+e+&quot;&gt;&quot;},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError(&quot;Argument must be a Buffer&quot;);if(void 0===t&amp;&amp;(t=0),void 0===r&amp;&amp;(r=e?e.length:0),void 0===n&amp;&amp;(n=0),void 0===i&amp;&amp;(i=this.length),t&lt;0||r&gt;e.length||n&lt;0||i&gt;this.length)throw new RangeError(&quot;out of range index&quot;);if(n&gt;=i&amp;&amp;t&gt;=r)return 0;if(n&gt;=i)return-1;if(t&gt;=r)return 1;if(t&gt;&gt;&gt;=0,r&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,i&gt;&gt;&gt;=0,this===e)return 0;for(var o=i-n,s=r-t,l=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r),d=0;d&lt;l;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o&lt;s?-1:s&lt;o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n=&quot;utf8&quot;,r=this.length,t=0;else if(void 0===r&amp;&amp;&quot;string&quot;==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error(&quot;Buffer.write(string, encoding, offset[, length]) is no longer supported&quot;);t|=0,isFinite(r)?(r|=0,void 0===n&amp;&amp;(n=&quot;utf8&quot;)):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r&gt;i)&amp;&amp;(r=i),e.length&gt;0&amp;&amp;(r&lt;0||t&lt;0)||t&gt;this.length)throw new RangeError(&quot;Attempt to write outside buffer bounds&quot;);n||(n=&quot;utf8&quot;);for(var a=!1;;)switch(n){case&quot;hex&quot;:return _(this,e,t,r);case&quot;utf8&quot;:case&quot;utf-8&quot;:return T(this,e,t,r);case&quot;ascii&quot;:return S(this,e,t,r);case&quot;latin1&quot;:case&quot;binary&quot;:return w(this,e,t,r);case&quot;base64&quot;:return R(this,e,t,r);case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return A(this,e,t,r);default:if(a)throw new TypeError(&quot;Unknown encoding: &quot;+n);n=(&quot;&quot;+n).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:&quot;Buffer&quot;,data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e&lt;0?(e+=r)&lt;0&amp;&amp;(e=0):e&gt;r&amp;&amp;(e=r),t&lt;0?(t+=r)&lt;0&amp;&amp;(t=0):t&gt;r&amp;&amp;(t=r),t&lt;e&amp;&amp;(t=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=a.prototype;else{var i=t-e;n=new a(i,void 0);for(var o=0;o&lt;i;++o)n[o]=this[o+e]}return n},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,a=0;++a&lt;t&amp;&amp;(i*=256);)n+=this[e+a]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],i=1;t&gt;0&amp;&amp;(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]&lt;&lt;8},a.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]&lt;&lt;8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,a=0;++a&lt;t&amp;&amp;(i*=256);)n+=this[e+a]*i;return i*=128,n&gt;=i&amp;&amp;(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n&gt;0&amp;&amp;(i*=256);)a+=this[e+--n]*i;return i*=128,a&gt;=i&amp;&amp;(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&amp;this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]&lt;&lt;8;return 32768&amp;r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]&lt;&lt;8;return 32768&amp;r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16|this[e+3]&lt;&lt;24},a.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]&lt;&lt;24|this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){N(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,a=0;for(this[t]=255&amp;e;++a&lt;r&amp;&amp;(i*=256);)this[t+a]=e/i&amp;255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){N(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,a=1;for(this[t+i]=255&amp;e;--i&gt;=0&amp;&amp;(a*=256);)this[t+i]=e/a&amp;255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&amp;e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&amp;e,this[t+1]=e&gt;&gt;&gt;8):M(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;8,this[t+1]=255&amp;e):M(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e&gt;&gt;&gt;24,this[t+2]=e&gt;&gt;&gt;16,this[t+1]=e&gt;&gt;&gt;8,this[t]=255&amp;e):F(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=255&amp;e):F(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&amp;e;++a&lt;r&amp;&amp;(o*=256);)e&lt;0&amp;&amp;0===s&amp;&amp;0!==this[t+a-1]&amp;&amp;(s=1),this[t+a]=(e/o&gt;&gt;0)-s&amp;255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&amp;e;--a&gt;=0&amp;&amp;(o*=256);)e&lt;0&amp;&amp;0===s&amp;&amp;0!==this[t+a+1]&amp;&amp;(s=1),this[t+a]=(e/o&gt;&gt;0)-s&amp;255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e&lt;0&amp;&amp;(e=255+e+1),this[t]=255&amp;e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&amp;e,this[t+1]=e&gt;&gt;&gt;8):M(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;8,this[t+1]=255&amp;e):M(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&amp;e,this[t+1]=e&gt;&gt;&gt;8,this[t+2]=e&gt;&gt;&gt;16,this[t+3]=e&gt;&gt;&gt;24):F(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),e&lt;0&amp;&amp;(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=255&amp;e):F(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return G(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return G(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t&gt;=e.length&amp;&amp;(t=e.length),t||(t=0),n&gt;0&amp;&amp;n&lt;r&amp;&amp;(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t&lt;0)throw new RangeError(&quot;targetStart out of bounds&quot;);if(r&lt;0||r&gt;=this.length)throw new RangeError(&quot;sourceStart out of bounds&quot;);if(n&lt;0)throw new RangeError(&quot;sourceEnd out of bounds&quot;);n&gt;this.length&amp;&amp;(n=this.length),e.length-t&lt;n-r&amp;&amp;(n=e.length-t+r);var i,o=n-r;if(this===e&amp;&amp;r&lt;t&amp;&amp;t&lt;n)for(i=o-1;i&gt;=0;--i)e[i+t]=this[i+r];else if(o&lt;1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i&lt;o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if(&quot;string&quot;==typeof e){if(&quot;string&quot;==typeof t?(n=t,t=0,r=this.length):&quot;string&quot;==typeof r&amp;&amp;(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i&lt;256&amp;&amp;(e=i)}if(void 0!==n&amp;&amp;&quot;string&quot;!=typeof n)throw new TypeError(&quot;encoding must be a string&quot;);if(&quot;string&quot;==typeof n&amp;&amp;!a.isEncoding(n))throw new TypeError(&quot;Unknown encoding: &quot;+n)}else&quot;number&quot;==typeof e&amp;&amp;(e&amp;=255);if(t&lt;0||this.length&lt;t||this.length&lt;r)throw new RangeError(&quot;Out of range index&quot;);if(r&lt;=t)return this;t&gt;&gt;&gt;=0,r=void 0===r?this.length:r&gt;&gt;&gt;0,e||(e=0);var o;if(&quot;number&quot;==typeof e)for(o=t;o&lt;r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:W(new a(e,n).toString()),l=s.length;for(o=0;o&lt;r-t;++o)this[o+t]=s[o%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(19))},function(e,t){var r;r=function(){return this}();try{r=r||Function(&quot;return this&quot;)()||(0,eval)(&quot;this&quot;)}catch(e){&quot;object&quot;==typeof window&amp;&amp;(r=window)}e.exports=r},function(e,t,r){&quot;use strict&quot;;function n(e){var t=e.length;if(t%4&gt;0)throw new Error(&quot;Invalid string. Length must be a multiple of 4&quot;);return&quot;=&quot;===e[t-2]?2:&quot;=&quot;===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function a(e){var t,r,i,a,o,s=e.length;a=n(e),o=new d(3*s/4-a),r=a&gt;0?s-4:s;var l=0;for(t=0;t&lt;r;t+=4)i=c[e.charCodeAt(t)]&lt;&lt;18|c[e.charCodeAt(t+1)]&lt;&lt;12|c[e.charCodeAt(t+2)]&lt;&lt;6|c[e.charCodeAt(t+3)],o[l++]=i&gt;&gt;16&amp;255,o[l++]=i&gt;&gt;8&amp;255,o[l++]=255&amp;i;return 2===a?(i=c[e.charCodeAt(t)]&lt;&lt;2|c[e.charCodeAt(t+1)]&gt;&gt;4,o[l++]=255&amp;i):1===a&amp;&amp;(i=c[e.charCodeAt(t)]&lt;&lt;10|c[e.charCodeAt(t+1)]&lt;&lt;4|c[e.charCodeAt(t+2)]&gt;&gt;2,o[l++]=i&gt;&gt;8&amp;255,o[l++]=255&amp;i),o}function o(e){return u[e&gt;&gt;18&amp;63]+u[e&gt;&gt;12&amp;63]+u[e&gt;&gt;6&amp;63]+u[63&amp;e]}function s(e,t,r){for(var n,i=[],a=t;a&lt;r;a+=3)n=(e[a]&lt;&lt;16&amp;16711680)+(e[a+1]&lt;&lt;8&amp;65280)+(255&amp;e[a+2]),i.push(o(n));return i.join(&quot;&quot;)}function l(e){for(var t,r=e.length,n=r%3,i=&quot;&quot;,a=[],o=0,l=r-n;o&lt;l;o+=16383)a.push(s(e,o,o+16383&gt;l?l:o+16383));return 1===n?(t=e[r-1],i+=u[t&gt;&gt;2],i+=u[t&lt;&lt;4&amp;63],i+=&quot;==&quot;):2===n&amp;&amp;(t=(e[r-2]&lt;&lt;8)+e[r-1],i+=u[t&gt;&gt;10],i+=u[t&gt;&gt;4&amp;63],i+=u[t&lt;&lt;2&amp;63],i+=&quot;=&quot;),a.push(i),a.join(&quot;&quot;)}t.byteLength=i,t.toByteArray=a,t.fromByteArray=l;for(var u=[],c=[],d=&quot;undefined&quot;!=typeof Uint8Array?Uint8Array:Array,f=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;,h=0,g=f.length;h&lt;g;++h)u[h]=f[h],c[f.charCodeAt(h)]=h;c[&quot;-&quot;.charCodeAt(0)]=62,c[&quot;_&quot;.charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1&lt;&lt;s)-1,u=l&gt;&gt;1,c=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,a=h&amp;(1&lt;&lt;-c)-1,h&gt;&gt;=-c,c+=s;c&gt;0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&amp;(1&lt;&lt;-c)-1,a&gt;&gt;=-c,c+=n;c&gt;0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=u}return(h?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1&lt;&lt;u)-1,d=c&gt;&gt;1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,g=n?1:-1,p=t&lt;0||0===t&amp;&amp;1/t&lt;0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))&lt;1&amp;&amp;(o--,l*=2),t+=o+d&gt;=1?f/l:f*Math.pow(2,1-d),t*l&gt;=2&amp;&amp;(o++,l/=2),o+d&gt;=c?(s=0,o=c):o+d&gt;=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i&gt;=8;e[r+h]=255&amp;s,h+=g,s/=256,i-=8);for(o=o&lt;&lt;i|s,u+=i;u&gt;0;e[r+h]=255&amp;o,h+=g,o/=256,u-=8);e[r+h-g]|=128*p}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return&quot;[object Array]&quot;==r.call(e)}},function(e,t,r){&quot;use strict&quot;;function n(e){return e&amp;&amp;e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t&lt;e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function o(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var l=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),u=r(0),c=n(u),d=r(1),f=r(4),h=n(f),g=104857600,p=function(e){function t(e,r){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.engine=e,n.config=r;var i=e.browserInfo.device;return n.maxBufSize=i===h.default.device.PC_WEB||i===h.default.device.PC_NATIVE?r.memoryCacheLimit.pc:r.memoryCacheLimit.mobile,r.live&amp;&amp;(n.maxBufSize=g),n._segPool=new Map,n._currBufSize=0,n.sn2Id=new Map,n.overflowed=!1,n}return s(t,e),l(t,[{key:&quot;hasSegOfId&quot;,value:function(e){return this._segPool.has(e)}},{key:&quot;hasSegOfSN&quot;,value:function(e){return this.sn2Id.has(e)}},{key:&quot;handleFrag&quot;,value:function(e,t,r,n){var i=arguments.length&gt;4&amp;&amp;void 0!==arguments[4]?arguments[4]:&quot;&quot;,a=arguments.length&gt;5&amp;&amp;void 0!==arguments[5]&amp;&amp;arguments[5],o=void 0,s=n.byteLength;if(a){var l=d.Buffer.from(n);o=new d.Buffer(s),l.copy(o)}else o=n;var u={sn:e,level:t,segId:r,data:o,size:s,fromPeerId:i};this._addSeg(u),this.sn2Id.set(e,u.segId)}},{key:&quot;_addSeg&quot;,value:function(e){var t=this.engine.logger;for(this._segPool.set(e.segId,e),t.info(&quot;segment pool add seg &quot;+e.segId+&quot; level &quot;+e.level),this._currBufSize+=parseInt(e.size),t.debug(&quot;seg.size &quot;+e.size+&quot; _currBufSize &quot;+this._currBufSize+&quot; cacheLimit &quot;+this.maxBufSize);this._currBufSize&gt;this.maxBufSize;){var r=[].concat(i(this._segPool.values())).shift();t.info(&quot;pop seg &quot;+r.segId+&quot; at &quot;+r.sn),this._segPool.delete(r.segId),this.sn2Id.delete(r.sn),this._currBufSize-=parseInt(r.size),this.overflowed||(this.overflowed=!0),this.emit(d.Events.BM_LOST,r.sn)}}},{key:&quot;getSegById&quot;,value:function(e){return this._segPool.get(e)}},{key:&quot;getSegIdbySN&quot;,value:function(e){return this.sn2Id.get(e)}},{key:&quot;clear&quot;,value:function(){this._segPool.clear(),this.sn2Id.clear(),this._currBufSize=0}},{key:&quot;destroy&quot;,value:function(){this.clear(),this.removeAllListeners()}},{key:&quot;currBufSize&quot;,get:function(){return this._currBufSize}}]),t}(c.default);t.default=p,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;function n(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function i(){}Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&amp;&amp;e(t.prototype,r),n&amp;&amp;e(t,n),t}}(),o=r(2),s={debug:0,info:1,warn:2,error:3,none:4},l=[&quot;_debugP&quot;,&quot;_infoP&quot;,&quot;_warnP&quot;,&quot;_errorP&quot;],u=function(){function e(t){n(this,e),this.config=t,&quot;debug&quot;!==t.logLevel&amp;&amp;&quot;info&quot;!==t.logLevel||(t.logLevel=&quot;warn&quot;),&quot;1&quot;===(0,o.getQueryParam)(&quot;_debug&quot;)?t.logLevel=&quot;debug&quot;:!0===t.logLevel?t.logLevel=&quot;warn&quot;:t.logLevel in s&amp;&amp;!1!==t.logLevel||(t.logLevel=&quot;none&quot;);for(var r=0;r&lt;s[t.logLevel];r++)this[l[r]]=i}return a(e,[{key:&quot;debug&quot;,value:function(e){this._debugP(e)}},{key:&quot;info&quot;,value:function(e){this._infoP(e)}},{key:&quot;warn&quot;,value:function(e){this._warnP(e)}},{key:&quot;error&quot;,value:function(e){this._errorP(e)}},{key:&quot;_debugP&quot;,value:function(e){console.log(e)}},{key:&quot;_infoP&quot;,value:function(e){console.info(e)}},{key:&quot;_warnP&quot;,value:function(e){console.warn(e)}},{key:&quot;_errorP&quot;,value:function(e){console.error(e)}}]),e}();t.default=u,e.exports=t.default},function(e,t,r){&quot;use strict&quot;;Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.default=function(){var e=&quot;unknown&quot;;for(var t in n)if(window[t]){e=n[t];break}return e};var n={DPlayer:&quot;dplayer&quot;,CBPlayer:&quot;cbplayer&quot;,jwplayer:&quot;jwplayer&quot;,videojs:&quot;videojs&quot;,Clappr:&quot;clappr&quot;,ckplayer:&quot;ckplayer&quot;,MediaElementPlayer:&quot;mediaelement&quot;,MediaElement:&quot;mediaelement&quot;,TcPlayer:&quot;tcplayer&quot;,flowplayer:&quot;flowplayer&quot;,Chimee:&quot;chimee&quot;,ChimeePlayer:&quot;chimee&quot;,HlsJsPlayer:&quot;xgplayer&quot;,fluidPlayer:&quot;fluidplayer&quot;,OpenPlayer:&quot;openplayer&quot;,Plyr:&quot;plyr&quot;,Playerjs:&quot;playerjs&quot;};e.exports=t.default},function(e,t,r){&quot;undefined&quot;!=typeof window&amp;&amp;function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},t.t=function(e,r){if(1&amp;r&amp;&amp;(e=t(e)),8&amp;r)return e;if(4&amp;r&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;e&amp;&amp;e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,&quot;default&quot;,{enumerable:!0,value:e}),2&amp;r&amp;&amp;&quot;string&quot;!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return t.d(r,&quot;a&quot;,r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=&quot;/dist/&quot;,t(t.s=&quot;./src/hls.ts&quot;)}({&quot;./node_modules/eventemitter3/index.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,a){if(&quot;function&quot;!=typeof r)throw new TypeError(&quot;The listener must be a function&quot;);var o=new i(r,n||e,a),s=u?u+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,u=&quot;~&quot;;Object.create&amp;&amp;(n.prototype=Object.create(null),(new n).__proto__||(u=!1)),s.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)l.call(e,t)&amp;&amp;r.push(u?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=u?u+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,a=new Array(i);n&lt;i;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(e){var t=u?u+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,n,i,a){var o=u?u+e:e;if(!this._events[o])return!1;var s,l,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&amp;&amp;this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,a),!0}for(l=1,s=new Array(d-1);l&lt;d;l++)s[l-1]=arguments[l];c.fn.apply(c.context,s)}else{var f,h=c.length;for(l=0;l&lt;h;l++)switch(c[l].once&amp;&amp;this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!s)for(f=1,s=new Array(d-1);f&lt;d;f++)s[f-1]=arguments[f];c[l].fn.apply(c[l].context,s)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,r,n){var i=u?u+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||n&amp;&amp;!a.once||r&amp;&amp;a.context!==r||o(this,i);else{for(var s=0,l=[],c=a.length;s&lt;c;s++)(a[s].fn!==t||n&amp;&amp;!a[s].once||r&amp;&amp;a[s].context!==r)&amp;&amp;l.push(a[s]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=u?u+e:e,this._events[t]&amp;&amp;o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=u,s.EventEmitter=s,e.exports=s},&quot;./node_modules/url-toolkit/src/url-toolkit.js&quot;:function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error(&quot;Error trying to parse base URL.&quot;);return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error(&quot;Error trying to parse relative URL.&quot;);if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error(&quot;Error trying to parse base URL.&quot;);if(!s.netLoc&amp;&amp;s.path&amp;&amp;&quot;/&quot;!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&amp;&amp;!s.path&amp;&amp;(s.path=&quot;/&quot;);var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&amp;&amp;(u.netLoc=s.netLoc,&quot;/&quot;!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf(&quot;/&quot;)+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&amp;&amp;(u.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||&quot;&quot;,netLoc:t[2]||&quot;&quot;,path:t[3]||&quot;&quot;,params:t[4]||&quot;&quot;,query:t[5]||&quot;&quot;,fragment:t[6]||&quot;&quot;}:null},normalizePath:function(e){for(e=e.split(&quot;&quot;).reverse().join(&quot;&quot;).replace(i,&quot;&quot;);e.length!==(e=e.replace(a,&quot;&quot;)).length;);return e.split(&quot;&quot;).reverse().join(&quot;&quot;)},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},&quot;./node_modules/webworkify-webpack/index.js&quot;:function(e,t,r){function n(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},t.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return t.d(r,&quot;a&quot;,r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=&quot;/&quot;,t.oe=function(e){throw console.error(e),e};var n=t(t.s=ENTRY_MODULE);return n.default||n}function i(e){return(e+&quot;&quot;).replace(/[.?*+^$[\]\\(){}|-]/g,&quot;\\$&amp;&quot;)}function a(e){return!isNaN(1*e)}function o(e,t,n){var o={};o[n]=[];var s=t.toString(),l=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var d,f=l[1],h=new RegExp(&quot;(\\\\n|\\W)&quot;+i(f)+c,&quot;g&quot;);d=h.exec(s);)&quot;dll-reference&quot;!==d[3]&amp;&amp;o[n].push(d[3]);for(h=new RegExp(&quot;\\(&quot;+i(f)+&#39;\\(&quot;(dll-reference\\s(&#39;+u+&#39;))&quot;\\)\\)&#39;+c,&quot;g&quot;);d=h.exec(s);)e[d[2]]||(o[n].push(d[1]),e[d[2]]=r(d[1]).m),o[d[2]]=o[d[2]]||[],o[d[2]].push(d[4]);for(var g=Object.keys(o),p=0;p&lt;g.length;p++)for(var v=0;v&lt;o[g[p]].length;v++)a(o[g[p]][v])&amp;&amp;(o[g[p]][v]=1*o[g[p]][v]);return o}function s(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length&gt;0},!1)}function l(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};s(r);)for(var a=Object.keys(r),l=0;l&lt;a.length;l++){var u=a[l],c=r[u],d=c.pop();if(i[u]=i[u]||{},!i[u][d]&amp;&amp;e[u][d]){i[u][d]=!0,n[u]=n[u]||[],n[u].push(d);for(var f=o(e,e[u][d],u),h=Object.keys(f),g=0;g&lt;h.length;g++)r[h[g]]=r[h[g]]||[],r[h[g]]=r[h[g]].concat(f[h[g]])}}return n}var u=&quot;[\\.|\\-|\\+|\\w|/|@]+&quot;,c=&quot;\\(\\s*(/\\*.*?\\*/)?\\s*.*?(&quot;+u+&quot;).*?\\)&quot;;e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:l(i,e),o=&quot;&quot;;Object.keys(a).filter(function(e){return&quot;main&quot;!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]=&quot;(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })&quot;,o=o+&quot;var &quot;+e+&quot; = (&quot;+n.toString().replace(&quot;ENTRY_MODULE&quot;,JSON.stringify(t))+&quot;)({&quot;+a[e].map(function(t){return JSON.stringify(t)+&quot;: &quot;+i[e][t].toString()}).join(&quot;,&quot;)+&quot;});\n&quot;}),o=o+&quot;new ((&quot;+n.toString().replace(&quot;ENTRY_MODULE&quot;,JSON.stringify(e))+&quot;)({&quot;+a.main.map(function(e){return JSON.stringify(e)+&quot;: &quot;+i.main[e].toString()}).join(&quot;,&quot;)+&quot;}))(self);&quot;;var s=new window.Blob([o],{type:&quot;text/javascript&quot;});if(t.bare)return s;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=u.createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},&quot;./src/crypt/decrypter.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(e){var t=e.byteLength,r=t&amp;&amp;new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}r.r(t);var i=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:&quot;AES-CBC&quot;,iv:this.aesIV},t,e)},e}(),a=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey(&quot;raw&quot;,this.key,{name:&quot;AES-CBC&quot;},!1,[&quot;encrypt&quot;,&quot;decrypt&quot;])},e}(),o=a,s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n&lt;4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,g=0,p=0;for(p=0;p&lt;256;p++)f[p]=p&lt;128?p&lt;&lt;1:p&lt;&lt;1^283;for(p=0;p&lt;256;p++){var v=g^g&lt;&lt;1^g&lt;&lt;2^g&lt;&lt;3^g&lt;&lt;4;v=v&gt;&gt;&gt;8^255&amp;v^99,e[h]=v,t[v]=h;var m=f[h],y=f[m],b=f[y],E=257*f[v]^16843008*v;n[h]=E&lt;&lt;24|E&gt;&gt;&gt;8,i[h]=E&lt;&lt;16|E&gt;&gt;&gt;16,a[h]=E&lt;&lt;8|E&gt;&gt;&gt;24,o[h]=E,E=16843009*b^65537*y^257*m^16843008*h,l[v]=E&lt;&lt;24|E&gt;&gt;&gt;8,u[v]=E&lt;&lt;16|E&gt;&gt;&gt;16,c[v]=E&lt;&lt;8|E&gt;&gt;&gt;24,d[v]=E,h?(h=m^f[f[f[b^m]]],g^=f[f[g]]):h=g=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n&lt;t.length&amp;&amp;r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&amp;&amp;6!==i&amp;&amp;8!==i)throw new Error(&quot;Invalid aes key size=&quot;+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,h=this.rcon,g=this.invSubMix,p=g[0],v=g[1],m=g[2],y=g[3];for(a=0;a&lt;u;a++)a&lt;i?s=c[a]=t[a]:(l=s,a%i==0?(l=l&lt;&lt;8|l&gt;&gt;&gt;24,l=f[l&gt;&gt;&gt;24]&lt;&lt;24|f[l&gt;&gt;&gt;16&amp;255]&lt;&lt;16|f[l&gt;&gt;&gt;8&amp;255]&lt;&lt;8|f[255&amp;l],l^=h[a/i|0]&lt;&lt;24):i&gt;6&amp;&amp;a%i==4&amp;&amp;(l=f[l&gt;&gt;&gt;24]&lt;&lt;24|f[l&gt;&gt;&gt;16&amp;255]&lt;&lt;16|f[l&gt;&gt;&gt;8&amp;255]&lt;&lt;8|f[255&amp;l]),c[a]=s=(c[a-i]^l)&gt;&gt;&gt;0);for(o=0;o&lt;u;o++)a=u-o,l=3&amp;o?c[a]:c[a-4],d[o]=o&lt;4||a&lt;=4?l:p[f[l&gt;&gt;&gt;24]]^v[f[l&gt;&gt;&gt;16&amp;255]]^m[f[l&gt;&gt;&gt;8&amp;255]]^y[f[255&amp;l]],d[o]=d[o]&gt;&gt;&gt;0}},t.networkToHostOrderSwap=function(e){return e&lt;&lt;24|(65280&amp;e)&lt;&lt;8|(16711680&amp;e)&gt;&gt;8|e&gt;&gt;&gt;24},t.decrypt=function(e,t,r,i){for(var a,o,s,l,u,c,d,f,h,g,p,v,m,y,b=this.keySize+6,E=this.invKeySchedule,_=this.invSBox,T=this.invSubMix,S=T[0],w=T[1],R=T[2],A=T[3],L=this.uint8ArrayToUint32Array_(r),k=L[0],D=L[1],P=L[2],I=L[3],C=new Int32Array(e),x=new Int32Array(C.length),O=this.networkToHostOrderSwap;t&lt;C.length;){for(h=O(C[t]),g=O(C[t+1]),p=O(C[t+2]),v=O(C[t+3]),u=h^E[0],c=v^E[1],d=p^E[2],f=g^E[3],m=4,y=1;y&lt;b;y++)a=S[u&gt;&gt;&gt;24]^w[c&gt;&gt;16&amp;255]^R[d&gt;&gt;8&amp;255]^A[255&amp;f]^E[m],o=S[c&gt;&gt;&gt;24]^w[d&gt;&gt;16&amp;255]^R[f&gt;&gt;8&amp;255]^A[255&amp;u]^E[m+1],s=S[d&gt;&gt;&gt;24]^w[f&gt;&gt;16&amp;255]^R[u&gt;&gt;8&amp;255]^A[255&amp;c]^E[m+2],l=S[f&gt;&gt;&gt;24]^w[u&gt;&gt;16&amp;255]^R[c&gt;&gt;8&amp;255]^A[255&amp;d]^E[m+3],u=a,c=o,d=s,f=l,m+=4;a=_[u&gt;&gt;&gt;24]&lt;&lt;24^_[c&gt;&gt;16&amp;255]&lt;&lt;16^_[d&gt;&gt;8&amp;255]&lt;&lt;8^_[255&amp;f]^E[m],o=_[c&gt;&gt;&gt;24]&lt;&lt;24^_[d&gt;&gt;16&amp;255]&lt;&lt;16^_[f&gt;&gt;8&amp;255]&lt;&lt;8^_[255&amp;u]^E[m+1],s=_[d&gt;&gt;&gt;24]&lt;&lt;24^_[f&gt;&gt;16&amp;255]&lt;&lt;16^_[u&gt;&gt;8&amp;255]&lt;&lt;8^_[255&amp;c]^E[m+2],l=_[f&gt;&gt;&gt;24]&lt;&lt;24^_[u&gt;&gt;16&amp;255]&lt;&lt;16^_[c&gt;&gt;8&amp;255]&lt;&lt;8^_[255&amp;d]^E[m+3],m+=3,x[t]=O(a^k),x[t+1]=O(l^D),x[t+2]=O(s^P),x[t+3]=O(o^I),k=h,D=g,P=p,I=v,t+=4}return i?n(x.buffer):x.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),l=s,u=r(&quot;./src/errors.ts&quot;),c=r(&quot;./src/utils/logger.js&quot;),d=r(&quot;./src/events.js&quot;),f=r(&quot;./src/utils/get-self-scope.js&quot;),h=Object(f.getSelfScope)(),g=function(){function e(e,t,r){var n=void 0===r?{}:r,i=n.removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var o=h.crypto;o&amp;&amp;(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&amp;&amp;this.config.enableSoftwareAES},t.decrypt=function(e,t,r,n){var a=this;if(this.disableWebCrypto&amp;&amp;this.config.enableSoftwareAES){this.logEnabled&amp;&amp;(c.logger.log(&quot;JS AES decrypt&quot;),this.logEnabled=!1);var s=this.decryptor;s||(this.decryptor=s=new l),s.expandKey(t),n(s.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&amp;&amp;(c.logger.log(&quot;WebCrypto AES decrypt&quot;),this.logEnabled=!1);var u=this.subtle;this.key!==t&amp;&amp;(this.key=t,this.fastAesKey=new o(u,t)),this.fastAesKey.expandKey().then(function(o){new i(u,r).decrypt(e,o).catch(function(i){a.onWebCryptoError(i,e,t,r,n)}).then(function(e){n(e)})}).catch(function(i){a.onWebCryptoError(i,e,t,r,n)})}},t.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(c.logger.log(&quot;WebCrypto Error, disable WebCrypto API&quot;),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c.logger.error(&quot;decrypting error : &quot;+e.message),this.observer.trigger(d.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&amp;&amp;(e.destroy(),this.decryptor=void 0)},e}();t.default=g},&quot;./src/demux/demuxer-inline.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(e,t,r,n){var i,a,o,s,l,u=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&amp;t[r+2])&gt;&gt;&gt;6),(a=(60&amp;t[r+2])&gt;&gt;&gt;2)&gt;d.length-1?void e.trigger(m.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:&quot;invalid ADTS sampling index:&quot;+a}):(s=(1&amp;t[r+2])&lt;&lt;2,s|=(192&amp;t[r+3])&gt;&gt;&gt;6,_.logger.log(&quot;manifest codec:&quot;+n+&quot;,ADTS data:type:&quot;+i+&quot;,sampleingIndex:&quot;+a+&quot;[&quot;+d[a]+&quot;Hz],channelConfig:&quot;+s),/firefox/i.test(u)?a&gt;=6?(i=5,l=new Array(4),o=a-3):(i=2,l=new Array(2),o=a):-1!==u.indexOf(&quot;android&quot;)?(i=2,l=new Array(2),o=a):(i=5,l=new Array(4),n&amp;&amp;(-1!==n.indexOf(&quot;mp4a.40.29&quot;)||-1!==n.indexOf(&quot;mp4a.40.5&quot;))||!n&amp;&amp;a&gt;=6?o=a-3:((n&amp;&amp;-1!==n.indexOf(&quot;mp4a.40.2&quot;)&amp;&amp;(a&gt;=6&amp;&amp;1===s||/vivaldi/i.test(u))||!n&amp;&amp;1===s)&amp;&amp;(i=2,l=new Array(2)),o=a)),l[0]=i&lt;&lt;3,l[0]|=(14&amp;a)&gt;&gt;1,l[1]|=(1&amp;a)&lt;&lt;7,l[1]|=s&lt;&lt;3,5===i&amp;&amp;(l[1]|=(14&amp;o)&gt;&gt;1,l[2]=(1&amp;o)&lt;&lt;7,l[2]|=8,l[3]=0),{config:l,samplerate:d[a],channelCount:s,codec:&quot;mp4a.40.&quot;+i,manifestCodec:c})}function i(e,t){return 255===e[t]&amp;&amp;240==(246&amp;e[t+1])}function a(e,t){return 1&amp;e[t+1]?7:9}function o(e,t){return(3&amp;e[t+3])&lt;&lt;11|e[t+4]&lt;&lt;3|(224&amp;e[t+5])&gt;&gt;&gt;5}function s(e,t){return!!(t+1&lt;e.length&amp;&amp;i(e,t))}function l(e,t){if(s(e,t)){var r=a(e,t),n=r;t+5&lt;e.length&amp;&amp;(n=o(e,t));var l=t+n;if(l===e.length||l+1&lt;e.length&amp;&amp;i(e,l))return!0}return!1}function u(e,t,r,i,a){if(!e.samplerate){var o=n(t,r,i,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,_.logger.log(&quot;parsed codec:&quot;+e.codec+&quot;,rate:&quot;+o.samplerate+&quot;,nb channel:&quot;+o.channelCount)}}function c(e){return 9216e4/e}function d(e,t,r,n,i){var s,l,u,c=e.length;if(s=a(e,t),l=o(e,t),(l-=s)&gt;0&amp;&amp;t+s+l&lt;=c)return u=r+n*i,{headerLength:s,frameLength:l,stamp:u}}function f(e,t,r,n,i){var a=c(e.samplerate),o=d(t,r,n,i,a);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,f={unit:t.subarray(r+l,r+l+u),pts:s,dts:s};return e.samples.push(f),{sample:f,length:u+l}}}function h(e,t,r,n){void 0===r&amp;&amp;(r=1),void 0===n&amp;&amp;(n=!1);var i=e*t*r;return n?Math.round(i):i}function g(e,t){return void 0===t&amp;&amp;(t=!1),h(e,1e3,1/K,t)}function p(e,t){return void 0===t&amp;&amp;(t=1),h(e,K,1/t)}r.r(t);var v,m=r(&quot;./src/events.js&quot;),y=r(&quot;./src/errors.ts&quot;),b=r(&quot;./src/crypt/decrypter.js&quot;),E=r(&quot;./src/polyfills/number-isFinite.js&quot;),_=r(&quot;./src/utils/logger.js&quot;),T=r(&quot;./src/utils/get-self-scope.js&quot;),S=r(&quot;./src/demux/id3.js&quot;),w=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:&quot;audio/adts&quot;,type:&quot;audio&quot;,id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=S.default.getID3Data(e,0)||[],r=t.length,n=e.length;r&lt;n;r++)if(l(e,r))return _.logger.log(&quot;ADTS sync word found !&quot;),!0;return!1},t.append=function(e,t,r,n){for(var i=this._audioTrack,a=S.default.getID3Data(e,0)||[],o=S.default.getTimeStamp(a),l=Object(E.isFiniteNumber)(o)?90*o:9e4*t,c=0,d=l,h=e.length,g=a.length,p=[{pts:d,dts:d,data:a}];g&lt;h-1;)if(s(e,g)&amp;&amp;g+5&lt;h){u(i,this.observer,e,g,i.manifestCodec);var v=f(i,e,g,l,c);if(!v){_.logger.log(&quot;Unable to parse AAC frame&quot;);break}g+=v.length,d=v.sample.pts,c++}else S.default.isHeader(e,g)?(a=S.default.getID3Data(e,g),p.push({pts:d,dts:d,data:a}),g+=a.length):g++;this.remuxer.remux(i,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),R=w,A=r(&quot;./src/demux/mp4demuxer.js&quot;),L={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24&gt;t.length)){var a=this.parseHeader(t,r);if(a&amp;&amp;r+a.frameLength&lt;=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,l={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]&gt;&gt;3&amp;3,n=e[t+1]&gt;&gt;1&amp;3,i=e[t+2]&gt;&gt;4&amp;15,a=e[t+2]&gt;&gt;2&amp;3,o=e[t+2]&gt;&gt;1&amp;1;if(1!==r&amp;&amp;0!==i&amp;&amp;15!==i&amp;&amp;3!==a){var s=3===r?3-n:3===n?3:4,l=1e3*L.BitratesMap[14*s+i-1],u=3===r?0:2===r?1:2,c=L.SamplingRateMap[3*u+a],d=e[t+3]&gt;&gt;6==3?1:2,f=L.SamplesCoefficients[r][n],h=L.BytesInSlot[n],g=8*f*h;return{sampleRate:c,channelCount:d,frameLength:parseInt(f*l/c+o,10)*h,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&amp;&amp;224==(224&amp;e[t+1])&amp;&amp;0!=(6&amp;e[t+1])},isHeader:function(e,t){return!!(t+1&lt;e.length&amp;&amp;this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1&lt;e.length&amp;&amp;this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&amp;&amp;r.frameLength&amp;&amp;(n=r.frameLength);var i=t+n;if(i===e.length||i+1&lt;e.length&amp;&amp;this.isHeaderPattern(e,i))return!0}return!1}},k=L,D=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error(&quot;no bytes available&quot;);n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable&gt;e?(this.word&lt;&lt;=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e&gt;&gt;3,e-=t&gt;&gt;3,this.bytesAvailable-=t,this.loadWord(),this.word&lt;&lt;=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word&gt;&gt;&gt;32-t;return e&gt;32&amp;&amp;_.logger.error(&quot;Cannot read more than 32 bits at a time&quot;),this.bitsAvailable-=t,this.bitsAvailable&gt;0?this.word&lt;&lt;=t:this.bytesAvailable&gt;0&amp;&amp;this.loadWord(),t=e-t,t&gt;0&amp;&amp;this.bitsAvailable?r&lt;&lt;t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e&lt;this.bitsAvailable;++e)if(0!=(this.word&amp;2147483648&gt;&gt;&gt;e))return this.word&lt;&lt;=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&amp;e?1+e&gt;&gt;&gt;1:-1*(e&gt;&gt;&gt;1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t&lt;e;t++)0!==i&amp;&amp;(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,r,n,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),g=this.readBoolean.bind(this),p=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),p(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&amp;&amp;p(1),m(),m(),p(1),g())for(a=3!==b?8:12,o=0;o&lt;a;o++)g()&amp;&amp;y(o&lt;6?16:64)}m();var E=h();if(0===E)h();else if(1===E)for(p(1),v(),v(),t=h(),o=0;o&lt;t;o++)v();m(),p(1),r=h(),n=h(),i=f(1),0===i&amp;&amp;p(1),p(1),g()&amp;&amp;(s=h(),l=h(),u=h(),c=h());var _=[1,1];if(g()&amp;&amp;g()){switch(d()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[d()&lt;&lt;8|d(),d()&lt;&lt;8|d()]}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:_}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),P=D,I=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new b.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)})},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t&gt;=e.length)return void r();if(!(e[t].unit.length&lt;32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i&lt;=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n&lt;=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,r+1,n)})},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t&gt;=e.length)return void n();for(var i=e[t].units;!(r&gt;=i.length);r++){var a=i[r];if(!(a.length&lt;=48||1!==a.type&amp;&amp;5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}(),C=I,x={video:1,audio:2,id3:3,text:4},O=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&amp;&amp;null!=e.key&amp;&amp;&quot;SAMPLE-AES&quot;===e.method?this.sampleAes=new C(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r&lt;0)&amp;&amp;(r&amp;&amp;_.logger.warn(&quot;MPEG2-TS detected but first sync word found @ offset &quot;+r+&quot;, junk ahead ?&quot;),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r&lt;t;){if(71===e[r]&amp;&amp;71===e[r+188]&amp;&amp;71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:&quot;video&quot;===e||&quot;audio&quot;===e?&quot;video/mp2t&quot;:void 0,type:e,id:x[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:&quot;video&quot;===e?0:void 0,isAAC:&quot;audio&quot;===e||void 0,duration:&quot;audio&quot;===e?t:void 0}},t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack(&quot;video&quot;,i),this._audioTrack=e.createTrack(&quot;audio&quot;,i),this._id3Track=e.createTrack(&quot;id3&quot;,i),this._txtTrack=e.createTrack(&quot;text&quot;,i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,r,n,i){var a,o,s,l,u,c=t.length,d=!1;this.contiguous=n;var f=this.pmtParsed,h=this._avcTrack,g=this._audioTrack,p=this._id3Track,v=h.pid,b=g.pid,E=p.pid,T=this._pmtId,S=h.pesData,w=g.pesData,R=p.pesData,A=this._parsePAT,L=this._parsePMT,k=this._parsePES,D=this._parseAVCPES.bind(this),P=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this),x=e._syncOffset(t);for(c-=(c+x)%188,a=x;a&lt;c;a+=188)if(71===t[a]){if(o=!!(64&amp;t[a+1]),s=((31&amp;t[a+1])&lt;&lt;8)+t[a+2],(48&amp;t[a+3])&gt;&gt;4&gt;1){if((l=a+5+t[a+4])===a+188)continue}else l=a+4;switch(s){case v:o&amp;&amp;(S&amp;&amp;(u=k(S))&amp;&amp;void 0!==u.pts&amp;&amp;D(u,!1),S={data:[],size:0}),S&amp;&amp;(S.data.push(t.subarray(l,a+188)),S.size+=a+188-l);break;case b:o&amp;&amp;(w&amp;&amp;(u=k(w))&amp;&amp;void 0!==u.pts&amp;&amp;(g.isAAC?P(u):I(u)),w={data:[],size:0}),w&amp;&amp;(w.data.push(t.subarray(l,a+188)),w.size+=a+188-l);break;case E:o&amp;&amp;(R&amp;&amp;(u=k(R))&amp;&amp;void 0!==u.pts&amp;&amp;C(u),R={data:[],size:0}),R&amp;&amp;(R.data.push(t.subarray(l,a+188)),R.size+=a+188-l);break;case 0:o&amp;&amp;(l+=t[l]+1),T=this._pmtId=A(t,l);break;case T:o&amp;&amp;(l+=t[l]+1);var O=L(t,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);v=O.avc,v&gt;0&amp;&amp;(h.pid=v),b=O.audio,b&gt;0&amp;&amp;(g.pid=b,g.isAAC=O.isAAC),E=O.id3,E&gt;0&amp;&amp;(p.pid=E),d&amp;&amp;!f&amp;&amp;(_.logger.log(&quot;reparse from beginning&quot;),d=!1,a=x-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(m.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:&quot;TS packet did not start with 0x47&quot;});S&amp;&amp;(u=k(S))&amp;&amp;void 0!==u.pts?(D(u,!0),h.pesData=null):h.pesData=S,w&amp;&amp;(u=k(w))&amp;&amp;void 0!==u.pts?(g.isAAC?P(u):I(u),g.pesData=null):(w&amp;&amp;w.size&amp;&amp;_.logger.log(&quot;last AAC PES packet truncated,might overlap between fragments&quot;),g.pesData=w),R&amp;&amp;(u=k(R))&amp;&amp;void 0!==u.pts?(C(u),p.pesData=null):p.pesData=R,null==this.sampleAes?this.remuxer.remux(g,h,p,this._txtTrack,r,n,i):this.decryptAndRemux(g,h,p,this._txtTrack,r,n,i)},t.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&amp;&amp;e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)})}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},t.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,a,o)})}else this.remuxer.remux(e,t,r,n,i,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&amp;e[t+10])&lt;&lt;8|e[t+11]},t._parsePMT=function(e,t,r,n){var i,a,o,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&amp;e[t+1])&lt;&lt;8|e[t+2],a=t+3+i-4,o=(15&amp;e[t+10])&lt;&lt;8|e[t+11],t+=12+o;t&lt;a;){switch(s=(31&amp;e[t+1])&lt;&lt;8|e[t+2],e[t]){case 207:if(!n){_.logger.log(&quot;unknown stream type:&quot;+e[t]);break}case 15:-1===l.audio&amp;&amp;(l.audio=s);break;case 21:-1===l.id3&amp;&amp;(l.id3=s);break;case 219:if(!n){_.logger.log(&quot;unknown stream type:&quot;+e[t]);break}case 27:-1===l.avc&amp;&amp;(l.avc=s);break;case 3:case 4:r?-1===l.audio&amp;&amp;(l.audio=s,l.isAAC=!1):_.logger.log(&quot;MPEG audio found, not supported in this browser for now&quot;);break;case 36:_.logger.warn(&quot;HEVC stream type found, not supported for now&quot;);break;default:_.logger.log(&quot;unknown stream type:&quot;+e[t])}t+=5+((15&amp;e[t+3])&lt;&lt;8|e[t+4])}return l},t._parsePES=function(e){var t,r,n,i,a,o,s,l,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length&lt;19&amp;&amp;c.length&gt;1;){var d=new Uint8Array(c[0].length+c[1].length);d.set(c[0]),d.set(c[1],c[0].length),c[0]=d,c.splice(1,1)}if(t=c[0],1===(t[0]&lt;&lt;16)+(t[1]&lt;&lt;8)+t[2]){if((n=(t[4]&lt;&lt;8)+t[5])&amp;&amp;n&gt;e.size-6)return null;if(r=t[7],192&amp;r&amp;&amp;(o=536870912*(14&amp;t[9])+4194304*(255&amp;t[10])+16384*(254&amp;t[11])+128*(255&amp;t[12])+(254&amp;t[13])/2,o&gt;4294967295&amp;&amp;(o-=8589934592),64&amp;r?(s=536870912*(14&amp;t[14])+4194304*(255&amp;t[15])+16384*(254&amp;t[16])+128*(255&amp;t[17])+(254&amp;t[18])/2,s&gt;4294967295&amp;&amp;(s-=8589934592),o-s&gt;54e5&amp;&amp;(_.logger.warn(Math.round((o-s)/9e4)+&quot;s delta between PTS and DTS, align them&quot;),o=s)):s=o),i=t[8],l=i+9,e.size&lt;=l)return null;e.size-=l,a=new Uint8Array(e.size);for(var f=0,h=c.length;f&lt;h;f++){t=c[f];var g=t.byteLength;if(l){if(l&gt;g){l-=g;continue}t=t.subarray(l),g-=l,l=0}a.set(t,u),u+=g}return n&amp;&amp;(n-=i+3),{data:a,pts:o,dts:s,len:n}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&amp;&amp;e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&amp;&amp;(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&amp;&amp;_.logger.log(e.pts+&quot;/&quot;+e.dts+&quot;:&quot;+e.debug)},t._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&amp;&amp;s.length&amp;&amp;!o.audFound&amp;&amp;(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,&quot;&quot;)),s.forEach(function(t){switch(t.type){case 1:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,&quot;&quot;)),l.frame=!0;var s=t.data;if(u&amp;&amp;s.length&gt;4){var f=new P(s).readSliceType();2!==f&amp;&amp;4!==f&amp;&amp;7!==f&amp;&amp;9!==f||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,&quot;&quot;)),l.key=!0,l.frame=!0;break;case 6:n=!0,r=new P(a.discardEPB(t.data)),r.readUByte();for(var h=0,g=0,p=!1,v=0;!p&amp;&amp;r.bytesAvailable&gt;1;){h=0;do{v=r.readUByte(),h+=v}while(255===v);g=0;do{v=r.readUByte(),g+=v}while(255===v);if(4===h&amp;&amp;0!==r.bytesAvailable){p=!0;if(181===r.readUByte()){if(49===r.readUShort()){if(1195456820===r.readUInt()){if(3===r.readUByte()){var m=r.readUByte(),y=r.readUByte(),b=31&amp;m,E=[m,y];for(i=0;i&lt;b;i++)E.push(r.readUByte()),E.push(r.readUByte()),E.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}}}}else if(5===h&amp;&amp;0!==r.bytesAvailable){if(p=!0,g&gt;16){var _=[];for(i=0;i&lt;16;i++)_.push(r.readUByte().toString(16)),3!==i&amp;&amp;5!==i&amp;&amp;7!==i&amp;&amp;9!==i||_.push(&quot;-&quot;);var T=g-16,w=new Uint8Array(T);for(i=0;i&lt;T;i++)w[i]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:h,uuid:_.join(&quot;&quot;),userDataBytes:w,userData:Object(S.utf8ArrayToStr)(w.buffer)})}}else if(g&lt;r.bytesAvailable)for(i=0;i&lt;g;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!o.sps){r=new P(t.data);var R=r.readSPS();o.width=R.width,o.height=R.height,o.pixelRatio=R.pixelRatio,o.sps=[t.data],o.duration=a._duration;var A=t.data.subarray(1,4),L=&quot;avc1.&quot;;for(i=0;i&lt;3;i++){var k=A[i].toString(16);k.length&lt;2&amp;&amp;(k=&quot;0&quot;+k),L+=k}o.codec=L}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,l&amp;&amp;c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,&quot;&quot;);break;case 12:n=!1;break;default:n=!1,l&amp;&amp;(l.debug+=&quot;unknown NAL &quot;+t.type+&quot; &quot;)}if(l&amp;&amp;n){l.units.push(t)}}),t&amp;&amp;l&amp;&amp;(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r&gt;0){if(t.pts&gt;=e[r-1].pts)e.push(t);else for(var n=r-1;n&gt;=0;n--)if(t.pts&lt;e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,i,a,o=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],f=-1;for(-1===u&amp;&amp;(f=0,a=31&amp;e[0],u=0,o=1);o&lt;s;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(f&gt;=0)n={data:e.subarray(f,o-u-1),type:a},d.push(n);else{var h=this._getLastNalUnit();if(h&amp;&amp;(c&amp;&amp;o&lt;=4-c&amp;&amp;h.state&amp;&amp;(h.data=h.data.subarray(0,h.data.byteLength-c)),(r=o-u-1)&gt;0)){var g=new Uint8Array(h.data.byteLength+r);g.set(h.data,0),g.set(e.subarray(0,r),h.data.byteLength),h.data=g}}o&lt;s?(i=31&amp;e[o],f=o,a=i,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f&gt;=0&amp;&amp;u&gt;=0&amp;&amp;(n={data:e.subarray(f,s),type:a,state:u},d.push(n)),0===d.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return l.naluState=u,d},t.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a&lt;n-2;)0===e[a]&amp;&amp;0===e[a+1]&amp;&amp;3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a&lt;t;o++,a++)o===i[0]&amp;&amp;(o++,i.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,n,i,a,o=this._audioTrack,l=e.data,d=e.pts,h=this.aacOverFlow,g=this.aacLastPTS;if(h){var p=new Uint8Array(h.byteLength+l.byteLength);p.set(h,0),p.set(l,h.byteLength),l=p}for(n=0,a=l.length;n&lt;a-1&amp;&amp;!s(l,n);n++);if(n){var v,b;if(n&lt;a-1?(v=&quot;AAC PES did not start with ADTS header,offset:&quot;+n,b=!1):(v=&quot;no ADTS header found in AAC PES&quot;,b=!0),_.logger.warn(&quot;parsing error:&quot;+v),this.observer.trigger(m.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:b,reason:v}),b)return}if(u(o,this.observer,l,n,this.audioCodec),r=0,t=c(o.samplerate),h&amp;&amp;g){var E=g+t;Math.abs(E-d)&gt;1&amp;&amp;(_.logger.log(&quot;AAC: align PTS for overlapping frames by &quot;+Math.round((E-d)/90)),d=E)}for(;n&lt;a;)if(s(l,n)&amp;&amp;n+5&lt;a){var T=f(o,l,n,d,r);if(!T)break;n+=T.length,i=T.sample.pts,r++}else n++;h=n&lt;a?l.subarray(n,a):null,this.aacOverFlow=h,this.aacLastPTS=i},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,i=0,a=e.pts;i&lt;r;)if(k.isHeader(t,i)){var o=k.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),N=O,M=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:&quot;audio/mpeg&quot;,type:&quot;audio&quot;,id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=S.default.getID3Data(e,0);if(n&amp;&amp;void 0!==S.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t&lt;r;t++)if(k.probe(e,t))return _.logger.log(&quot;MPEG Audio sync word found !&quot;),!0;return!1},t.append=function(e,t,r,n){for(var i=S.default.getID3Data(e,0),a=S.default.getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,l=e.length,u=0,c=0,d=this._audioTrack,f=[{pts:o,dts:o,data:i}];s&lt;l;)if(k.isHeader(e,s)){var h=k.appendFrame(d,e,s,o,u);if(!h)break;s+=h.length,c=h.sample.pts,u++}else S.default.isHeader(e,s)?(i=S.default.getID3Data(e,s),f.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),F=M,U=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case&quot;mp4a.40.2&quot;:if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),B=U,G=Math.pow(2,32)-1,j=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],&quot;.mp3&quot;:[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&amp;&amp;(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n&gt;&gt;24&amp;255,t[1]=n&gt;&gt;16&amp;255,t[2]=n&gt;&gt;8&amp;255,t[3]=255&amp;n,t.set(e,4),i=0,n=8;i&lt;a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(G+1)),i=Math.floor(r%(G+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t&gt;&gt;24&amp;255,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t,n&gt;&gt;24,n&gt;&gt;16&amp;255,n&gt;&gt;8&amp;255,255&amp;n,i&gt;&gt;24,i&gt;&gt;16&amp;255,i&gt;&gt;8&amp;255,255&amp;i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t&gt;&gt;24,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t]))},e.minf=function(t){return&quot;audio&quot;===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(G+1)),i=Math.floor(r%(G+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t&gt;&gt;24&amp;255,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t,n&gt;&gt;24,n&gt;&gt;16&amp;255,n&gt;&gt;8&amp;255,255&amp;n,i&gt;&gt;24,i&gt;&gt;16&amp;255,i&gt;&gt;8&amp;255,255&amp;i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n&lt;i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn&lt;&lt;4|r.isDependedOn&lt;&lt;2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r&lt;t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i&gt;&gt;&gt;8&amp;255),a.push(255&amp;i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r&lt;t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i&gt;&gt;&gt;8&amp;255),o.push(255&amp;i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l&gt;&gt;8&amp;255,255&amp;l,u&gt;&gt;8&amp;255,255&amp;u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c&gt;&gt;24,c&gt;&gt;16&amp;255,c&gt;&gt;8&amp;255,255&amp;c,d&gt;&gt;24,d&gt;&gt;16&amp;255,d&gt;&gt;8&amp;255,255&amp;d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r&gt;&gt;8&amp;255,255&amp;r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[&quot;.mp3&quot;],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r&gt;&gt;8&amp;255,255&amp;r,0,0]))},e.stsd=function(t){return&quot;audio&quot;===t.type?t.isAAC||&quot;mp3&quot;!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(n/(G+1)),s=Math.floor(n%(G+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,255&amp;r,0,0,0,0,o&gt;&gt;24,o&gt;&gt;16&amp;255,o&gt;&gt;8&amp;255,255&amp;o,s&gt;&gt;24,s&gt;&gt;16&amp;255,s&gt;&gt;8&amp;255,255&amp;s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i&gt;&gt;8&amp;255,255&amp;i,0,0,a&gt;&gt;8&amp;255,255&amp;a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(G+1)),o=Math.floor(r%(G+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i&gt;&gt;24,i&gt;&gt;16&amp;255,i&gt;&gt;8&amp;255,255&amp;i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a&gt;&gt;24,a&gt;&gt;16&amp;255,a&gt;&gt;8&amp;255,255&amp;a,o&gt;&gt;24,o&gt;&gt;16&amp;255,o&gt;&gt;8&amp;255,255&amp;o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r&gt;&gt;24,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,255&amp;r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c&gt;&gt;&gt;24&amp;255,c&gt;&gt;&gt;16&amp;255,c&gt;&gt;&gt;8&amp;255,255&amp;c,r&gt;&gt;&gt;24&amp;255,r&gt;&gt;&gt;16&amp;255,r&gt;&gt;&gt;8&amp;255,255&amp;r],0),n=0;n&lt;c;n++)i=u[n],a=i.duration,o=i.size,s=i.flags,l=i.cts,f.set([a&gt;&gt;&gt;24&amp;255,a&gt;&gt;&gt;16&amp;255,a&gt;&gt;&gt;8&amp;255,255&amp;a,o&gt;&gt;&gt;24&amp;255,o&gt;&gt;&gt;16&amp;255,o&gt;&gt;&gt;8&amp;255,255&amp;o,s.isLeading&lt;&lt;2|s.dependsOn,s.isDependedOn&lt;&lt;6|s.hasRedundancy&lt;&lt;4|s.paddingValue&lt;&lt;1|s.isNonSync,61440&amp;s.degradPrio,15&amp;s.degradPrio,l&gt;&gt;&gt;24&amp;255,l&gt;&gt;&gt;16&amp;255,l&gt;&gt;&gt;8&amp;255,255&amp;l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}(),V=j,K=9e4,W=p(10),H=p(.2),Y=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&amp;&amp;n.indexOf(&quot;Apple&quot;)&gt;-1&amp;&amp;i&amp;&amp;!i.match(&quot;CriOS&quot;),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,r,n,i,a,o){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var s=e.samples.length,l=t.samples.length,u=i,c=i;if(s&amp;&amp;l){var d=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;u+=Math.max(0,d),c+=Math.max(0,-d)}if(s){e.timescale||(_.logger.warn(&quot;regenerate InitSegment as audio detected&quot;),this.generateIS(e,t,i));var f=this.remuxAudio(e,u,a,o);if(l){var h;f&amp;&amp;(h=f.endPTS-f.startPTS),t.timescale||(_.logger.warn(&quot;regenerate InitSegment as video detected&quot;),this.generateIS(e,t,i)),this.remuxVideo(t,c,a,h,o)}}else if(l){var g=this.remuxVideo(t,c,a,0,o);g&amp;&amp;e.codec&amp;&amp;this.remuxEmptyAudio(e,u,a,g)}}r.samples.length&amp;&amp;this.remuxID3(r,i),n.samples.length&amp;&amp;this.remuxText(n,i),this.observer.trigger(m.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var n,i,a=this.observer,o=e.samples,s=t.samples,l=this.typeSupported,u=&quot;audio/mp4&quot;,c={},d={tracks:c},f=void 0===this._initPTS;if(f&amp;&amp;(n=i=1/0),e.config&amp;&amp;o.length&amp;&amp;(e.timescale=e.samplerate,_.logger.log(&quot;audio sampling rate : &quot;+e.samplerate),e.isAAC||(l.mpeg?(u=&quot;audio/mpeg&quot;,e.codec=&quot;&quot;):l.mp3&amp;&amp;(e.codec=&quot;mp3&quot;)),c.audio={container:u,codec:e.codec,initSegment:!e.isAAC&amp;&amp;l.mpeg?new Uint8Array:V.initSegment([e]),metadata:{channelCount:e.channelCount}},f&amp;&amp;(n=i=o[0].pts-e.inputTimeScale*r)),t.sps&amp;&amp;t.pps&amp;&amp;s.length){var h=t.inputTimeScale;t.timescale=h,c.video={container:&quot;video/mp4&quot;,codec:t.codec,initSegment:V.initSegment([t]),metadata:{width:t.width,height:t.height}},f&amp;&amp;(n=Math.min(n,s[0].pts-h*r),i=Math.min(i,s[0].dts-h*r),this.observer.trigger(m.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(c).length?(a.trigger(m.default.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,f&amp;&amp;(this._initPTS=n,this._initDTS=i)):a.trigger(m.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:&quot;no audio/video samples found&quot;})},t.remuxVideo=function(e,t,r,n,i){var a,o,s,l,u,c,d,f=8,h=e.timescale,p=e.samples,v=[],b=p.length,E=this._PTSNormalize,T=this._initPTS,S=this.nextAvcDts,w=this.isSafari;if(0!==b){w&amp;&amp;(r|=p.length&amp;&amp;S&amp;&amp;(i&amp;&amp;Math.abs(t-S/h)&lt;.1||Math.abs(p[0].pts-S-T)&lt;h/5)),r||(S=t*h),p.forEach(function(e){e.pts=E(e.pts-T,S),e.dts=E(e.dts-T,S)}),p.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var R=p.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*H)},0);if(R&lt;0){_.logger.warn(&quot;PTS &lt; DTS detected in video samples, shifting DTS by &quot;+g(R,!0)+&quot; ms to overcome this issue&quot;);for(var A=0;A&lt;p.length;A++)p[A].dts+=R}var L=p[0];u=Math.max(L.dts,0),l=Math.max(L.pts,0);var k=u-S;r&amp;&amp;k&amp;&amp;(k&gt;1?_.logger.log(&quot;AVC: &quot;+g(k,!0)+&quot; ms hole between fragments detected,filling it&quot;):k&lt;-1&amp;&amp;_.logger.log(&quot;AVC: &quot;+g(-k,!0)+&quot; ms overlapping between fragments detected&quot;),u=S,p[0].dts=u,l=Math.max(l-k,S),p[0].pts=l,_.logger.log(&quot;Video: PTS/DTS adjusted: &quot;+g(l,!0)+&quot;/&quot;+g(u,!0)+&quot;, delta: &quot;+g(k,!0)+&quot; ms&quot;)),L=p[p.length-1],d=Math.max(L.dts,0),c=Math.max(L.pts,0,d),w&amp;&amp;(a=Math.round((d-u)/(p.length-1)));for(var D=0,P=0,I=0;I&lt;b;I++){for(var C=p[I],x=C.units,O=x.length,N=0,M=0;M&lt;O;M++)N+=x[M].data.length;P+=N,D+=O,C.length=N,C.dts=w?u+I*a:Math.max(C.dts,u),C.pts=Math.max(C.pts,C.dts)}var F=P+4*D+8;try{o=new Uint8Array(F)}catch(e){return void this.observer.trigger(m.default.ERROR,{type:y.ErrorTypes.MUX_ERROR,details:y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:&quot;fail allocating video mdat &quot;+F})}var U=new DataView(o.buffer);U.setUint32(0,F),o.set(V.types.mdat,4);for(var B=0;B&lt;b;B++){for(var G=p[B],j=G.units,K=0,W=void 0,Y=0,z=j.length;Y&lt;z;Y++){var q=j[Y],X=q.data,Z=q.data.byteLength;U.setUint32(f,Z),f+=4,o.set(X,f),f+=Z,K+=4+Z}if(w)W=Math.max(0,a*Math.round((G.pts-G.dts)/a));else{if(B&lt;b-1)a=p[B+1].dts-G.dts;else{var J=this.config,Q=G.dts-p[B&gt;0?B-1:B].dts;if(J.stretchShortVideoTrack){var $=J.maxBufferHole,ee=Math.floor($*h),te=(n?l+n*h:this.nextAudioPts)-G.pts;te&gt;ee?(a=te-Q,a&lt;0&amp;&amp;(a=Q),_.logger.log(&quot;It is approximately &quot;+g(te,!1)+&quot; ms to the next segment; using duration &quot;+g(a,!1)+&quot; ms for the last video frame.&quot;)):a=Q}else a=Q}W=Math.round(G.pts-G.dts)}v.push({size:K,duration:a,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=d+a;var re=e.dropped;if(e.nbNalu=0,e.dropped=0,v.length&amp;&amp;navigator.userAgent.toLowerCase().indexOf(&quot;chrome&quot;)&gt;-1){var ne=v[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=v,s=V.moof(e.sequenceNumber++,u,e),e.samples=[];var ie={data1:s,data2:o,startPTS:l/h,endPTS:(c+a)/h,startDTS:u/h,endDTS:this.nextAvcDts/h,type:&quot;video&quot;,hasAudio:!1,hasVideo:!0,nb:v.length,dropped:re};return this.observer.trigger(m.default.FRAG_PARSING_DATA,ie),ie}},t.remuxAudio=function(e,t,r,n){var i,a,o,s,l,u,c=e.inputTimeScale,d=e.timescale,f=c/d,h=e.isAAC?1024:1152,p=h*f,v=this._PTSNormalize,b=this._initPTS,E=!e.isAAC&amp;&amp;this.typeSupported.mpeg,T=E?0:8,S=e.samples,w=[],R=this.nextAudioPts;if(r|=S.length&amp;&amp;R&amp;&amp;(n&amp;&amp;Math.abs(t-R/c)&lt;.1||Math.abs(S[0].pts-R-b)&lt;20*p),S.forEach(function(e){e.pts=e.dts=v(e.pts-b,t*c)}),S=S.filter(function(e){return e.pts&gt;=0}),0!==S.length){if(r||(R=n?t*c:S[0].pts),e.isAAC)for(var A=this.config.maxAudioFramesDrift,L=0,k=R;L&lt;S.length;){var D,P=S[L],I=P.pts;if((D=I-k)&lt;=-A*p)_.logger.warn(&quot;Dropping 1 audio frame @ &quot;+g(k,!0)+&quot; ms due to &quot;+g(D,!0)+&quot; ms overlap.&quot;),S.splice(L,1);else if(D&gt;=A*p&amp;&amp;D&lt;W&amp;&amp;k){var C=Math.round(D/p);_.logger.warn(&quot;Injecting &quot;+C+&quot; audio frames @ &quot;+g(k,!0)+&quot; ms due to &quot;+g(k,!0)+&quot; ms gap.&quot;);for(var x=0;x&lt;C;x++){var O=Math.max(k,0);a=B.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(_.logger.log(&quot;Unable to get silent frame for given audio codec; duplicating last frame instead.&quot;),a=P.unit.subarray()),S.splice(L,0,{unit:a,pts:O,dts:O}),k+=p,L++}P.pts=P.dts=k,k+=p,L++}else Math.abs(D),P.pts=P.dts=k,k+=p,L++}for(var N=S.length,M=0;N--;)M+=S[N].unit.byteLength;for(var F=0,U=S.length;F&lt;U;F++){var G=S[F],j=G.unit,K=G.pts;if(void 0!==u)i.duration=Math.round((K-u)/f);else{var H=K-R,Y=0;if(r&amp;&amp;e.isAAC&amp;&amp;H){if(H&gt;0&amp;&amp;H&lt;W)Y=Math.round((K-R)/p),_.logger.log(g(H,!0)+&quot; ms hole between AAC samples detected,filling it&quot;),Y&gt;0&amp;&amp;(a=B.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(a=j.subarray()),M+=Y*a.length);else if(H&lt;-12){_.logger.log(&quot;drop overlapping AAC sample, expected/parsed/delta: &quot;+g(R,!0)+&quot; ms / &quot;+g(K,!0)+&quot; ms / &quot;+g(-H,!0)+&quot; ms&quot;),M-=j.byteLength;continue}K=R}if(l=K,!(M&gt;0))return;M+=T;try{o=new Uint8Array(M)}catch(e){return void this.observer.trigger(m.default.ERROR,{type:y.ErrorTypes.MUX_ERROR,details:y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:&quot;fail allocating audio mdat &quot;+M})}if(!E){new DataView(o.buffer).setUint32(0,M),o.set(V.types.mdat,4)}for(var z=0;z&lt;Y;z++)a=B.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(_.logger.log(&quot;Unable to get silent frame for given audio codec; duplicating this frame instead.&quot;),a=j.subarray()),o.set(a,T),T+=a.byteLength,i={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(i)}o.set(j,T);var q=j.byteLength;T+=q,i={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(i),u=K}var X=0;if(N=w.length,N&gt;=2&amp;&amp;(X=w[N-2].duration,i.duration=X),N){this.nextAudioPts=R=u+f*X,e.samples=w,s=E?new Uint8Array:V.moof(e.sequenceNumber++,l/f,e),e.samples=[];var Z=l/c,J=R/c,Q={data1:s,data2:o,startPTS:Z,endPTS:J,startDTS:Z,endDTS:J,type:&quot;audio&quot;,hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(m.default.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,s=this.nextAudioPts,l=(void 0!==s?s:n.startDTS*i)+this._initDTS,u=n.endDTS*i+this._initDTS,c=1024*o,d=Math.ceil((u-l)/c),f=B.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(_.logger.warn(&quot;remux empty Audio&quot;),!f)return void _.logger.trace(&quot;Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!&quot;);for(var h=[],g=0;g&lt;d;g++){var p=l+g*c;h.push({unit:f,pts:p,dts:p})}e.samples=h,this.remuxAudio(e,t,r)},t.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(r){for(var o=0;o&lt;r;o++)t=e.samples[o],t.pts=(t.pts-i)/n,t.dts=(t.dts-a)/n;this.observer.trigger(m.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var a=0;a&lt;r;a++)t=e.samples[a],t.pts=(t.pts-i)/n;this.observer.trigger(m.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t&lt;e?-8589934592:8589934592;Math.abs(e-t)&gt;4294967296;)e+=r;return e},e}(),z=Y,q=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,n,i,a,o,s){var l=this.observer,u=&quot;&quot;;e&amp;&amp;(u+=&quot;audio&quot;),t&amp;&amp;(u+=&quot;video&quot;),l.trigger(m.default.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(m.default.FRAG_PARSED)},e}(),X=q,Z=Object(T.getSelfScope)();try{v=Z.performance.now.bind(Z.performance)}catch(e){_.logger.debug(&quot;Unable to use Performance API on this environment&quot;),v=Z.Date.now}var J=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&amp;&amp;e.destroy()},t.push=function(e,t,r,n,i,a,o,s,l,u,c,d){var f=this;if(e.byteLength&gt;0&amp;&amp;null!=t&amp;&amp;null!=t.key&amp;&amp;&quot;AES-128&quot;===t.method){var h=this.decrypter;null==h&amp;&amp;(h=this.decrypter=new b.default(this.observer,this.config));var g=v();h.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var h=v();f.observer.trigger(m.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:h}}),f.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,a,o,s,l,u,c,d)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,a,o,s,l,u,c,d)},t.pushDecrypted=function(e,t,r,n,i,a,o,s,l,u,c,d){var f=this.demuxer;if(!f||(o||s)&amp;&amp;!this.probe(e)){for(var h=this.observer,g=this.typeSupported,p=this.config,v=[{demux:N,remux:z},{demux:A.default,remux:X},{demux:R,remux:z},{demux:F,remux:z}],b=0,E=v.length;b&lt;E;b++){var _=v[b],T=_.demux.probe;if(T(e)){var S=this.remuxer=new _.remux(h,p,g,this.vendor);f=new _.demux(h,S,p,g),this.probe=T;break}}if(!f)return void h.trigger(m.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:&quot;no demux matching with content found&quot;});this.demuxer=f}var w=this.remuxer;(o||s)&amp;&amp;(f.resetInitSegment(r,n,i,u),w.resetInitSegment()),o&amp;&amp;(f.resetTimeStamp(d),w.resetTimeStamp(d)),&quot;function&quot;==typeof f.setDecryptData&amp;&amp;f.setDecryptData(t),f.append(e,a,l,c)},e}();t.default=J},&quot;./src/demux/demuxer-worker.js&quot;:function(e,t,r){&quot;use strict&quot;;r.r(t);var n=r(&quot;./src/demux/demuxer-inline.js&quot;),i=r(&quot;./src/events.js&quot;),a=r(&quot;./src/utils/logger.js&quot;),o=r(&quot;./node_modules/eventemitter3/index.js&quot;),s=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=arguments.length,n=new Array(r&gt;1?r-1:0),i=1;i&lt;r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r&gt;1?r-1:0),i=1;i&lt;r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener(&quot;message&quot;,function(i){var o=i.data;switch(o.cmd){case&quot;init&quot;:var s=JSON.parse(o.config);e.demuxer=new n.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),r(&quot;init&quot;,null);break;case&quot;demux&quot;:e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&amp;&amp;(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&amp;&amp;(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})};t.default=s},&quot;./src/demux/id3.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(){var e=Object(a.getSelfScope)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder(&quot;utf-8&quot;)),i}r.r(t),r.d(t,&quot;utf8ArrayToStr&quot;,function(){return s});var i,a=r(&quot;./src/utils/get-self-scope.js&quot;),o=function(){function e(){}return e.isHeader=function(e,t){return t+10&lt;=e.length&amp;&amp;73===e[t]&amp;&amp;68===e[t+1]&amp;&amp;51===e[t+2]&amp;&amp;e[t+3]&lt;255&amp;&amp;e[t+4]&lt;255&amp;&amp;e[t+6]&lt;128&amp;&amp;e[t+7]&lt;128&amp;&amp;e[t+8]&lt;128&amp;&amp;e[t+9]&lt;128},e.isFooter=function(e,t){return t+10&lt;=e.length&amp;&amp;51===e[t]&amp;&amp;68===e[t+1]&amp;&amp;73===e[t+2]&amp;&amp;e[t+3]&lt;255&amp;&amp;e[t+4]&lt;255&amp;&amp;e[t+6]&lt;128&amp;&amp;e[t+7]&lt;128&amp;&amp;e[t+8]&lt;128&amp;&amp;e[t+9]&lt;128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);){i+=10;i+=e._readSize(t,r+6),e.isFooter(t,r+10)&amp;&amp;(i+=10),r+=i}if(i&gt;0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&amp;e[t])&lt;&lt;21,r|=(127&amp;e[t+1])&lt;&lt;14,r|=(127&amp;e[t+2])&lt;&lt;7,r|=127&amp;e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n&lt;r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&amp;&amp;&quot;PRIV&quot;===e.key&amp;&amp;&quot;com.apple.streaming.transportStreamTimestamp&quot;===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){var i=e._readSize(t,r+6);r+=10;for(var a=r+i;r+8&lt;a;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&amp;&amp;n.push(s),r+=o.size+10}e.isFooter(t,r)&amp;&amp;(r+=10)}return n},e._decodeFrame=function(t){return&quot;PRIV&quot;===t.type?e._decodePrivFrame(t):&quot;T&quot;===t.type[0]?e._decodeTextFrame(t):&quot;W&quot;===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&amp;t[3],n=(t[4]&lt;&lt;23)+(t[5]&lt;&lt;15)+(t[6]&lt;&lt;7)+t[7];return n/=45,r&amp;&amp;(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size&lt;2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size&lt;2)){if(&quot;TXXX&quot;===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if(&quot;WXXX&quot;===t.type){if(t.size&lt;2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&amp;&amp;(t=!1);var r=n();if(r){var i=r.decode(e);if(t){var a=i.indexOf(&quot;\0&quot;);return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,&quot;&quot;)}for(var o,s,l,u=e.length,c=&quot;&quot;,d=0;d&lt;u;){if(0===(o=e[d++])&amp;&amp;t)return c;if(0!==o&amp;&amp;3!==o)switch(o&gt;&gt;4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(o);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&amp;o)&lt;&lt;6|63&amp;s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&amp;o)&lt;&lt;12|(63&amp;s)&lt;&lt;6|(63&amp;l)&lt;&lt;0)}}return c},e}(),s=o._utf8ArrayToStr;t.default=o},&quot;./src/demux/mp4demuxer.js&quot;:function(e,t,r){&quot;use strict&quot;;r.r(t);var n=r(&quot;./src/utils/logger.js&quot;),i=r(&quot;./src/events.js&quot;),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,a){if(t&amp;&amp;t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&amp;&amp;(r=&quot;mp4a.40.5&quot;),null==n&amp;&amp;(n=&quot;avc1.42e01e&quot;);var s={};o.audio&amp;&amp;o.video?s.audiovideo={container:&quot;video/mp4&quot;,codec:r+&quot;,&quot;+n,initSegment:a?t:null}:(o.audio&amp;&amp;(s.audio={container:&quot;audio/mp4&quot;,codec:r,initSegment:a?t:null}),o.video&amp;&amp;(s.video={container:&quot;video/mp4&quot;,codec:n,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&amp;&amp;(this.audioCodec=r),n&amp;&amp;(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},[&quot;moof&quot;]).length&gt;0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&amp;&amp;(t+=e.start,e=e.data);var r=e[t]&lt;&lt;8|e[t+1];return r&lt;0?65536+r:r},e.readUint32=function(e,t){e.data&amp;&amp;(t+=e.start,e=e.data);var r=e[t]&lt;&lt;24|e[t+1]&lt;&lt;16|e[t+2]&lt;&lt;8|e[t+3];return r&lt;0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&amp;&amp;(t+=e.start,e=e.data),e[t]=r&gt;&gt;24,e[t+1]=r&gt;&gt;16&amp;255,e[t+2]=r&gt;&gt;8&amp;255,e[t+3]=255&amp;r},e.findBox=function(t,r){var n,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!r.length)return null;for(n=l;n&lt;o;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=i&gt;1?n+i:o,a===r[0]&amp;&amp;(1===r.length?c.push({data:t,start:n+8,end:u}):(s=e.findBox({data:t,start:n+8,end:u},r.slice(1)),s.length&amp;&amp;(c=c.concat(s)))),n=u;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,[&quot;moov&quot;])[0],i=n?n.end:null,a=0,o=e.findBox(t,[&quot;sidx&quot;]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4;a+=0===s?8:16,a+=2;var u=o.end+0,c=e.readUint16(o,a);a+=2;for(var d=0;d&lt;c;d++){var f=a,h=e.readUint32(o,f);f+=4;var g=2147483647&amp;h;if(1===(2147483648&amp;h)&gt;&gt;&gt;31)return void console.warn(&quot;SIDX has hierarchical references (not supported)&quot;);var p=e.readUint32(o,f);f+=4,r.push({referenceSize:g,subsegmentDuration:p,info:{duration:p/l,start:u,end:u+g-1}}),u+=g,f+=4,a=f}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,[&quot;moov&quot;,&quot;trak&quot;]).forEach(function(t){var i=e.findBox(t,[&quot;tkhd&quot;])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),l=e.findBox(t,[&quot;mdia&quot;,&quot;mdhd&quot;])[0];if(l){a=l.data[l.start],o=0===a?12:20;var u=e.readUint32(l,o),c=e.findBox(t,[&quot;mdia&quot;,&quot;hdlr&quot;])[0];if(c){var d=e.bin2str(c.data.subarray(c.start+8,c.start+12)),f={soun:&quot;audio&quot;,vide:&quot;video&quot;}[d];if(f){var h=e.findBox(t,[&quot;mdia&quot;,&quot;minf&quot;,&quot;stbl&quot;,&quot;stsd&quot;]);if(h.length){h=h[0];var g=e.bin2str(h.data.subarray(h.start+12,h.start+16));n.logger.log(&quot;MP4Demuxer:&quot;+f+&quot;:&quot;+g+&quot; found&quot;)}r[s]={timescale:u,type:f},r[f]={timescale:u,id:s}}}}}}),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,[&quot;moof&quot;,&quot;traf&quot;]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,[&quot;tfhd&quot;]).map(function(n){var i,a;return i=e.readUint32(n,4),a=t[i].timescale||9e4,e.findBox(r,[&quot;tfdt&quot;]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&amp;&amp;(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,[&quot;moof&quot;,&quot;traf&quot;]).map(function(r){return e.findBox(r,[&quot;tfhd&quot;]).map(function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,[&quot;tfdt&quot;]).map(function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}})})})},t.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},t.destroy=function(){},e}();t.default=o},&quot;./src/errors.ts&quot;:function(e,t,r){&quot;use strict&quot;;r.r(t),r.d(t,&quot;ErrorTypes&quot;,function(){return n}),r.d(t,&quot;ErrorDetails&quot;,function(){return i});var n;!function(e){e.NETWORK_ERROR=&quot;networkError&quot;,e.MEDIA_ERROR=&quot;mediaError&quot;,e.KEY_SYSTEM_ERROR=&quot;keySystemError&quot;,e.MUX_ERROR=&quot;muxError&quot;,e.OTHER_ERROR=&quot;otherError&quot;}(n||(n={}));var i;!function(e){e.KEY_SYSTEM_NO_KEYS=&quot;keySystemNoKeys&quot;,e.KEY_SYSTEM_NO_ACCESS=&quot;keySystemNoAccess&quot;,e.KEY_SYSTEM_NO_SESSION=&quot;keySystemNoSession&quot;,e.KEY_SYSTEM_LICENSE_REQUEST_FAILED=&quot;keySystemLicenseRequestFailed&quot;,e.KEY_SYSTEM_NO_INIT_DATA=&quot;keySystemNoInitData&quot;,e.MANIFEST_LOAD_ERROR=&quot;manifestLoadError&quot;,e.MANIFEST_LOAD_TIMEOUT=&quot;manifestLoadTimeOut&quot;,e.MANIFEST_PARSING_ERROR=&quot;manifestParsingError&quot;,e.MANIFEST_INCOMPATIBLE_CODECS_ERROR=&quot;manifestIncompatibleCodecsError&quot;,e.LEVEL_LOAD_ERROR=&quot;levelLoadError&quot;,e.LEVEL_LOAD_TIMEOUT=&quot;levelLoadTimeOut&quot;,e.LEVEL_SWITCH_ERROR=&quot;levelSwitchError&quot;,e.AUDIO_TRACK_LOAD_ERROR=&quot;audioTrackLoadError&quot;,e.AUDIO_TRACK_LOAD_TIMEOUT=&quot;audioTrackLoadTimeOut&quot;,e.FRAG_LOAD_ERROR=&quot;fragLoadError&quot;,e.FRAG_LOAD_TIMEOUT=&quot;fragLoadTimeOut&quot;,e.FRAG_DECRYPT_ERROR=&quot;fragDecryptError&quot;,e.FRAG_PARSING_ERROR=&quot;fragParsingError&quot;,e.REMUX_ALLOC_ERROR=&quot;remuxAllocError&quot;,e.KEY_LOAD_ERROR=&quot;keyLoadError&quot;,e.KEY_LOAD_TIMEOUT=&quot;keyLoadTimeOut&quot;,e.BUFFER_ADD_CODEC_ERROR=&quot;bufferAddCodecError&quot;,e.BUFFER_APPEND_ERROR=&quot;bufferAppendError&quot;,e.BUFFER_APPENDING_ERROR=&quot;bufferAppendingError&quot;,e.BUFFER_STALLED_ERROR=&quot;bufferStalledError&quot;,e.BUFFER_FULL_ERROR=&quot;bufferFullError&quot;,e.BUFFER_SEEK_OVER_HOLE=&quot;bufferSeekOverHole&quot;,e.BUFFER_NUDGE_ON_STALL=&quot;bufferNudgeOnStall&quot;,e.INTERNAL_EXCEPTION=&quot;internalException&quot;}(i||(i={}))},&quot;./src/events.js&quot;:function(e,t,r){&quot;use strict&quot;;r.r(t);var n={MEDIA_ATTACHING:&quot;hlsMediaAttaching&quot;,MEDIA_ATTACHED:&quot;hlsMediaAttached&quot;,MEDIA_DETACHING:&quot;hlsMediaDetaching&quot;,MEDIA_DETACHED:&quot;hlsMediaDetached&quot;,BUFFER_RESET:&quot;hlsBufferReset&quot;,BUFFER_CODECS:&quot;hlsBufferCodecs&quot;,BUFFER_CREATED:&quot;hlsBufferCreated&quot;,BUFFER_APPENDING:&quot;hlsBufferAppending&quot;,BUFFER_APPENDED:&quot;hlsBufferAppended&quot;,BUFFER_EOS:&quot;hlsBufferEos&quot;,BUFFER_FLUSHING:&quot;hlsBufferFlushing&quot;,BUFFER_FLUSHED:&quot;hlsBufferFlushed&quot;,MANIFEST_LOADING:&quot;hlsManifestLoading&quot;,MANIFEST_LOADED:&quot;hlsManifestLoaded&quot;,MANIFEST_PARSED:&quot;hlsManifestParsed&quot;,LEVEL_SWITCHING:&quot;hlsLevelSwitching&quot;,LEVEL_SWITCHED:&quot;hlsLevelSwitched&quot;,LEVEL_LOADING:&quot;hlsLevelLoading&quot;,LEVEL_LOADED:&quot;hlsLevelLoaded&quot;,LEVEL_UPDATED:&quot;hlsLevelUpdated&quot;,LEVEL_PTS_UPDATED:&quot;hlsLevelPtsUpdated&quot;,AUDIO_TRACKS_UPDATED:&quot;hlsAudioTracksUpdated&quot;,AUDIO_TRACK_SWITCHING:&quot;hlsAudioTrackSwitching&quot;,AUDIO_TRACK_SWITCHED:&quot;hlsAudioTrackSwitched&quot;,AUDIO_TRACK_LOADING:&quot;hlsAudioTrackLoading&quot;,AUDIO_TRACK_LOADED:&quot;hlsAudioTrackLoaded&quot;,SUBTITLE_TRACKS_UPDATED:&quot;hlsSubtitleTracksUpdated&quot;,SUBTITLE_TRACK_SWITCH:&quot;hlsSubtitleTrackSwitch&quot;,SUBTITLE_TRACK_LOADING:&quot;hlsSubtitleTrackLoading&quot;,SUBTITLE_TRACK_LOADED:&quot;hlsSubtitleTrackLoaded&quot;,SUBTITLE_FRAG_PROCESSED:&quot;hlsSubtitleFragProcessed&quot;,INIT_PTS_FOUND:&quot;hlsInitPtsFound&quot;,FRAG_LOADING:&quot;hlsFragLoading&quot;,FRAG_LOAD_PROGRESS:&quot;hlsFragLoadProgress&quot;,FRAG_LOAD_EMERGENCY_ABORTED:&quot;hlsFragLoadEmergencyAborted&quot;,FRAG_LOADED:&quot;hlsFragLoaded&quot;,FRAG_DECRYPTED:&quot;hlsFragDecrypted&quot;,FRAG_PARSING_INIT_SEGMENT:&quot;hlsFragParsingInitSegment&quot;,FRAG_PARSING_USERDATA:&quot;hlsFragParsingUserdata&quot;,FRAG_PARSING_METADATA:&quot;hlsFragParsingMetadata&quot;,FRAG_PARSING_DATA:&quot;hlsFragParsingData&quot;,FRAG_PARSED:&quot;hlsFragParsed&quot;,FRAG_BUFFERED:&quot;hlsFragBuffered&quot;,FRAG_CHANGED:&quot;hlsFragChanged&quot;,FPS_DROP:&quot;hlsFpsDrop&quot;,FPS_DROP_LEVEL_CAPPING:&quot;hlsFpsDropLevelCapping&quot;,ERROR:&quot;hlsError&quot;,DESTROYING:&quot;hlsDestroying&quot;,KEY_LOADING:&quot;hlsKeyLoading&quot;,KEY_LOADED:&quot;hlsKeyLoaded&quot;,STREAM_STATE_TRANSITION:&quot;hlsStreamStateTransition&quot;,LIVE_BACK_BUFFER_REACHED:&quot;hlsLiveBackBufferReached&quot;};t.default=n},&quot;./src/hls.ts&quot;:function(e,t,r){&quot;use strict&quot;;function n(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&amp;&amp;n(e.prototype,t),r&amp;&amp;n(e,r),e}function a(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&amp;&amp;a(e.prototype,t),r&amp;&amp;a(e,r),e}function s(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&amp;&amp;s(e.prototype,t),r&amp;&amp;s(e,r),e}function u(e,t){var r=lt[t];return!!r&amp;&amp;!0===r[e.slice(0,4)]}function c(e,t){return MediaSource.isTypeSupported((t||&quot;video&quot;)+&#39;/mp4;codecs=&quot;&#39;+e+&#39;&quot;&#39;)}function d(e,t){for(var r=e[t],n=t-1;n&gt;=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function f(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&amp;&amp;t.programDateTime&amp;&amp;(e.programDateTime=t.endProgramDateTime),Object(He.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function m(){return window.MediaSource||window.WebKitMediaSource}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function b(e,t,r){switch(t){case&quot;audio&quot;:e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case&quot;text&quot;:e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function E(e,t,r){var n=e[t],i=e[r],a=i.startPTS;Object(He.isFiniteNumber)(a)?r&gt;t?(n.duration=a-n.start,n.duration&lt;0&amp;&amp;ze.logger.warn(&quot;negative duration computed for frag &quot;+n.sn+&quot;,level &quot;+n.level+&quot;, there should be some duration drift between playlist and fragment!&quot;)):(i.duration=n.start-a,i.duration&lt;0&amp;&amp;ze.logger.warn(&quot;negative duration computed for frag &quot;+i.sn+&quot;,level &quot;+i.level+&quot;, there should be some duration drift between playlist and fragment!&quot;)):i.start=r&gt;t?n.start+n.duration:Math.max(n.start-i.duration,0)}function _(e,t,r,n,i,a){var o=r;if(Object(He.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-r);Object(He.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var l=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.startDTS=i,t.endDTS=a,t.duration=n-r;var u=t.sn;if(!e||u&lt;e.startSN||u&gt;e.endSN)return 0;var c,d,f;for(c=u-e.startSN,d=e.fragments,d[c]=t,f=c;f&gt;0;f--)E(d,f,f-1);for(f=c;f&lt;d.length-1;f++)E(d,f,f+1);return e.PTSKnown=!0,l}function T(e,t){t.initSegment&amp;&amp;e.initSegment&amp;&amp;(t.initSegment=e.initSegment);var r,n=0;if(w(e,t,function(e,i){n=e.cc-i.cc,Object(He.isFiniteNumber)(e.startPTS)&amp;&amp;(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0}),t.PTSKnown){if(n){ze.logger.log(&quot;discontinuity sliding from playlist, take drift into account&quot;);for(var i=t.fragments,a=0;a&lt;i.length;a++)i[a].cc+=n}r?_(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):R(e,t),t.PTSKnown=e.PTSKnown}}function S(e,t,r){void 0===r&amp;&amp;(r=0);var n=-1;w(e,t,function(e,t,r){t.start=e.start,n=r});var i=t.fragments;if(n&lt;0)return void i.forEach(function(e){e.start+=r});for(var a=n+1;a&lt;i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}function w(e,t,r){if(e&amp;&amp;t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=n;o&lt;=i;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function R(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r&lt;0||r&gt;n.length))for(var a=0;a&lt;i.length;a++)i[a].start+=n[r].start}function A(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&amp;&amp;t.endSN===e.endSN&amp;&amp;(n=i),r&amp;&amp;(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}function L(e,t){for(var r=null,n=0;n&lt;e.length;n+=1){var i=e[n];if(i&amp;&amp;i.cc===t){r=i;break}}return r}function k(e,t){return At.search(e,function(e){return e.cc&lt;t?1:e.cc&gt;t?-1:0})}function D(e,t,r){var n=!1;return t&amp;&amp;t.details&amp;&amp;r&amp;&amp;(r.endCC&gt;r.startCC||e&amp;&amp;e.cc&lt;r.startCC)&amp;&amp;(n=!0),n}function P(e,t){var r=e.fragments,n=t.fragments;if(!n.length||!r.length)return void ze.logger.log(&quot;No fragments to align&quot;);var i=L(r,n[0].cc);return!i||i&amp;&amp;!i.startPTS?void ze.logger.log(&quot;No frag in previous level to align on&quot;):i}function I(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function C(e,t,r){x(e,r,t),!r.PTSKnown&amp;&amp;t&amp;&amp;O(r,t.details)}function x(e,t,r){if(D(e,r,t)){var n=P(r.details,t);n&amp;&amp;(ze.logger.log(&quot;Adjusting PTS using last level due to CC increase within current level&quot;),I(n.start,t))}}function O(e,t){if(t&amp;&amp;t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,i=(n-r)/1e3+t.fragments[0].start;Object(He.isFiniteNumber)(i)&amp;&amp;(ze.logger.log(&quot;adjusting PTS using programDateTime delta, sliding:&quot;+i.toFixed(3)),I(i,e))}}function N(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(He.isFiniteNumber)(t))return null;if(t&lt;(e[0].programDateTime||0))return null;if(t&gt;=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n&lt;e.length;++n){var i=e[n];if(U(t,r,i))return i}return null}function M(e,t,r,n){void 0===r&amp;&amp;(r=0),void 0===n&amp;&amp;(n=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&amp;&amp;!F(r,n,i)?i:At.search(t,F.bind(null,r,n))}function F(e,t,r){void 0===e&amp;&amp;(e=0),void 0===t&amp;&amp;(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n&lt;=e?1:r.start-n&gt;e&amp;&amp;r.start?-1:0}function U(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n&gt;e}function B(e){if(void 0===e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return e}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function V(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t,r){return t&amp;&amp;V(e.prototype,t),r&amp;&amp;V(e,r),e}function W(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function H(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t,r){return t&amp;&amp;H(e.prototype,t),r&amp;&amp;H(e,r),e}function z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function q(e,t){var r;try{r=new Event(&quot;addtrack&quot;)}catch(e){r=document.createEvent(&quot;Event&quot;),r.initEvent(&quot;addtrack&quot;,!1,!1)}r.track=e,t.dispatchEvent(r)}function X(e){if(e&amp;&amp;e.cues)for(;e.cues.length&gt;0;)e.removeCue(e.cues[0])}function Z(e,t){if(t&lt;e[0].endTime)return e[0];if(t&gt;e[e.length-1].endTime)return e[e.length-1];for(var r=0,n=e.length-1;r&lt;=n;){var i=Math.floor((n+r)/2);if(t&lt;e[i].endTime)n=i-1;else{if(!(t&gt;e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t&lt;t-e[n].endTime?e[r]:e[n]}function J(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Q(){var e=m();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&amp;&amp;&quot;function&quot;==typeof e.isTypeSupported&amp;&amp;e.isTypeSupported(&#39;video/mp4; codecs=&quot;avc1.42E01E,mp4a.40.2&quot;&#39;),n=!t||t.prototype&amp;&amp;&quot;function&quot;==typeof t.prototype.appendBuffer&amp;&amp;&quot;function&quot;==typeof t.prototype.remove;return!!r&amp;&amp;!!n}function $(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t,r){return t&amp;&amp;$(e.prototype,t),r&amp;&amp;$(e,r),e}function te(e){if(void 0===e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return e}function re(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ie(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&amp;&amp;ie(e.prototype,t),r&amp;&amp;ie(e,r),e}function oe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function le(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t,r){return t&amp;&amp;le(e.prototype,t),r&amp;&amp;le(e,r),e}function ce(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function de(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t,r){return t&amp;&amp;de(e.prototype,t),r&amp;&amp;de(e,r),e}function he(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ge(){this.window=window,this.state=&quot;INITIAL&quot;,this.buffer=&quot;&quot;,this.decoder=new Rr,this.regionList=[]}function pe(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(&quot;:&quot;,&quot;&quot;),r[4]):r[1]&gt;59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function ve(){this.values=Object.create(null)}function me(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if(&quot;string&quot;==typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function ye(e,t,r){function n(){var t=pe(e);if(null===t)throw new Error(&quot;Malformed timestamp: &quot;+a);return e=e.replace(/^[^\sa-zA-Z-]+/,&quot;&quot;),t}function i(){e=e.replace(/^\s+/,&quot;&quot;)}var a=e;if(i(),t.startTime=n(),i(),&quot;--\x3e&quot;!==e.substr(0,3))throw new Error(&quot;Malformed time stamp (time stamps must be separated by &#39;--\x3e&#39;): &quot;+a);e=e.substr(3),i(),t.endTime=n(),i(),function(e,t){var n=new ve;me(e,function(e,t){switch(e){case&quot;region&quot;:for(var i=r.length-1;i&gt;=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case&quot;vertical&quot;:n.alt(e,t,[&quot;rl&quot;,&quot;lr&quot;]);break;case&quot;line&quot;:var a=t.split(&quot;,&quot;),o=a[0];n.integer(e,o),n.percent(e,o)&amp;&amp;n.set(&quot;snapToLines&quot;,!1),n.alt(e,o,[&quot;auto&quot;]),2===a.length&amp;&amp;n.alt(&quot;lineAlign&quot;,a[1],[&quot;start&quot;,Lr,&quot;end&quot;]);break;case&quot;position&quot;:a=t.split(&quot;,&quot;),n.percent(e,a[0]),2===a.length&amp;&amp;n.alt(&quot;positionAlign&quot;,a[1],[&quot;start&quot;,Lr,&quot;end&quot;,&quot;line-left&quot;,&quot;line-right&quot;,&quot;auto&quot;]);break;case&quot;size&quot;:n.percent(e,t);break;case&quot;align&quot;:n.alt(e,t,[&quot;start&quot;,Lr,&quot;end&quot;,&quot;left&quot;,&quot;right&quot;])}},/:/,/\s/),t.region=n.get(&quot;region&quot;,null),t.vertical=n.get(&quot;vertical&quot;,&quot;&quot;);var i=n.get(&quot;line&quot;,&quot;auto&quot;);&quot;auto&quot;===i&amp;&amp;-1===Ar.line&amp;&amp;(i=-1),t.line=i,t.lineAlign=n.get(&quot;lineAlign&quot;,&quot;start&quot;),t.snapToLines=n.get(&quot;snapToLines&quot;,!0),t.size=n.get(&quot;size&quot;,100),t.align=n.get(&quot;align&quot;,Lr);var a=n.get(&quot;position&quot;,&quot;auto&quot;);&quot;auto&quot;===a&amp;&amp;50===Ar.position&amp;&amp;(a=&quot;start&quot;===t.align||&quot;left&quot;===t.align?0:&quot;end&quot;===t.align||&quot;right&quot;===t.align?100:50),t.position=a}(e,t)}function be(e){return e.replace(/&lt;br(?: \/)?&gt;/gi,&quot;\n&quot;)}function Ee(e,t,r,n){for(var i,a,o,s,l,u=window.VTTCue||TextTrackCue,c=0;c&lt;n.rows.length;c++)if(i=n.rows[c],o=!0,s=0,l=&quot;&quot;,!i.isEmpty()){for(var d=0;d&lt;i.chars.length;d++)i.chars[d].uchar.match(/\s/)&amp;&amp;o?s++:(l+=i.chars[d].uchar,o=!1);i.cueStartTime=t,t===r&amp;&amp;(r+=1e-4),a=new u(t,r,be(l.trim())),s&gt;=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c&gt;7?c-2:c+1,a.align=&quot;left&quot;,a.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(a)}}function _e(e){if(void 0===e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return e}function Te(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Se(e,t){return e&amp;&amp;e.label===t.name&amp;&amp;!(e.textTrack1||e.textTrack2)}function we(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}function Re(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t,r){return t&amp;&amp;Re(e.prototype,t),r&amp;&amp;Re(e,r),e}function Le(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ke(e){for(var t=[],r=0;r&lt;e.length;r++){var n=e[r];&quot;subtitles&quot;===n.kind&amp;&amp;n.label&amp;&amp;t.push(e[r])}return t}function De(e){if(void 0===e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return e}function Pe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ie(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t,r){return t&amp;&amp;Ie(e.prototype,t),r&amp;&amp;Ie(e,r),e}function xe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e){for(var t=1;t&lt;arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);&quot;function&quot;==typeof Object.getOwnPropertySymbols&amp;&amp;(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Me(e,t,r[t])})}return e}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){if(void 0===e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return e}function Ue(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Be(e,t,r){return t&amp;&amp;Ue(e.prototype,t),r&amp;&amp;Ue(e,r),e}function Ge(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}r.r(t);var je={};r.r(je),r.d(je,&quot;newCue&quot;,function(){return Ee});var Ve,Ke=r(&quot;./node_modules/url-toolkit/src/url-toolkit.js&quot;),We=r(&quot;./src/errors.ts&quot;),He=r(&quot;./src/polyfills/number-isFinite.js&quot;),Ye=r(&quot;./src/events.js&quot;),ze=r(&quot;./src/utils/logger.js&quot;),qe={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},Xe=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t&gt;1?t-1:0),n=1;n&lt;t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return&quot;object&quot;==typeof this.handledEvents&amp;&amp;this.handledEvents.length&amp;&amp;&quot;function&quot;==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&amp;&amp;this.handledEvents.forEach(function(e){if(qe[e])throw new Error(&quot;Forbidden event-name: &quot;+e);this.hls.on(e,this.onEvent)},this)},t.unregisterListeners=function(){this.isEventHandler()&amp;&amp;this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){var r=function(e,t){var r=&quot;on&quot;+e.replace(&quot;hls&quot;,&quot;&quot;);if(&quot;function&quot;!=typeof this[r])throw new Error(&quot;Event &quot;+e+&quot; has no generic handler in this &quot;+this.constructor.name+&quot; class (tried &quot;+r+&quot;)&quot;);return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){ze.logger.error(&quot;An internal error happened while handling event &quot;+e+&#39;. Error message: &quot;&#39;+t.message+&#39;&quot;. Here is a stacktrace:&#39;,t),this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.OTHER_ERROR,details:We.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),Ze=Xe;!function(e){e.MANIFEST=&quot;manifest&quot;,e.LEVEL=&quot;level&quot;,e.AUDIO_TRACK=&quot;audioTrack&quot;,e.SUBTITLE_TRACK=&quot;subtitleTrack&quot;}(Ve||(Ve={}));var Je;!function(e){e.MAIN=&quot;main&quot;,e.AUDIO=&quot;audio&quot;,e.SUBTITLE=&quot;subtitle&quot;}(Je||(Je={}));var Qe,$e=r(&quot;./src/demux/mp4demuxer.js&quot;),et=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return i(e,[{key:&quot;uri&quot;,get:function(){return!this._uri&amp;&amp;this.reluri&amp;&amp;(this._uri=Object(Ke.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();!function(e){e.AUDIO=&quot;audio&quot;,e.VIDEO=&quot;video&quot;}(Qe||(Qe={}));var tt,rt=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(e={},e[Qe.AUDIO]=!1,e[Qe.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function(e,t){var r=e.split(&quot;@&quot;,2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},t.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r&lt;16;r++)t[r]=e&gt;&gt;8*(15-r)&amp;255;return t},t.setDecryptDataFromLevelKey=function(e,t){var r=e;return e&amp;&amp;e.method&amp;&amp;e.uri&amp;&amp;!e.iv&amp;&amp;(r=new et(e.baseuri,e.reluri),r.method=e.method,r.iv=this.createInitializationVector(t)),r},o(e,[{key:&quot;url&quot;,get:function(){return!this._url&amp;&amp;this.relurl&amp;&amp;(this._url=Object(Ke.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:&quot;byteRange&quot;,get:function(){return this._byteRange?this._byteRange:[]}},{key:&quot;byteRangeStartOffset&quot;,get:function(){return this.byteRange[0]}},{key:&quot;byteRangeEndOffset&quot;,get:function(){return this.byteRange[1]}},{key:&quot;decryptdata&quot;,get:function(){if(!this.levelkey&amp;&amp;!this._decryptdata)return null;if(!this._decryptdata&amp;&amp;this.levelkey){var e=this.sn;&quot;number&quot;!=typeof e&amp;&amp;(this.levelkey&amp;&amp;&quot;AES-128&quot;===this.levelkey.method&amp;&amp;!this.levelkey.iv&amp;&amp;ze.logger.warn(&#39;missing IV for initialization segment with method=&quot;&#39;+this.levelkey.method+&#39;&quot; - compliance issue&#39;),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:&quot;endProgramDateTime&quot;,get:function(){if(null===this.programDateTime)return null;if(!Object(He.isFiniteNumber)(this.programDateTime))return null;var e=Object(He.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:&quot;encrypted&quot;,get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}(),nt=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return l(e,[{key:&quot;hasProgramDateTime&quot;,get:function(){return!(!this.fragments[0]||!Object(He.isFiniteNumber)(this.fragments[0].programDateTime))}}]),e}(),it=/^(\d+)x(\d+)$/,at=/\s*(.+?)\s*=((?:\&quot;.*?\&quot;)|.*?)(?:,|$)/g,ot=function(){function e(t){&quot;string&quot;==typeof t&amp;&amp;(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&amp;&amp;(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t&gt;Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||&quot;0x&quot;).slice(2);t=(1&amp;t.length?&quot;0&quot;:&quot;&quot;)+t;for(var r=new Uint8Array(t.length/2),n=0;n&lt;t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t&gt;Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=it.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(at.lastIndex=0;null!==(t=at.exec(e));){var n=t[2];0===n.indexOf(&#39;&quot;&#39;)&amp;&amp;n.lastIndexOf(&#39;&quot;&#39;)===n.length-1&amp;&amp;(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),st=ot,lt={audio:{a3ds:!0,&quot;ac-3&quot;:!0,&quot;ac-4&quot;:!0,alac:!0,alaw:!0,dra1:!0,&quot;dts+&quot;:!0,&quot;dts-&quot;:!0,dtsc:!0,dtse:!0,dtsh:!0,&quot;ec-3&quot;:!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,&quot;raw &quot;:!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,&quot;vc-1&quot;:!0,vp08:!0,vp09:!0}},ut=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,ct=/#EXT-X-MEDIA:(.*)/g,dt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(&quot;&quot;),&quot;g&quot;),ft=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ht=/\.(mp4|m4s|m4v|m4a)$/i,gt=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r&lt;e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(&quot;.&quot;);return r.length&gt;2?(t=r.shift()+&quot;.&quot;,t+=parseInt(r.shift()).toString(16),t+=(&quot;000&quot;+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return Ke.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n=[];ut.lastIndex=0;for(var i;null!=(i=ut.exec(t));){var a={},o=a.attrs=new st(i[1]);a.url=e.resolve(i[2],r);var s=o.decimalResolution(&quot;RESOLUTION&quot;);s&amp;&amp;(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger(&quot;AVERAGE-BANDWIDTH&quot;)||o.decimalInteger(&quot;BANDWIDTH&quot;),a.name=o.NAME,function(e,t){[&quot;video&quot;,&quot;audio&quot;].forEach(function(r){var n=e.filter(function(e){return u(e,r)});if(n.length){var i=n.filter(function(e){return 0===e.lastIndexOf(&quot;avc1&quot;,0)||0===e.lastIndexOf(&quot;mp4a&quot;,0)});t[r+&quot;Codec&quot;]=i.length&gt;0?i[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}([].concat((o.CODECS||&quot;&quot;).split(/[ ,]+/)),a),a.videoCodec&amp;&amp;-1!==a.videoCodec.indexOf(&quot;avc1&quot;)&amp;&amp;(a.videoCodec=e.convertAVC1ToAVCOTI(a.videoCodec)),n.push(a)}return n},e.parseMasterPlaylistMedia=function(t,r,n,i){void 0===i&amp;&amp;(i=[]);var a,o=[],s=0;for(ct.lastIndex=0;null!==(a=ct.exec(t));){var l=new st(a[1]);if(l.TYPE===n){var u={id:s++,groupId:l[&quot;GROUP-ID&quot;],name:l.NAME||l.LANGUAGE,type:n,default:&quot;YES&quot;===l.DEFAULT,autoselect:&quot;YES&quot;===l.AUTOSELECT,forced:&quot;YES&quot;===l.FORCED,lang:l.LANGUAGE};if(l.URI&amp;&amp;(u.url=e.resolve(l.URI,r)),i.length){var c=e.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,i){var a,o,s,l=0,u=0,c=new nt(t),h=0,g=null,p=new rt,v=null;for(dt.lastIndex=0;null!==(a=dt.exec(e));){var m=a[1];if(m){p.duration=parseFloat(m);var y=(&quot; &quot;+a[2]).slice(1);p.title=y||null,p.tagList.push(y?[&quot;INF&quot;,m,y]:[&quot;INF&quot;,m])}else if(a[3]){if(Object(He.isFiniteNumber)(p.duration)){var b=l++;p.type=n,p.start=u,s&amp;&amp;(p.levelkey=s),p.sn=b,p.level=r,p.cc=h,p.urlId=i,p.baseurl=t,p.relurl=(&quot; &quot;+a[3]).slice(1),f(p,g),c.fragments.push(p),g=p,u+=p.duration,p=new rt}}else if(a[4]){var E=(&quot; &quot;+a[4]).slice(1);g?p.setByteRange(E,g):p.setByteRange(E)}else if(a[5])p.rawProgramDateTime=(&quot; &quot;+a[5]).slice(1),p.tagList.push([&quot;PROGRAM-DATE-TIME&quot;,p.rawProgramDateTime]),null===v&amp;&amp;(v=c.fragments.length);else{if(!(a=a[0].match(ft))){ze.logger.warn(&quot;No matches on slow regex match for level playlist!&quot;);continue}for(o=1;o&lt;a.length&amp;&amp;void 0===a[o];o++);var _=(&quot; &quot;+a[o+1]).slice(1),T=(&quot; &quot;+a[o+2]).slice(1);switch(a[o]){case&quot;#&quot;:p.tagList.push(T?[_,T]:[_]);break;case&quot;PLAYLIST-TYPE&quot;:c.type=_.toUpperCase();break;case&quot;MEDIA-SEQUENCE&quot;:l=c.startSN=parseInt(_);break;case&quot;TARGETDURATION&quot;:c.targetduration=parseFloat(_);break;case&quot;VERSION&quot;:c.version=parseInt(_);break;case&quot;EXTM3U&quot;:break;case&quot;ENDLIST&quot;:c.live=!1;break;case&quot;DIS&quot;:h++,p.tagList.push([&quot;DIS&quot;]);break;case&quot;DISCONTINUITY-SEQ&quot;:h=parseInt(_);break;case&quot;KEY&quot;:var S=_,w=new st(S),R=w.enumeratedString(&quot;METHOD&quot;),A=w.URI,L=w.hexadecimalInteger(&quot;IV&quot;);R&amp;&amp;(s=new et(t,A),A&amp;&amp;[&quot;AES-128&quot;,&quot;SAMPLE-AES&quot;,&quot;SAMPLE-AES-CENC&quot;].indexOf(R)&gt;=0&amp;&amp;(s.method=R,s.key=null,s.iv=L));break;case&quot;START&quot;:var k=new st(_),D=k.decimalFloatingPoint(&quot;TIME-OFFSET&quot;);Object(He.isFiniteNumber)(D)&amp;&amp;(c.startTimeOffset=D);break;case&quot;MAP&quot;:var P=new st(_);p.relurl=P.URI,P.BYTERANGE&amp;&amp;p.setByteRange(P.BYTERANGE),p.baseurl=t,p.level=r,p.type=n,p.sn=&quot;initSegment&quot;,c.initSegment=p,p=new rt,p.rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:ze.logger.warn(&quot;line parsed but not handled: &quot;+a)}}}return p=g,p&amp;&amp;!p.relurl&amp;&amp;(c.fragments.pop(),u-=p.duration),c.totalduration=u,c.averagetargetduration=u/c.fragments.length,c.endSN=l-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=h,!c.initSegment&amp;&amp;c.fragments.length&amp;&amp;c.fragments.every(function(e){return ht.test(e.relurl)})&amp;&amp;(ze.logger.warn(&quot;MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX&quot;),p=new rt,p.relurl=c.fragments[0].relurl,p.baseurl=t,p.level=r,p.type=n,p.sn=&quot;initSegment&quot;,c.initSegment=p,c.needSidxRanges=!0),v&amp;&amp;d(c.fragments,v),c},e}(),pt=window,vt=pt.performance,mt=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MANIFEST_LOADING,Ye.default.LEVEL_LOADING,Ye.default.AUDIO_TRACK_LOADING,Ye.default.SUBTITLE_TRACK_LOADING)||this,r.loaders={},r}h(t,e),t.canHaveQualityLevels=function(e){return e!==Ve.AUDIO_TRACK&amp;&amp;e!==Ve.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case Ve.AUDIO_TRACK:return Je.AUDIO;case Ve.SUBTITLE_TRACK:return Je.SUBTITLE;default:return Je.MAIN}},t.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&amp;&amp;0!==r.indexOf(&quot;data:&quot;)||(r=t.url),r};var r=t.prototype;return r.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},r.getInternalLoader=function(e){return this.loaders[e.type]},r.resetInternalLoader=function(e){this.loaders[e]&amp;&amp;delete this.loaders[e]},r.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&amp;&amp;t.destroy(),this.resetInternalLoader(e)}},r.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},r.onManifestLoading=function(e){this.load({url:e.url,type:Ve.MANIFEST,level:0,id:null,responseType:&quot;text&quot;})},r.onLevelLoading=function(e){this.load({url:e.url,type:Ve.LEVEL,level:e.level,id:e.id,responseType:&quot;text&quot;})},r.onAudioTrackLoading=function(e){this.load({url:e.url,type:Ve.AUDIO_TRACK,level:null,id:e.id,responseType:&quot;text&quot;})},r.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:Ve.SUBTITLE_TRACK,level:null,id:e.id,responseType:&quot;text&quot;})},r.load=function(e){var t=this.hls.config;ze.logger.debug(&quot;Loading playlist of type &quot;+e.type+&quot;, level: &quot;+e.level+&quot;, id: &quot;+e.id);var r=this.getInternalLoader(e);if(r){var n=r.context;if(n&amp;&amp;n.url===e.url)return ze.logger.trace(&quot;playlist request ongoing&quot;),!1;ze.logger.warn(&quot;aborting previous loader for type: &quot;+e.type),r.abort()}var i,a,o,s;switch(e.type){case Ve.MANIFEST:i=t.manifestLoadingMaxRetry,a=t.manifestLoadingTimeOut,o=t.manifestLoadingRetryDelay,s=t.manifestLoadingMaxRetryTimeout;break;case Ve.LEVEL:i=0,s=0,o=0,a=t.levelLoadingTimeOut;break;default:i=t.levelLoadingMaxRetry,a=t.levelLoadingTimeOut,o=t.levelLoadingRetryDelay,s=t.levelLoadingMaxRetryTimeout}r=this.createInternalLoader(e);var l={timeout:a,maxRetry:i,retryDelay:o,maxRetryDelay:s},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return ze.logger.debug(&quot;Calling internal loader delegate for URL: &quot;+e.url),r.load(e,l,u),!0},r.loadsuccess=function(e,t,r,n){if(void 0===n&amp;&amp;(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),&quot;string&quot;!=typeof e.data)throw new Error(&#39;expected responseType of &quot;text&quot; for PlaylistLoader&#39;);var i=e.data;if(t.tload=vt.now(),0!==i.indexOf(&quot;#EXTM3U&quot;))return void this._handleManifestParsingError(e,r,&quot;no EXTM3U delimiter&quot;,n);i.indexOf(&quot;#EXTINF:&quot;)&gt;0||i.indexOf(&quot;#EXT-X-TARGETDURATION:&quot;)&gt;0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n)},r.loaderror=function(e,t,r){void 0===r&amp;&amp;(r=null),this._handleNetworkError(t,r,!1,e)},r.loadtimeout=function(e,t,r){void 0===r&amp;&amp;(r=null),this._handleNetworkError(t,r,!0)},r._handleMasterPlaylist=function(e,r,n,i){var a=this.hls,o=e.data,s=t.getResponseUrl(e,n),l=gt.parseMasterPlaylist(o,s);if(!l.length)return void this._handleManifestParsingError(e,n,&quot;no level found in manifest&quot;,i);var u=l.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),c=gt.parseMasterPlaylistMedia(o,s,&quot;AUDIO&quot;,u),d=gt.parseMasterPlaylistMedia(o,s,&quot;SUBTITLES&quot;);if(c.length){var f=!1;c.forEach(function(e){e.url||(f=!0)}),!1===f&amp;&amp;l[0].audioCodec&amp;&amp;!l[0].attrs.AUDIO&amp;&amp;(ze.logger.log(&quot;audio codec signaled in quality level, but no embedded audio track signaled, create one&quot;),c.unshift({type:&quot;main&quot;,name:&quot;main&quot;,default:!1,autoselect:!1,forced:!1,id:-1}))}a.trigger(Ye.default.MANIFEST_LOADED,{levels:l,audioTracks:c,subtitles:d,url:s,stats:r,networkDetails:i})},r._handleTrackOrLevelPlaylist=function(e,r,n,i){var a=this.hls,o=n.id,s=n.level,l=n.type,u=t.getResponseUrl(e,n),c=Object(He.isFiniteNumber)(o)?o:0,d=Object(He.isFiniteNumber)(s)?s:c,f=t.mapContextToLevelType(n),h=gt.parseLevelPlaylist(e.data,u,d,f,c);if(h.tload=r.tload,l===Ve.MANIFEST){var g={url:u,details:h};a.trigger(Ye.default.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:r,networkDetails:i})}if(r.tparsed=vt.now(),h.needSidxRanges){var p=h.initSegment.url;return void this.load({url:p,isSidxRequest:!0,type:l,level:s,levelDetails:h,id:o,rangeStart:0,rangeEnd:2048,responseType:&quot;arraybuffer&quot;})}n.levelDetails=h,this._handlePlaylistLoaded(e,r,n,i)},r._handleSidxRequest=function(e,t){if(&quot;string&quot;==typeof e.data)throw new Error(&quot;sidx request must be made with responseType of array buffer&quot;);var r=$e.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach(function(e,t){var r=e.info;if(i){var n=i.fragments[t];0===n.byteRange.length&amp;&amp;n.setByteRange(String(1+r.end-r.start)+&quot;@&quot;+String(r.start))}}),i&amp;&amp;i.initSegment.setByteRange(String(r.moovEndOffset)+&quot;@0&quot;)}},r._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.NETWORK_ERROR,details:We.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r._handleNetworkError=function(e,t,r,n){void 0===r&amp;&amp;(r=!1),void 0===n&amp;&amp;(n=null),ze.logger.info(&quot;A network error occured while loading a &quot;+e.type+&quot;-type playlist&quot;);var i,a,o=this.getInternalLoader(e);switch(e.type){case Ve.MANIFEST:i=r?We.ErrorDetails.MANIFEST_LOAD_TIMEOUT:We.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case Ve.LEVEL:i=r?We.ErrorDetails.LEVEL_LOAD_TIMEOUT:We.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case Ve.AUDIO_TRACK:i=r?We.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:We.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}o&amp;&amp;(o.abort(),this.resetInternalLoader(e.type));var s={type:We.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:e.url,loader:o,context:e,networkDetails:t};n&amp;&amp;(s.response=n),this.hls.trigger(Ye.default.ERROR,s)},r._handlePlaylistLoaded=function(e,r,n,i){var a=n.type,o=n.level,s=n.id,l=n.levelDetails;if(!l||!l.targetduration)return void this._handleManifestParsingError(e,n,&quot;invalid target duration&quot;,i);if(t.canHaveQualityLevels(n.type))this.hls.trigger(Ye.default.LEVEL_LOADED,{details:l,level:o||0,id:s||0,stats:r,networkDetails:i});else switch(a){case Ve.AUDIO_TRACK:this.hls.trigger(Ye.default.AUDIO_TRACK_LOADED,{details:l,id:s,stats:r,networkDetails:i});break;case Ve.SUBTITLE_TRACK:this.hls.trigger(Ye.default.SUBTITLE_TRACK_LOADED,{details:l,id:s,stats:r,networkDetails:i})}},t}(Ze),yt=mt,bt=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.FRAG_LOADING)||this,r.loaders={},r}g(t,e);var r=t.prototype;return r.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&amp;&amp;n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s=n[r];s&amp;&amp;(ze.logger.warn(&quot;abort previous fragment loader for type: &quot;+r),s.abort()),s=n[r]=t.loader=i.fLoader?new a(i):new o(i);var l,u,c;l={url:t.url,frag:t,responseType:&quot;arraybuffer&quot;,progressData:!1};var d=t.byteRangeStartOffset,f=t.byteRangeEndOffset;Object(He.isFiniteNumber)(d)&amp;&amp;Object(He.isFiniteNumber)(f)&amp;&amp;(l.rangeStart=d,l.rangeEnd=f),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(l,u,c)},r.loadsuccess=function(e,t,r,n){void 0===n&amp;&amp;(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(Ye.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},r.loaderror=function(e,t,r){void 0===r&amp;&amp;(r=null);var n=t.frag,i=n.loader;i&amp;&amp;i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.NETWORK_ERROR,details:We.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.loadtimeout=function(e,t,r){void 0===r&amp;&amp;(r=null);var n=t.frag,i=n.loader;i&amp;&amp;i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.NETWORK_ERROR,details:We.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.loadprogress=function(e,t,r,n){void 0===n&amp;&amp;(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(Ye.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},t}(Ze),Et=bt,_t=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.KEY_LOADING)||this,r.loaders={},r.decryptkey=null,r.decrypturl=null,r}p(t,e);var r=t.prototype;return r.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&amp;&amp;r.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(!t.decryptdata)return void ze.logger.warn(&quot;Missing decryption data on fragment in onKeyLoading&quot;);var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&amp;&amp;(ze.logger.warn(&quot;abort previous key loader for type:&quot;+r),n.abort()),!i)return void ze.logger.warn(&quot;key uri is falsy&quot;);t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:t,responseType:&quot;arraybuffer&quot;},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&amp;&amp;(t.decryptdata.key=this.decryptkey,this.hls.trigger(Ye.default.KEY_LOADED,{frag:t}))},r.loadsuccess=function(e,t,r){var n=r.frag;if(!n.decryptdata)return void ze.logger.error(&quot;after key load, decryptdata unset&quot;);this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(Ye.default.KEY_LOADED,{frag:n})},r.loaderror=function(e,t){var r=t.frag,n=r.loader;n&amp;&amp;n.abort(),delete this.loaders[r.type],this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.NETWORK_ERROR,details:We.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},r.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&amp;&amp;n.abort(),delete this.loaders[r.type],this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.NETWORK_ERROR,details:We.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(Ze),Tt=_t,St={NOT_LOADED:&quot;NOT_LOADED&quot;,APPENDING:&quot;APPENDING&quot;,PARTIAL:&quot;PARTIAL&quot;,OK:&quot;OK&quot;},wt=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.BUFFER_APPENDED,Ye.default.FRAG_BUFFERED,Ye.default.FRAG_LOADED)||this,r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}v(t,e);var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,Ze.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS&lt;=e&amp;&amp;e&lt;=a.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},r.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach(function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){r=s.time;for(var l=0;l&lt;r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(o.body);break}}}})},r.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&amp;&amp;(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},r.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s&lt;r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e&gt;=n&amp;&amp;t&lt;=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e&lt;i&amp;&amp;t&gt;n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t&lt;=n)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+&quot;_&quot;+e.level+&quot;_&quot;+e.urlId+&quot;_&quot;+e.sn},r.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach(function(s){var l=i.fragments[s];i.isPartial(l)&amp;&amp;(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e&gt;=r&amp;&amp;e&lt;=n&amp;&amp;(t=Math.min(e-r,n-e),o&lt;=t&amp;&amp;(a=l.body,o=t)))}),a},r.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=St.NOT_LOADED;return void 0!==r&amp;&amp;(n=r.buffered?!0===this.isPartial(r)?St.PARTIAL:St.OK:St.APPENDING),n},r.isPartial=function(e){return!0===e.buffered&amp;&amp;(void 0!==e.range.video&amp;&amp;!0===e.range.video.partial||void 0!==e.range.audio&amp;&amp;!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a&lt;r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e&gt;=n&amp;&amp;t&lt;=i)return!0;if(t&lt;=n)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(He.isFiniteNumber)(t.sn)&amp;&amp;!t.bitrateTest&amp;&amp;(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(Ze),Rt={search:function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r&lt;=n;){i=(r+n)/2|0,a=e[i];var o=t(a);if(o&gt;0)r=i+1;else{if(!(o&lt;0))return a;n=i-1}}return null}},At=Rt,Lt=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n&lt;r.length;n++)if(t&gt;=r.start(n)&amp;&amp;t&lt;=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,i=e.buffered,a=[];for(n=0;n&lt;i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end});var n=[];if(r)for(var i=0;i&lt;e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o&lt;r?e[i].end&gt;o&amp;&amp;(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,l=0,u=t,c=t,d=0;d&lt;n.length;d++){var f=n[d].start,h=n[d].end;if(t+r&gt;=f&amp;&amp;t&lt;h)u=f,c=h,l=c-t;else if(t+r&lt;f){s=f;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),kt=r(&quot;./node_modules/eventemitter3/index.js&quot;),Dt=r(&quot;./node_modules/webworkify-webpack/index.js&quot;),Pt=r(&quot;./src/demux/demuxer-inline.js&quot;),It=r(&quot;./src/utils/get-self-scope.js&quot;),Ct=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t&gt;1?t-1:0),n=1;n&lt;t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},t}(kt.EventEmitter),xt=Object(It.getSelfScope)(),Ot=m()||{isTypeSupported:function(){return!1}},Nt=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new Ct,i=e.config,a=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(Ye.default.FRAG_DECRYPTED,a),n.on(Ye.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(Ye.default.FRAG_PARSING_DATA,a),n.on(Ye.default.FRAG_PARSED,a),n.on(Ye.default.ERROR,a),n.on(Ye.default.FRAG_PARSING_METADATA,a),n.on(Ye.default.FRAG_PARSING_USERDATA,a),n.on(Ye.default.INIT_PTS_FOUND,a);var o={mp4:Ot.isTypeSupported(&quot;video/mp4&quot;),mpeg:Ot.isTypeSupported(&quot;audio/mpeg&quot;),mp3:Ot.isTypeSupported(&#39;audio/mp4; codecs=&quot;mp3&quot;&#39;)},s=navigator.vendor;if(i.enableWorker&amp;&amp;&quot;undefined&quot;!=typeof Worker){ze.logger.log(&quot;demuxing in webworker&quot;);var l;try{l=this.w=Dt(&quot;./src/demux/demuxer-worker.js&quot;),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener(&quot;message&quot;,this.onwmsg),l.onerror=function(t){e.trigger(Ye.default.ERROR,{type:We.ErrorTypes.OTHER_ERROR,details:We.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:&quot;demuxerWorker&quot;,err:{message:t.message+&quot; (&quot;+t.filename+&quot;:&quot;+t.lineno+&quot;)&quot;}})},l.postMessage({cmd:&quot;init&quot;,typeSupported:o,vendor:s,id:t,config:JSON.stringify(i)})}catch(e){ze.logger.warn(&quot;Error in worker:&quot;,e),ze.logger.error(&quot;Error while initializing DemuxerWorker, fallback on DemuxerInline&quot;),l&amp;&amp;xt.URL.revokeObjectURL(l.objectURL),this.demuxer=new Pt.default(n,o,i,s),this.w=void 0}}else this.demuxer=new Pt.default(n,o,i,s)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener(&quot;message&quot;,this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&amp;&amp;(t.destroy(),this.demuxer=null)}var r=this.observer;r&amp;&amp;(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,i,a,o,s){var l=this.w,u=Object(He.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,c=i.decryptdata,d=this.frag,f=!(d&amp;&amp;i.cc===d.cc),h=!(d&amp;&amp;i.level===d.level),g=d&amp;&amp;i.sn===d.sn+1,p=!h&amp;&amp;g;if(f&amp;&amp;ze.logger.log(this.id+&quot;:discontinuity detected&quot;),h&amp;&amp;ze.logger.log(this.id+&quot;:switch detected&quot;),this.frag=i,l)l.postMessage({cmd:&quot;demux&quot;,data:e,decryptdata:c,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:u,discontinuity:f,trackSwitch:h,contiguous:p,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var v=this.demuxer;v&amp;&amp;v.push(e,c,t,r,n,u,f,h,p,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case&quot;init&quot;:xt.URL.revokeObjectURL(this.w.objectURL);break;case Ye.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&amp;&amp;(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}(),Mt=Nt,Ft={toString:function(e){for(var t=&quot;&quot;,r=e.length,n=0;n&lt;r;n++)t+=&quot;[&quot;+e.start(n).toFixed(3)+&quot;,&quot;+e.end(n).toFixed(3)+&quot;]&quot;;return t}},Ut=Ft,Bt=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,i=r.currentTime,a=r.seeking,o=this.seeking&amp;&amp;!a,s=!this.seeking&amp;&amp;a;if(this.seeking=a,i===e){if((s||o)&amp;&amp;(this.stalled=null),!r.paused&amp;&amp;!r.ended&amp;&amp;0!==r.playbackRate&amp;&amp;r.buffered.length){var l=Lt.bufferInfo(r,i,0),u=l.len&gt;0,c=l.nextStart||0;if(u||c){if(a){var d=l.len&gt;2,f=!c||c-i&gt;2;if(d||f)return;this.moved=!1}if(!this.moved&amp;&amp;this.stalled){var h=Math.max(c,l.start||0)-i;if(h&gt;0&amp;&amp;h&lt;=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null===n)return void(this.stalled=g);var p=g-n;!a&amp;&amp;p&gt;=250&amp;&amp;this._reportStall(l.len);var v=Lt.bufferInfo(r,i,t.maxBufferHole);this._tryFixBufferStall(v,p)}}}else if(this.moved=!0,null!==n){if(this.stallReported){var m=self.performance.now()-n;ze.logger.warn(&quot;playback not stuck anymore @&quot;+i+&quot;, after &quot;+Math.round(m)+&quot;ms&quot;),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media,a=i.currentTime,o=n.getPartialFragment(a);if(o){if(this._trySkipBufferHole(o))return}e.len&gt;r.maxBufferHole&amp;&amp;t&gt;1e3*r.highBufferWatchdogPeriod&amp;&amp;(ze.logger.warn(&quot;Trying to nudge playhead over buffer-hole&quot;),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,ze.logger.warn(&quot;Playback stalling at @&quot;+r.currentTime+&quot; due to low buffer&quot;),t.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=0,o=0;o&lt;n.buffered.length;o++){var s=n.buffered.start(o);if(i+t.maxBufferHole&gt;=a&amp;&amp;i&lt;s){var l=Math.max(s+.05,n.currentTime+.1);return ze.logger.warn(&quot;skipping hole, adjusting currentTime from &quot;+i+&quot; to &quot;+l),this.moved=!0,this.stalled=null,n.currentTime=l,e&amp;&amp;r.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:&quot;fragment loaded with buffer holes, seeking from &quot;+i+&quot; to &quot;+l,frag:e}),l}a=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i&lt;e.nudgeMaxRetry){var a=n+i*e.nudgeOffset;ze.logger.warn(&quot;Nudging &#39;currentTime&#39; from &quot;+n+&quot; to &quot;+a),r.currentTime=a,t.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else ze.logger.error(&quot;Playhead still not moving while enough data buffered @&quot;+n+&quot; after &quot;+e.nudgeMaxRetry+&quot; nudges&quot;),t.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}(),Gt=function(e){function t(t){for(var r,n=arguments.length,i=new Array(n&gt;1?n-1:0),a=1;a&lt;n;a++)i[a-1]=arguments[a];return r=e.call.apply(e,[this,t].concat(i))||this,r._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(B(r)),r}G(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&amp;&amp;(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&amp;&amp;(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&amp;&amp;(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){1===++this._tickCallCount&amp;&amp;(this.doTick(),this._tickCallCount&gt;1&amp;&amp;(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},t}(Ze),jt={STOPPED:&quot;STOPPED&quot;,STARTING:&quot;STARTING&quot;,IDLE:&quot;IDLE&quot;,PAUSED:&quot;PAUSED&quot;,KEY_LOADING:&quot;KEY_LOADING&quot;,FRAG_LOADING:&quot;FRAG_LOADING&quot;,FRAG_LOADING_WAITING_RETRY:&quot;FRAG_LOADING_WAITING_RETRY&quot;,WAITING_TRACK:&quot;WAITING_TRACK&quot;,PARSING:&quot;PARSING&quot;,PARSED:&quot;PARSED&quot;,BUFFER_FLUSHING:&quot;BUFFER_FLUSHING&quot;,ENDED:&quot;ENDED&quot;,ERROR:&quot;ERROR&quot;,WAITING_INIT_PTS:&quot;WAITING_INIT_PTS&quot;,WAITING_LEVEL:&quot;WAITING_LEVEL&quot;},Vt=function(e){function t(){return e.apply(this,arguments)||this}j(t,e);var r=t.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&amp;&amp;(e.loader&amp;&amp;e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=jt.STOPPED},r._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&amp;&amp;r&amp;&amp;!r.backtracked&amp;&amp;r.sn===t.endSN&amp;&amp;!e.nextStart){var i=n.getState(r);return i===St.PARTIAL||i===St.OK}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,i=t?t.currentTime:null,a=Lt.bufferInfo(r||t,i,this.config.maxBufferHole);if(Object(He.isFiniteNumber)(i)&amp;&amp;ze.logger.log(&quot;media seeking to &quot;+i.toFixed(3)),n===jt.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&amp;&amp;o){var s=e.maxFragLookUpTolerance,l=o.start-s,u=o.start+o.duration+s;i&lt;l||i&gt;u?(o.loader&amp;&amp;(ze.logger.log(&quot;seeking outside of buffer while fragment load in progress, cancel fragment load&quot;),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=jt.IDLE):ze.logger.log(&quot;seeking outside of buffer but within currently loaded fragment range&quot;)}}else n===jt.ENDED&amp;&amp;(0===a.len&amp;&amp;(this.fragPrevious=null,this.fragCurrent=null),this.state=jt.IDLE);t&amp;&amp;(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=jt.STOPPED,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},t}(Gt),Kt=function(e){function t(t,r){var n;return n=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHING,Ye.default.MANIFEST_LOADING,Ye.default.MANIFEST_PARSED,Ye.default.LEVEL_LOADED,Ye.default.KEY_LOADED,Ye.default.FRAG_LOADED,Ye.default.FRAG_LOAD_EMERGENCY_ABORTED,Ye.default.FRAG_PARSING_INIT_SEGMENT,Ye.default.FRAG_PARSING_DATA,Ye.default.FRAG_PARSED,Ye.default.ERROR,Ye.default.AUDIO_TRACK_SWITCHING,Ye.default.AUDIO_TRACK_SWITCHED,Ye.default.BUFFER_CREATED,Ye.default.BUFFER_APPENDED,Ye.default.BUFFER_FLUSHED)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=jt.STOPPED,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n}W(t,e);var r=t.prototype;return r.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&amp;&amp;(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t&gt;0&amp;&amp;-1===e&amp;&amp;(ze.logger.log(&quot;override startPosition with lastCurrentTime @&quot;+t.toFixed(3)),e=t),this.state=jt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=jt.STOPPED},r.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case jt.BUFFER_FLUSHING:this.fragLoadError=0;break;case jt.IDLE:this._doTickIdle();break;case jt.WAITING_LEVEL:var e=this.levels[this.level];e&amp;&amp;e.details&amp;&amp;(this.state=jt.IDLE);break;case jt.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t&gt;=r||this.media&amp;&amp;this.media.seeking)&amp;&amp;(ze.logger.log(&quot;mediaController: retryDate reached, switch back to IDLE state&quot;),this.state=jt.IDLE);break;case jt.ERROR:case jt.STOPPED:case jt.FRAG_LOADING:case jt.PARSING:case jt.PARSED:case jt.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&amp;&amp;(r||!this.startFragRequested&amp;&amp;t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=Lt.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),u=l.len;if(!(u&gt;=o)){ze.logger.trace(&quot;buffer length of &quot;+u.toFixed(3)+&quot; is below max of &quot;+o.toFixed(3)+&quot;. checking for more payload ...&quot;),this.level=e.nextLoadLevel=i;var c=a.details;if(!c||c.live&amp;&amp;this.levelLastLoaded!==i)return void(this.state=jt.WAITING_LEVEL);if(this._streamEnded(l,c)){var d={};return this.altAudio&amp;&amp;(d.type=&quot;video&quot;),this.hls.trigger(Ye.default.BUFFER_EOS,d),void(this.state=jt.ENDED)}this._fetchPayloadOrEos(n,l,c)}}}},r._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s,l=a[0].start,u=a[o-1].start+a[o-1].duration,c=t.end;if(r.initSegment&amp;&amp;!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(o&lt;d)return void ze.logger.warn(&quot;Can not start playback of a level, reason: not enough fragments &quot;+o+&quot; &lt; &quot;+d);if(null===(s=this._ensureFragmentAtLivePoint(r,c,l,u,n,a,o)))return}else c&lt;l&amp;&amp;(s=a[0]);s||(s=this._findFragment(l,n,o,a,c,u,r)),s&amp;&amp;(s.encrypted?(ze.logger.log(&quot;Loading key for &quot;+s.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],level &quot;+i),this._loadKey(s)):(ze.logger.log(&quot;Loading &quot;+s.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],level &quot;+i+&quot;, currentTime:&quot;+e.toFixed(3)+&quot;,bufferEnd:&quot;+c.toFixed(3)),this._loadFragment(s)))}},r._ensureFragmentAtLivePoint=function(e,t,r,n,i,a,o){var s,l=this.hls.config,u=this.media,c=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t&lt;Math.max(r-l.maxFragLookUpTolerance,n-c)){var d=this.liveSyncPosition=this.computeLivePosition(r,e);ze.logger.log(&quot;buffer end: &quot;+t.toFixed(3)+&quot; is located too far from the end of live sliding playlist, reset currentTime to : &quot;+d.toFixed(3)),t=d,u&amp;&amp;!u.paused&amp;&amp;u.readyState&amp;&amp;u.duration&gt;d&amp;&amp;(u.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&amp;&amp;t&gt;n&amp;&amp;u&amp;&amp;u.readyState)return null;if(this.startFragRequested&amp;&amp;!e.PTSKnown){if(i)if(e.hasProgramDateTime)ze.logger.log(&quot;live playlist, switching playlist, load frag with same PDT: &quot;+i.programDateTime),s=N(a,i.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=i.sn+1;if(f&gt;=e.startSN&amp;&amp;f&lt;=e.endSN){var h=a[f-e.startSN];i.cc===h.cc&amp;&amp;(s=h,ze.logger.log(&quot;live playlist, switching playlist, load frag with next SN: &quot;+s.sn))}s||(s=At.search(a,function(e){return i.cc-e.cc}))&amp;&amp;ze.logger.log(&quot;live playlist, switching playlist, load frag with same CC: &quot;+s.sn)}s||(s=a[Math.min(o-1,Math.round(o/2))],ze.logger.log(&quot;live playlist, switching playlist, unknown, load middle frag : &quot;+s.sn))}return s},r._findFragment=function(e,t,r,n,i,a,o){var s,l=this.hls.config;if(i&lt;a){s=M(t,n,i,i&gt;a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance)}else s=n[r-1];if(s){var u=s.sn-o.startSN,c=t&amp;&amp;s.level===t.level,d=n[u-1],f=n[u+1];if(t&amp;&amp;s.sn===t.sn)if(c&amp;&amp;!s.backtracked)if(s.sn&lt;o.endSN){var h=t.deltaPTS;h&amp;&amp;h&gt;l.maxBufferHole&amp;&amp;t.dropped&amp;&amp;u?(s=d,ze.logger.warn(&quot;Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this&quot;)):(s=f,ze.logger.log(&quot;Re-loading fragment with SN: &quot;+s.sn))}else s=null;else s.backtracked&amp;&amp;(f&amp;&amp;f.backtracked?(ze.logger.warn(&quot;Already backtracked from fragment &quot;+f.sn+&quot;, will not backtrack to fragment &quot;+s.sn+&quot;. Loading fragment &quot;+f.sn),s=f):(ze.logger.warn(&quot;Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe&quot;),s.dropped=0,d?(s=d,s.backtracked=!0):u&amp;&amp;(s=null)))}return s},r._loadKey=function(e){this.state=jt.KEY_LOADING,this.hls.trigger(Ye.default.KEY_LOADING,{frag:e})},r._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,&quot;initSegment&quot;!==e.sn&amp;&amp;(this.startFragRequested=!0),Object(He.isFiniteNumber)(e.sn)&amp;&amp;!e.bitrateTest&amp;&amp;(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===St.NOT_LOADED||t===St.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(Ye.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Mt(this.hls,&quot;main&quot;)),this.state=jt.FRAG_LOADING):t===St.APPENDING&amp;&amp;this._reduceMaxBufferLength(e.duration)&amp;&amp;this.fragmentTracker.removeFragment(e)},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,Je.MAIN)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},r._checkFragmentChanged=function(){var e,t,r=this.media;if(r&amp;&amp;r.readyState&amp;&amp;!1===r.seeking&amp;&amp;(t=r.currentTime,t&gt;this.lastCurrentTime&amp;&amp;(this.lastCurrentTime=t),Lt.isBuffered(r,t)?e=this.getBufferedFrag(t):Lt.isBuffered(r,t+.1)&amp;&amp;(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(Ye.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&amp;&amp;this.fragPlaying.level===i||this.hls.trigger(Ye.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.immediateLevelSwitch=function(){if(ze.logger.log(&quot;immediateLevelSwitch&quot;),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&amp;&amp;r.loader&amp;&amp;r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.immediateLevelSwitchEnd=function(){var e=this.media;e&amp;&amp;e.buffered.length&amp;&amp;(this.immediateSwitch=!1,Lt.isBuffered(e,e.currentTime)&amp;&amp;(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.nextLevelSwitch=function(){var e=this.media;if(e&amp;&amp;e.readyState){var t,r,n;if(r=this.getBufferedFrag(e.currentTime),r&amp;&amp;r.startPTS&gt;1&amp;&amp;this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&amp;&amp;this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((n=this.getBufferedFrag(e.currentTime+t))&amp;&amp;(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&amp;&amp;s.loader&amp;&amp;s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},r.flushMainBuffer=function(e,t){this.state=jt.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&amp;&amp;(r.type=&quot;video&quot;),this.hls.trigger(Ye.default.BUFFER_FLUSHING,r)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(&quot;seeking&quot;,this.onvseeking),t.addEventListener(&quot;seeked&quot;,this.onvseeked),t.addEventListener(&quot;ended&quot;,this.onvended);var r=this.config;this.levels&amp;&amp;r.autoStartLoad&amp;&amp;this.hls.startLoad(r.startPosition),this.gapController=new Bt(r,t,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&amp;&amp;e.ended&amp;&amp;(ze.logger.log(&quot;MSE detaching and video ended, reset startPosition&quot;),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&amp;&amp;t.forEach(function(e){e.details&amp;&amp;e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&amp;&amp;(e.removeEventListener(&quot;seeking&quot;,this.onvseeking),e.removeEventListener(&quot;seeked&quot;,this.onvseeked),e.removeEventListener(&quot;ended&quot;,this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(He.isFiniteNumber)(t)&amp;&amp;ze.logger.log(&quot;media seeked to &quot;+t.toFixed(3)),this.tick()},r.onManifestLoading=function(){ze.logger.log(&quot;trigger BUFFER_RESET&quot;),this.hls.trigger(Ye.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&amp;&amp;(-1!==t.indexOf(&quot;mp4a.40.2&quot;)&amp;&amp;(r=!0),-1!==t.indexOf(&quot;mp4a.40.5&quot;)&amp;&amp;(n=!0))}),this.audioCodecSwitch=r&amp;&amp;n,this.audioCodecSwitch&amp;&amp;ze.logger.log(&quot;both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC&quot;),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&amp;&amp;this.hls.startLoad(i.startPosition)},r.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],a=t.totalduration,o=0;if(ze.logger.log(&quot;level &quot;+r+&quot; loaded [&quot;+t.startSN+&quot;,&quot;+t.endSN+&quot;],duration:&quot;+a),t.live){var s=i.details;s&amp;&amp;t.fragments.length&gt;0?(T(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&amp;&amp;Object(He.isFiniteNumber)(o)?ze.logger.log(&quot;live playlist sliding:&quot;+o.toFixed(3)):(ze.logger.log(&quot;live playlist - outdated PTS, unknown sliding&quot;),C(this.fragPrevious,n,t))):(ze.logger.log(&quot;live playlist - first load, unknown sliding&quot;),t.PTSKnown=!1,C(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=r,this.hls.trigger(Ye.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;Object(He.isFiniteNumber)(l)?(l&lt;0&amp;&amp;(ze.logger.log(&quot;negative start time offset &quot;+l+&quot;, count from end of last fragment&quot;),l=o+a+l),ze.logger.log(&quot;start time offset found in playlist, adjust startPosition to &quot;+l),this.startPosition=l):t.live?(this.startPosition=this.computeLivePosition(o,t),ze.logger.log(&quot;configure startPosition to &quot;+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===jt.WAITING_LEVEL&amp;&amp;(this.state=jt.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===jt.KEY_LOADING&amp;&amp;(this.state=jt.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===jt.FRAG_LOADING&amp;&amp;t&amp;&amp;&quot;main&quot;===a.type&amp;&amp;a.level===t.level&amp;&amp;a.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,ze.logger.log(&quot;Loaded &quot;+t.sn+&quot; of [&quot;+l.startSN+&quot; ,&quot;+l.endSN+&quot;],level &quot;+t.level),a.bitrateTest&amp;&amp;r.nextLoadLevel)this.state=jt.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(Ye.default.FRAG_BUFFERED,{stats:o,frag:t,id:&quot;main&quot;}),this.tick();else if(&quot;initSegment&quot;===a.sn)this.state=jt.IDLE,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(Ye.default.FRAG_BUFFERED,{stats:o,frag:t,id:&quot;main&quot;}),this.tick();else{ze.logger.log(&quot;Parsing &quot;+t.sn+&quot; of [&quot;+l.startSN+&quot; ,&quot;+l.endSN+&quot;],level &quot;+t.level+&quot;, cc &quot;+t.cc),this.state=jt.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&amp;&amp;(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var u=!(i&amp;&amp;i.seeking)&amp;&amp;(l.PTSKnown||!l.live),c=l.initSegment?l.initSegment.data:[],d=this._getAudioCodec(s),f=this.demuxer=this.demuxer||new Mt(this.hls,&quot;main&quot;);f.push(e.payload,c,d,s.videoCodec,t,l.totalduration,u)}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&amp;&amp;&quot;main&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===jt.PARSING){var n,i,a=e.tracks;if(a.audio&amp;&amp;this.altAudio&amp;&amp;delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&amp;&amp;this.audioCodecSwap&amp;&amp;(ze.logger.log(&quot;swapping playlist audio codec&quot;),o=-1!==o.indexOf(&quot;mp4a.40.5&quot;)?&quot;mp4a.40.2&quot;:&quot;mp4a.40.5&quot;),this.audioCodecSwitch&amp;&amp;1!==i.metadata.channelCount&amp;&amp;-1===s.indexOf(&quot;firefox&quot;)&amp;&amp;(o=&quot;mp4a.40.5&quot;),-1!==s.indexOf(&quot;android&quot;)&amp;&amp;&quot;audio/mpeg&quot;!==i.container&amp;&amp;(o=&quot;mp4a.40.2&quot;,ze.logger.log(&quot;Android: force audio codec to &quot;+o)),i.levelCodec=o,i.id=e.id}i=a.video,i&amp;&amp;(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(Ye.default.BUFFER_CODECS,a);for(n in a){i=a[n],ze.logger.log(&quot;main track:&quot;+n+&quot;,container:&quot;+i.container+&quot;,codecs[level/parsed]=[&quot;+i.levelCodec+&quot;/&quot;+i.codec+&quot;]&quot;);var l=i.initSegment;l&amp;&amp;(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Ye.default.BUFFER_APPENDING,{type:n,data:l,parent:&quot;main&quot;,content:&quot;initSegment&quot;}))}this.tick()}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&amp;&amp;&quot;main&quot;===e.id&amp;&amp;n.sn===r.sn&amp;&amp;n.level===r.level&amp;&amp;(&quot;audio&quot;!==e.type||!this.altAudio)&amp;&amp;this.state===jt.PARSING){var i=this.levels[this.level],a=r;if(Object(He.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&amp;&amp;a.addElementaryStream(Qe.AUDIO),!0===e.hasVideo&amp;&amp;a.addElementaryStream(Qe.VIDEO),ze.logger.log(&quot;Parsed &quot;+e.type+&quot;,PTS:[&quot;+e.startPTS.toFixed(3)+&quot;,&quot;+e.endPTS.toFixed(3)+&quot;],DTS:[&quot;+e.startDTS.toFixed(3)+&quot;/&quot;+e.endDTS.toFixed(3)+&quot;],nb:&quot;+e.nb+&quot;,dropped:&quot;+(e.dropped||0)),&quot;video&quot;===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)ze.logger.warn(&quot;Already backtracked on this fragment, appending with the gap&quot;,a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return ze.logger.warn(&quot;missing video frame(s), backtracking fragment&quot;,a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=jt.IDLE,this.fragPrevious=a,void this.tick();ze.logger.warn(&quot;missing video frame(s) on first frag, appending with gap&quot;,a.sn)}else a.backtracked=!1;var s=_(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(Ye.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&amp;&amp;r.length&amp;&amp;t.state===jt.PARSING&amp;&amp;(t.appended=!0,t.pendingBuffering=!0,l.trigger(Ye.default.BUFFER_APPENDING,{type:e.type,data:r,parent:&quot;main&quot;,content:&quot;data&quot;}))}),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&amp;&amp;&quot;main&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===jt.PARSING&amp;&amp;(this.stats.tparsed=window.performance.now(),this.state=jt.PARSED,this._checkAppendedParsed())},r.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){ze.logger.log(&quot;switching on main audio, use media.buffered to schedule main fragment loading&quot;),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&amp;&amp;(ze.logger.log(&quot;switching to main audio track, cancel main fragment load&quot;),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),this.state=jt.IDLE}var i=this.hls;i.trigger(Ye.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;}),i.trigger(Ye.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},r.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&amp;&amp;this.mediaBuffer!==n&amp;&amp;(ze.logger.log(&quot;switching on alternate audio, use video.buffered to schedule main fragment loading&quot;),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];&quot;main&quot;===o.id?(r=a,t=o,&quot;video&quot;===a&amp;&amp;(this.videoBuffer=n[a].buffer)):i=!0}i&amp;&amp;t?(ze.logger.log(&quot;alternate track found, use &quot;+r+&quot;.buffered to schedule main fragment loading&quot;),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.onBufferAppended=function(e){if(&quot;main&quot;===e.parent){var t=this.state;t!==jt.PARSING&amp;&amp;t!==jt.PARSED||(this.pendingBuffering=e.pending&gt;0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(!(this.state!==jt.PARSED||this.appended&amp;&amp;this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;ze.logger.log(&quot;main buffered : &quot;+Ut.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(Ye.default.FRAG_BUFFERED,{stats:r,frag:e,id:&quot;main&quot;}),this.state=jt.IDLE}this.tick()}},r.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||&quot;main&quot;===t.type){var r=!!this.media&amp;&amp;Lt.isBuffered(this.media,this.media.currentTime)&amp;&amp;Lt.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case We.ErrorDetails.FRAG_LOAD_ERROR:case We.ErrorDetails.FRAG_LOAD_TIMEOUT:case We.ErrorDetails.KEY_LOAD_ERROR:case We.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1&lt;=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);ze.logger.warn(&quot;mediaController: frag loading failed, retry in &quot;+n+&quot; ms&quot;),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=jt.FRAG_LOADING_WAITING_RETRY}else ze.logger.error(&quot;mediaController: &quot;+e.details+&quot; reaches max retry, redispatch as fatal ...&quot;),e.fatal=!0,this.state=jt.ERROR;break;case We.ErrorDetails.LEVEL_LOAD_ERROR:case We.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==jt.ERROR&amp;&amp;(e.fatal?(this.state=jt.ERROR,ze.logger.warn(&quot;streamController: &quot;+e.details+&quot;,switch to &quot;+this.state+&quot; state ...&quot;)):e.levelRetry||this.state!==jt.WAITING_LEVEL||(this.state=jt.IDLE));break;case We.ErrorDetails.BUFFER_FULL_ERROR:&quot;main&quot;!==e.parent||this.state!==jt.PARSING&amp;&amp;this.state!==jt.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=jt.IDLE):(ze.logger.warn(&quot;buffer full error also media.currentTime is not buffered, flush everything&quot;),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},r._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength&gt;=e&amp;&amp;(t.maxMaxBufferLength/=2,ze.logger.warn(&quot;main:reduce max buffer length to &quot;+t.maxMaxBufferLength+&quot;s&quot;),!0)},r._checkBuffer=function(){var e=this.media;if(e&amp;&amp;0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&amp;&amp;r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.onFragLoadEmergencyAborted=function(){this.state=jt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&amp;&amp;this.fragmentTracker.detectEvictedFragments(Qe.VIDEO,e.buffered),this.state=jt.IDLE,this.fragPrevious=null},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&amp;&amp;r&gt;=0&amp;&amp;(ze.logger.log(&quot;target start position not buffered, seek to buffered.start(0) &quot;+r+&quot; from current time &quot;+t+&quot; &quot;),e.currentTime=r)},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&amp;&amp;(ze.logger.log(&quot;swapping playlist audio codec&quot;),t&amp;&amp;(t=-1!==t.indexOf(&quot;mp4a.40.5&quot;)?&quot;mp4a.40.2&quot;:&quot;mp4a.40.5&quot;)),t},K(t,[{key:&quot;state&quot;,set:function(e){if(this.state!==e){var t=this.state;this._state=e,ze.logger.log(&quot;main stream-controller: &quot;+t+&quot;-&gt;&quot;+e),this.hls.trigger(Ye.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:&quot;currentLevel&quot;,get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:&quot;nextBufferedFrag&quot;,get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:&quot;nextLevel&quot;,get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:&quot;liveSyncPosition&quot;,get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(Vt),Wt=Kt,Ht=window,Yt=(Ht.performance,function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MANIFEST_LOADED,Ye.default.LEVEL_LOADED,Ye.default.AUDIO_TRACK_SWITCHED,Ye.default.FRAG_LOADED,Ye.default.ERROR)||this,r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,tt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}z(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&amp;&amp;(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&amp;&amp;e.forEach(function(e){e.loadError=0;var t=e.details;t&amp;&amp;t.live&amp;&amp;(e.details=void 0)}),null!==this.timer&amp;&amp;this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,r=[],n=[],i={},a=null,o=!1,s=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,s=s||!!e.audioCodec,tt&amp;&amp;e.audioCodec&amp;&amp;-1!==e.audioCodec.indexOf(&quot;mp4a.40.34&quot;)&amp;&amp;(e.audioCodec=void 0),a=i[e.bitrate],a?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&amp;&amp;(t.AUDIO&amp;&amp;(s=!0,b(a||e,&quot;audio&quot;,t.AUDIO)),t.SUBTITLES&amp;&amp;b(a||e,&quot;text&quot;,t.SUBTITLES))}),o&amp;&amp;s&amp;&amp;(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||c(t,&quot;audio&quot;))&amp;&amp;(!r||c(r,&quot;video&quot;))}),e.audioTracks&amp;&amp;(n=e.audioTracks.filter(function(e){return!e.audioCodec||c(e.audioCodec,&quot;audio&quot;)}),n.forEach(function(e,t){e.id=t})),r.length&gt;0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var l=0;l&lt;r.length;l++)if(r[l].bitrate===t){this._firstLevel=l,ze.logger.log(&quot;manifest loaded,&quot;+r.length+&quot; level(s) found, first bitrate:&quot;+t);break}this.hls.trigger(Ye.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:&quot;no level with compatible codecs found in manifest&quot;})},r.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e&gt;=0&amp;&amp;e&lt;t.length){if(this.clearTimer(),this.currentLevelIndex!==e){ze.logger.log(&quot;switching to level &quot;+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(Ye.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;r.trigger(Ye.default.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(Ye.default.ERROR,{type:We.ErrorTypes.OTHER_ERROR,details:We.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:&quot;invalid level idx&quot;})},r.onError=function(e){if(e.fatal)return void(e.type===We.ErrorTypes.NETWORK_ERROR&amp;&amp;this.clearTimer());var t,r=!1,n=!1;switch(e.details){case We.ErrorDetails.FRAG_LOAD_ERROR:case We.ErrorDetails.FRAG_LOAD_TIMEOUT:case We.ErrorDetails.KEY_LOAD_ERROR:case We.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case We.ErrorDetails.LEVEL_LOAD_ERROR:case We.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case We.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&amp;&amp;this.recoverLevel(e,t,r,n)},r.recoverLevel=function(e,t,r,n){var i,a,o,s=this,l=this.hls.config,u=e.details,c=this._levels[t];if(c.loadError++,c.fragmentError=n,r){if(!(this.levelRetryCount+1&lt;=l.levelLoadingMaxRetry))return ze.logger.error(&quot;level controller, cannot recover from &quot;+u+&quot; error&quot;),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},a),e.levelRetry=!0,this.levelRetryCount++,ze.logger.warn(&quot;level controller, &quot;+u+&quot;, retry in &quot;+a+&quot; ms, current retry count is &quot;+this.levelRetryCount)}(r||n)&amp;&amp;(i=c.url.length,i&gt;1&amp;&amp;c.loadError&lt;i?(c.urlId=(c.urlId+1)%i,c.details=void 0,ze.logger.warn(&quot;level controller, &quot;+u+&quot; for level &quot;+t+&quot;: switching to redundant URL-id &quot;+c.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,ze.logger.warn(&quot;level controller, &quot;+u+&quot;: switch to &quot;+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&amp;&amp;(ze.logger.warn(&quot;level controller, &quot;+u+&quot;: reload a fragment&quot;),this.currentLevelIndex=null))},r.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&amp;&amp;&quot;main&quot;===t.type){var r=this._levels[t.level];void 0!==r&amp;&amp;(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},r.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=A(i.details,n,e.stats.trequest);ze.logger.log(&quot;live playlist, reload in &quot;+Math.round(a)+&quot; ms&quot;),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.clearTimer()}},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&amp;&amp;r.audioGroupIds){for(var n=-1,i=0;i&lt;r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&amp;&amp;(r.urlId=n,this.startLoad())}},r.loadLevel=function(){if(ze.logger.debug(&quot;call to loadLevel&quot;),null!==this.currentLevelIndex&amp;&amp;this.canload){var e=this._levels[this.currentLevelIndex];if(&quot;object&quot;==typeof e&amp;&amp;e.url.length&gt;0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];ze.logger.log(&quot;Attempt loading level index &quot;+t+&quot; with URL-id &quot;+r),this.hls.trigger(Ye.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Y(t,[{key:&quot;levels&quot;,get:function(){return this._levels}},{key:&quot;level&quot;,get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&amp;&amp;(e=Math.min(e,t.length-1),this.currentLevelIndex===e&amp;&amp;t[e].details||this.setLevelInternal(e))}},{key:&quot;manualLevel&quot;,get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&amp;&amp;(this._startLevel=e),-1!==e&amp;&amp;(this.level=e)}},{key:&quot;firstLevel&quot;,get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:&quot;startLevel&quot;,get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:&quot;nextLoadLevel&quot;,get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&amp;&amp;(this.hls.nextAutoLevel=e)}}]),t}(Ze)),zt=r(&quot;./src/demux/id3.js&quot;),qt=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHING,Ye.default.FRAG_PARSING_METADATA,Ye.default.LIVE_BACK_BUFFER_REACHED)||this,r.id3Track=void 0,r.media=void 0,r}J(t,e);var r=t.prototype;return r.destroy=function(){Ze.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){X(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t&lt;e.length;t++){var r=e[t];if(&quot;metadata&quot;===r.kind&amp;&amp;&quot;id3&quot;===r.label)return q(r,this.media),r}return this.media.addTextTrack(&quot;metadata&quot;,&quot;id3&quot;)},r.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode=&quot;hidden&quot;);for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i&lt;r.length;i++){var a=zt.default.getID3Frames(r[i].data);if(a){var o=r[i].pts,s=i&lt;r.length-1?r[i+1].pts:t.endPTS;o===s?s+=1e-4:o&gt;s&amp;&amp;(ze.logger.warn(&quot;detected an id3 sample with endTime &lt; startTime, adjusting endTime to (startTime + 0.25)&quot;),s=o+.25);for(var l=0;l&lt;a.length;l++){var u=a[l];if(!zt.default.isTimeStampFrame(u)){var c=new n(o,s,&quot;&quot;);c.value=u,this.id3Track.addCue(c)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&amp;&amp;r.cues&amp;&amp;r.cues.length){var n=Z(r.cues,t);if(n)for(;r.cues[0]!==n;)r.removeCue(r.cues[0])}},t}(Ze),Xt=qt,Zt=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Jt=Zt,Qt=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Jt(t),this.fast_=new Jt(r)}var t=e.prototype;return t.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8*t,n=e/1e3,i=r/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&amp;&amp;e.getTotalWeight()&gt;=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),$t=Qt,er=window,tr=er.performance,rr=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.FRAG_LOADING,Ye.default.FRAG_LOADED,Ye.default.FRAG_BUFFERED,Ye.default.ERROR)||this,r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(te(r)),r}re(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),Ze.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag;if(&quot;main&quot;===t.type&amp;&amp;(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,a=i.config,o=t.level,s=i.levels[o].details.live;s?(r=a.abrEwmaFastLive,n=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,n=a.abrEwmaSlowVoD),this._bwEstimator=new $t(i,n,r,a.abrEwmaDefaultEstimate)}},r._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,i=e.minAutoLevel;if(!n||n.stats&amp;&amp;n.stats.aborted)return ze.logger.warn(&quot;frag loader destroy or aborted, disarm abandonRules&quot;),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(t&amp;&amp;a&amp;&amp;(!t.paused&amp;&amp;0!==t.playbackRate||!t.readyState)&amp;&amp;r.autoLevel&amp;&amp;r.level){var o=tr.now()-a.trequest,s=Math.abs(t.playbackRate);if(o&gt;500*r.duration/s){var l=e.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=l[r.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*d/8)),h=t.currentTime,g=(f-a.loaded)/u,p=(Lt.bufferInfo(t,h,e.config.maxBufferHole).end-h)/s;if(p&lt;2*r.duration/s&amp;&amp;g&gt;p){var v,m;for(m=r.level-1;m&gt;i;m--){var y=l[m].realBitrate?Math.max(l[m].realBitrate,l[m].bitrate):l[m].bitrate;if(r.duration*y/(6.4*u)&lt;p)break}v&lt;g&amp;&amp;(ze.logger.warn(&quot;loading too slow, abort fragment loading and switch to level &quot;+m+&quot;:fragLoadedDelay[&quot;+m+&quot;]&lt;fragLoadedDelay[&quot;+(r.level-1)+&quot;];bufferStarvationDelay:&quot;+v.toFixed(1)+&quot;&lt;&quot;+g.toFixed(1)+&quot;:&quot;+p.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(Ye.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},r.onFragLoaded=function(e){var t=e.frag;if(&quot;main&quot;===t.type&amp;&amp;Object(He.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&amp;&amp;&quot;main&quot;===r.type&amp;&amp;Object(He.isFiniteNumber)(r.sn)&amp;&amp;(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;ze.logger.log(&quot;latency/loading/parsing/append/kbps:&quot;+Math.round(t.tfirst-t.trequest)+&quot;/&quot;+Math.round(t.tload-t.tfirst)+&quot;/&quot;+Math.round(t.tparsed-t.tload)+&quot;/&quot;+Math.round(t.tbuffered-t.tparsed)+&quot;/&quot;+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},r.onError=function(e){switch(e.details){case We.ErrorDetails.FRAG_LOAD_ERROR:case We.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r._findBestLevel=function(e,t,r,n,i,a,o,s,l){for(var u=i;u&gt;=n;u--){var c=l[u];if(c){var d=c.details,f=d?d.totalduration/d.fragments.length:t,h=!!d&amp;&amp;d.live,g=void 0;g=u&lt;=e?o*r:s*r;var p=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=p*f/g;if(ze.logger.trace(&quot;level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: &quot;+u+&quot;/&quot;+Math.round(g)+&quot;/&quot;+p+&quot;/&quot;+f+&quot;/&quot;+a+&quot;/&quot;+v),g&gt;p&amp;&amp;(!v||h&amp;&amp;!this.bitrateTestDelay||v&lt;a))return u}}return-1},ee(t,[{key:&quot;nextAutoLevel&quot;,get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&amp;&amp;t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&amp;&amp;(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:&quot;_nextABRAutoLevel&quot;,get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&amp;&amp;0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(Lt.bufferInfo(a,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,c,i,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f&gt;=0)return f;ze.logger.trace(&quot;rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering&quot;);var h=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,p=n.abrBandWidthUpFactor;if(0===d){var v=this.bitrateTestDelay;if(v){h=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-v,ze.logger.trace(&quot;bitrate test took &quot;+Math.round(1e3*v)+&quot;ms, set first fragment max fetchDuration to &quot;+Math.round(1e3*h)+&quot; ms&quot;),g=p=1}}return f=this._findBestLevel(o,s,c,i,t,d+h,g,p,r),Math.max(f,0)}}]),t}(Ze),nr=rr,ir=m(),ar=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MEDIA_ATTACHING,Ye.default.MEDIA_DETACHING,Ye.default.MANIFEST_PARSED,Ye.default.BUFFER_RESET,Ye.default.BUFFER_APPENDING,Ye.default.BUFFER_CODECS,Ye.default.BUFFER_EOS,Ye.default.BUFFER_FLUSHING,Ye.default.LEVEL_PTS_UPDATED,Ye.default.LEVEL_UPDATED)||this,r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){ze.logger.log(&quot;media source opened&quot;),r.hls.trigger(Ye.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&amp;&amp;e.removeEventListener(&quot;sourceopen&quot;,r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){ze.logger.log(&quot;media source closed&quot;)},r._onMediaSourceEnded=function(){ze.logger.log(&quot;media source ended&quot;)},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&amp;&amp;r.sourceBuffer.audio){var e=r.sourceBuffer.audio;ze.logger.warn(&quot;change mpeg audio timestamp offset from &quot;+e.timestampOffset+&quot; to &quot;+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&amp;&amp;r.doFlush(),r._needsEos&amp;&amp;r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),i={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error(&quot;handling source buffer update end error: source buffer for &quot;+o+&quot; uninitilized and unable to update buffered TimeRanges.&quot;);i[o]=s.buffered}r.hls.trigger(Ye.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&amp;&amp;r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){ze.logger.error(&quot;sourceBuffer error:&quot;,e),r.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}ne(t,e);var r=t.prototype;return r.destroy=function(){Ze.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if(&quot;audio&quot;===t&amp;&amp;r&amp;&amp;&quot;audio/mpeg&quot;===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error(&quot;Level PTS Updated and source buffer for audio uninitalized&quot;);if(Math.abs(n.timestampOffset-e.start)&gt;.1){var i=n.updating;try{n.abort()}catch(e){ze.logger.warn(&quot;can not abort audio buffer: &quot;+e)}i?this.audioTimestampOffset=e.start:(ze.logger.warn(&quot;change mpeg audio timestamp offset from &quot;+n.timestampOffset+&quot; to &quot;+e.start),n.timestampOffset=e.start)}}},r.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,ze.logger.log(this.bufferCodecEventsExpected+&quot; bufferCodec event(s) expected&quot;)},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&amp;&amp;ir){var r=this.mediaSource=new ir;r.addEventListener(&quot;sourceopen&quot;,this._onMediaSourceOpen),r.addEventListener(&quot;sourceended&quot;,this._onMediaSourceEnded),r.addEventListener(&quot;sourceclose&quot;,this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.onMediaDetaching=function(){ze.logger.log(&quot;media source detaching&quot;);var e=this.mediaSource;if(e){if(&quot;open&quot;===e.readyState)try{e.endOfStream()}catch(e){ze.logger.warn(&quot;onMediaDetaching:&quot;+e.message+&quot; while calling endOfStream&quot;)}e.removeEventListener(&quot;sourceopen&quot;,this._onMediaSourceOpen),e.removeEventListener(&quot;sourceended&quot;,this._onMediaSourceEnded),e.removeEventListener(&quot;sourceclose&quot;,this._onMediaSourceClose),this.media&amp;&amp;(this._objectUrl&amp;&amp;window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute(&quot;src&quot;),this.media.load()):ze.logger.warn(&quot;media.src was changed by a third party - skip cleanup&quot;)),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(Ye.default.MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&amp;&amp;!e||2===r)&amp;&amp;(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&amp;&amp;(this.mediaSource&amp;&amp;this.mediaSource.removeSourceBuffer(r),r.removeEventListener(&quot;updateend&quot;,this._onSBUpdateEnd),r.removeEventListener(&quot;error&quot;,this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&amp;&amp;&quot;open&quot;===this.mediaSource.readyState&amp;&amp;this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error(&quot;createSourceBuffers called when mediaSource was null&quot;);for(var n in e)if(!t[n]){var i=e[n];if(!i)throw Error(&quot;source buffer exists for track &quot;+n+&quot;, however track does not&quot;);var a=i.levelCodec||i.codec,o=i.container+&quot;;codecs=&quot;+a;ze.logger.log(&quot;creating sourceBuffer(&quot;+o+&quot;)&quot;);try{var s=t[n]=r.addSourceBuffer(o);s.addEventListener(&quot;updateend&quot;,this._onSBUpdateEnd),s.addEventListener(&quot;error&quot;,this._onSBUpdateError),this.tracks[n]={buffer:s,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){ze.logger.error(&quot;error while trying to add sourceBuffer:&quot;+e.message),this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(Ye.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&amp;&amp;!r.ended&amp;&amp;(r.ended=!0,ze.logger.log(t+&quot; sourceBuffer now EOS&quot;))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||&quot;open&quot;!==t.readyState)return void(this._needsEos=!1);for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}ze.logger.log(&quot;all media data are available, signal endOfStream() to MediaSource and stop loading fragment&quot;);try{t.endOfStream()}catch(e){ze.logger.warn(&quot;exception while calling mediaSource.endOfStream()&quot;)}this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:&quot;video&quot;}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:&quot;audio&quot;})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&amp;&amp;!(e&lt;0)){if(!this.media)return void ze.logger.error(&quot;flushLiveBackBuffer called without attaching media&quot;);for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a&gt;=0;a--){var o=n[a],s=r[o];if(s){var l=s.buffered;l.length&gt;0&amp;&amp;i&gt;l.start(0)&amp;&amp;this.removeBufferRange(o,s,0,i)&amp;&amp;this.hls.trigger(Ye.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}}}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length&gt;0&amp;&amp;(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&amp;&amp;this.media&amp;&amp;this.mediaSource&amp;&amp;this.sourceBuffer&amp;&amp;0!==this.media.readyState&amp;&amp;&quot;open&quot;===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&amp;&amp;!0===n.updating)return}e=this.media.duration,null===this._msDuration&amp;&amp;(this._msDuration=this.mediaSource.duration),!0===this._live&amp;&amp;!0===t.liveDurationInfinity?(ze.logger.log(&quot;Media Source duration is set to Infinity&quot;),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration&gt;this._msDuration&amp;&amp;this._levelDuration&gt;e||!Object(He.isFiniteNumber)(e))&amp;&amp;(ze.logger.log(&quot;Updating Media Source duration to &quot;+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&amp;&amp;(t+=i.buffered.length)}}catch(e){ze.logger.error(&quot;error while accessing sourceBuffer.buffered&quot;)}this.appended=t,this.hls.trigger(Ye.default.BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void ze.logger.error(&quot;trying to append although a media error occured, flush segment and abort&quot;);if(!this.appending){var i=r.shift();if(i)try{var a=n[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(n){ze.logger.error(&quot;error while trying to append buffer:&quot;+n.message),r.unshift(i);var o={type:We.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:&quot;&quot;,fatal:!1};22===n.code?(this.segments=[],o.details=We.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=We.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError&gt;e.appendErrorMaxRetry&amp;&amp;(ze.logger.log(&quot;fail &quot;+e.appendErrorMaxRetry+&quot; times to append segment in sourceBuffer&quot;),this.segments=[],o.fatal=!0)),t.trigger(Ye.default.ERROR,o)}}}},r.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i=&quot;null&quot;;if(this.media&amp;&amp;(i=this.media.currentTime.toFixed(3)),ze.logger.log(&quot;flushBuffer,pos/start/end: &quot;+i+&quot;/&quot;+e+&quot;/&quot;+t),this.flushBufferCounter&gt;=this.appended)return ze.logger.warn(&quot;abort flushing too many retries&quot;),!0;var a=n[r];if(a){if(a.ended=!1,a.updating)return ze.logger.warn(&quot;cannot flush, sb updating in progress&quot;),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return ze.logger.log(&quot;buffer flushed&quot;),!0},r.removeBufferRange=function(e,t,r,n){try{for(var i=0;i&lt;t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,r),l=Math.min(o,n);if(Math.min(l,o)-s&gt;.5){var u=&quot;null&quot;;return this.media&amp;&amp;(u=this.media.currentTime.toString()),ze.logger.log(&quot;sb remove &quot;+e+&quot; [&quot;+s+&quot;,&quot;+l+&quot;], of [&quot;+a+&quot;,&quot;+o+&quot;], pos:&quot;+u),t.remove(s,l),!0}}}catch(e){ze.logger.warn(&quot;removeBufferRange failed&quot;,e)}return!1},t}(Ze),or=ar,sr=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.FPS_DROP_LEVEL_CAPPING,Ye.default.MEDIA_ATTACHING,Ye.default.MANIFEST_PARSED,Ye.default.BUFFER_CODECS,Ye.default.MEDIA_DETACHING)||this,r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}oe(t,e);var r=t.prototype;return r.destroy=function(){this.hls.config.capLevelToPlayerSize&amp;&amp;(this.media=null,this.stopCapping())},r.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&amp;&amp;this.restrictedLevels.push(e.droppedLevel)},r.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&amp;&amp;e.video&amp;&amp;this.startCapping()},r.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&amp;&amp;e.video&amp;&amp;this.startCapping()},r.onLevelsUpdated=function(e){this.levels=e.levels},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping&gt;this.autoLevelCapping&amp;&amp;t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return t.isLevelAllowed(i,r.restrictedLevels)&amp;&amp;i&lt;=e});return t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&amp;&amp;(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(e,t){return void 0===t&amp;&amp;(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&amp;&amp;!e.length)return-1;for(var n=e.length-1,i=0;i&lt;e.length;i+=1){var a=e[i];if((a.width&gt;=t||a.height&gt;=r)&amp;&amp;function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(a,e[i+1])){n=i;break}}return n},ae(t,[{key:&quot;mediaWidth&quot;,get:function(){var e,r=this.media;return r&amp;&amp;(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:&quot;mediaHeight&quot;,get:function(){var e,r=this.media;return r&amp;&amp;(e=r.height||r.clientHeight||r.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:&quot;contentScaleFactor&quot;,get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(Ze),lr=sr,ur=window,cr=ur.performance,dr=function(e){function t(t){return e.call(this,t,Ye.default.MEDIA_ATTACHING)||this}se(t,e);var r=t.prototype;return r.destroy=function(){this.timer&amp;&amp;clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){&quot;function&quot;==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&amp;&amp;(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},r.checkFPS=function(e,t,r){var n=cr.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(Ye.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s&gt;0&amp;&amp;a&gt;l.config.fpsDroppedMonitoringThreshold*o){var u=l.currentLevel;ze.logger.warn(&quot;drop FPS ratio greater than max allowed value for currentLevel: &quot;+u),u&gt;0&amp;&amp;(-1===l.autoLevelCapping||l.autoLevelCapping&gt;=u)&amp;&amp;(u-=1,l.trigger(Ye.default.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(Ze),fr=dr,hr=window,gr=hr.performance,pr=hr.XMLHttpRequest,vr=function(){function e(e){e&amp;&amp;e.xhrSetup&amp;&amp;(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&amp;&amp;4!==e.readyState&amp;&amp;(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:gr.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new pr;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open(&quot;GET&quot;,t.url,!0),n(e,t.url)}e.readyState||e.open(&quot;GET&quot;,t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&amp;&amp;e.setRequestHeader(&quot;Range&quot;,&quot;bytes=&quot;+t.rangeStart+&quot;-&quot;+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&amp;&amp;r&gt;=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&amp;&amp;(n.tfirst=Math.max(gr.now(),n.trequest)),4===r){var o=t.status;if(o&gt;=200&amp;&amp;o&lt;300){n.tload=Math.max(n.tfirst,gr.now());var s,l;&quot;arraybuffer&quot;===i.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,i,t)}else n.retry&gt;=a.maxRetry||o&gt;=400&amp;&amp;o&lt;499?(ze.logger.error(o+&quot; while loading &quot;+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(ze.logger.warn(o+&quot; while loading &quot;+i.url+&quot;, retrying in &quot;+this.retryDelay+&quot;...&quot;),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){ze.logger.warn(&quot;timeout while loading &quot;+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&amp;&amp;(r.total=e.total);var n=this.callbacks.onProgress;n&amp;&amp;n(r,this.context,null,t)},e}(),mr=vr,yr=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MANIFEST_LOADING,Ye.default.MANIFEST_PARSED,Ye.default.AUDIO_TRACK_LOADED,Ye.default.AUDIO_TRACK_SWITCHED,Ye.default.LEVEL_LOADED,Ye.default.ERROR)||this,r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}ce(t,e);var r=t.prototype;return r.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},r.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(Ye.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},r.onAudioTrackLoaded=function(e){if(e.id&gt;=this.tracks.length)return void ze.logger.warn(&quot;Invalid audio track id:&quot;,e.id);if(ze.logger.log(&quot;audioTrack &quot;+e.id+&quot; loaded&quot;),this.tracks[e.id].details=e.details,e.details.live&amp;&amp;!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&amp;&amp;this.hasInterval()&amp;&amp;this.clearInterval()},r.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&amp;&amp;this.audioGroupId!==t&amp;&amp;(this.audioGroupId=t)},r.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&amp;&amp;(this.audioGroupId=r,this._selectInitialAudioTrack())}},r.onError=function(e){e.type===We.ErrorTypes.NETWORK_ERROR&amp;&amp;(e.fatal&amp;&amp;this.clearInterval(),e.details===We.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&amp;&amp;(ze.logger.warn(&quot;Network failure on audio-track id:&quot;,e.context.id),this._handleLoadError()))},r._setAudioTrack=function(e){if(this._trackId===e&amp;&amp;this.tracks[this._trackId].details)return void ze.logger.debug(&quot;Same id as current audio-track passed, and track details available -&gt; no-op&quot;);if(e&lt;0||e&gt;=this.tracks.length)return void ze.logger.warn(&quot;Invalid id passed to audio-track controller&quot;);var t=this.tracks[e];ze.logger.log(&quot;Now switching to audio-track index &quot;+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(Ye.default.AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)},r.doTick=function(){this._updateTrack(this._trackId)},r._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&amp;&amp;(n=r.name),this._selectDefaultTrack){var i=t.filter(function(e){return e.default});i.length?t=i:ze.logger.warn(&quot;No default audio tracks defined&quot;)}var a=!1,o=function(){t.forEach(function(t){a||e.audioGroupId&amp;&amp;t.groupId!==e.audioGroupId||n&amp;&amp;n!==t.name||(e._setAudioTrack(t.id),a=!0)})};o(),a||(n=null,o()),a||(ze.logger.error(&quot;No track found for running audio group-ID: &quot;+this.audioGroupId),this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:We.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},r._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&amp;&amp;!t.live)&amp;&amp;!!r},r._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;ze.logger.log(&quot;loading audio-track playlist for id: &quot;+r),this.hls.trigger(Ye.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},r._updateTrack=function(e){if(!(e&lt;0||e&gt;=this.tracks.length)){this.clearInterval(),this._trackId=e,ze.logger.log(&quot;trying to update audio-track &quot;+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},r._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;ze.logger.warn(&quot;Loading failed on audio track id: &quot;+e+&quot;, group-id: &quot;+i+&#39;, name/language: &quot;&#39;+r+&#39;&quot; / &quot;&#39;+n+&#39;&quot;&#39;);for(var a=e,o=0;o&lt;this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===r){a=o;break}}if(a===e)return void ze.logger.warn(&#39;No fallback audio-track found for name/language: &quot;&#39;+r+&#39;&quot; / &quot;&#39;+n+&#39;&quot;&#39;);ze.logger.log(&quot;Attempting audio-track fallback id:&quot;,a,&quot;group-id:&quot;,this.tracks[a].groupId),this._setAudioTrack(a)},ue(t,[{key:&quot;audioTracks&quot;,get:function(){return this.tracks}},{key:&quot;audioTrack&quot;,get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(Gt),br=yr,Er=window,_r=Er.performance,Tr=function(e){function t(t,r){var n;return n=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHING,Ye.default.AUDIO_TRACKS_UPDATED,Ye.default.AUDIO_TRACK_SWITCHING,Ye.default.AUDIO_TRACK_LOADED,Ye.default.KEY_LOADED,Ye.default.FRAG_LOADED,Ye.default.FRAG_PARSING_INIT_SEGMENT,Ye.default.FRAG_PARSING_DATA,Ye.default.FRAG_PARSED,Ye.default.ERROR,Ye.default.BUFFER_RESET,Ye.default.BUFFER_CREATED,Ye.default.BUFFER_APPENDED,Ye.default.BUFFER_FLUSHED,Ye.default.INIT_PTS_FOUND)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=jt.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}he(t,e);var r=t.prototype;return r.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;&quot;main&quot;===t&amp;&amp;(this.initPTS[r]=n,this.videoTrackCC=r,ze.logger.log(&quot;InitPTS for cc: &quot;+r+&quot; found from video track: &quot;+n),this.state===jt.WAITING_INIT_PTS&amp;&amp;this.tick())},r.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t&gt;0&amp;&amp;-1===e?(ze.logger.log(&quot;audio:override startPosition with lastCurrentTime @&quot;+t.toFixed(3)),this.state=jt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=jt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=jt.STOPPED},r.doTick=function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case jt.ERROR:case jt.PAUSED:case jt.BUFFER_FLUSHING:break;case jt.STARTING:this.state=jt.WAITING_TRACK,this.loadedmetadata=!1;break;case jt.IDLE:var a=this.tracks;if(!a)break;if(!this.media&amp;&amp;(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=Lt.bufferInfo(o,e,i.maxBufferHole),u=Lt.bufferInfo(s,e,i.maxBufferHole),c=l.len,d=l.end,f=this.fragPrevious,h=Math.min(i.maxBufferLength,i.maxMaxBufferLength),g=Math.max(h,u.len),p=this.audioSwitch,v=this.trackId;if((c&lt;g||p)&amp;&amp;v&lt;a.length){if(void 0===(r=a[v].details)){this.state=jt.WAITING_TRACK;break}if(!p&amp;&amp;this._streamEnded(l,r))return this.hls.trigger(Ye.default.BUFFER_EOS,{type:&quot;audio&quot;}),void(this.state=jt.ENDED);var m,y=r.fragments,b=y.length,E=y[0].start,_=y[b-1].start+y[b-1].duration;if(p)if(r.live&amp;&amp;!r.PTSKnown)ze.logger.log(&quot;switching audiotrack, live stream, unknown PTS,load first fragment&quot;),d=0;else if(d=e,r.PTSKnown&amp;&amp;e&lt;E){if(!(l.end&gt;E||l.nextStart))return;ze.logger.log(&quot;alt audio track ahead of main track, seek to start of alt audio track&quot;),this.media.currentTime=E+.05}if(r.initSegment&amp;&amp;!r.initSegment.data)m=r.initSegment;else if(d&lt;=E){if(m=y[0],null!==this.videoTrackCC&amp;&amp;m.cc!==this.videoTrackCC&amp;&amp;(m=k(y,this.videoTrackCC)),r.live&amp;&amp;m.loadIdx&amp;&amp;m.loadIdx===this.fragLoadIdx){var T=l.nextStart?l.nextStart:E;return ze.logger.log(&quot;no alt audio available @currentTime:&quot;+this.media.currentTime+&quot;, seeking @&quot;+(T+.05)),void(this.media.currentTime=T+.05)}}else{var S,w=i.maxFragLookUpTolerance,R=f?y[f.sn-y[0].sn+1]:void 0,A=function(e){var t=Math.min(w,e.duration);return e.start+e.duration-t&lt;=d?1:e.start-t&gt;d&amp;&amp;e.start?-1:0};d&lt;_?(d&gt;_-w&amp;&amp;(w=0),S=R&amp;&amp;!A(R)?R:At.search(y,A)):S=y[b-1],S&amp;&amp;(m=S,E=S.start,f&amp;&amp;m.level===f.level&amp;&amp;m.sn===f.sn&amp;&amp;(m.sn&lt;r.endSN?(m=y[m.sn+1-r.startSN],ze.logger.log(&quot;SN just loaded, load next one: &quot;+m.sn)):m=null))}m&amp;&amp;(m.encrypted?(ze.logger.log(&quot;Loading key for &quot;+m.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],track &quot;+v),this.state=jt.KEY_LOADING,n.trigger(Ye.default.KEY_LOADING,{frag:m})):(ze.logger.log(&quot;Loading &quot;+m.sn+&quot;, cc: &quot;+m.cc+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],track &quot;+v+&quot;, currentTime:&quot;+e+&quot;,bufferEnd:&quot;+d.toFixed(3)),this.fragCurrent=m,(p||this.fragmentTracker.getState(m)===St.NOT_LOADED)&amp;&amp;(&quot;initSegment&quot;!==m.sn&amp;&amp;(this.startFragRequested=!0),Object(He.isFiniteNumber)(m.sn)&amp;&amp;(this.nextLoadPosition=m.start+m.duration),n.trigger(Ye.default.FRAG_LOADING,{frag:m}),this.state=jt.FRAG_LOADING)))}break;case jt.WAITING_TRACK:t=this.tracks[this.trackId],t&amp;&amp;t.details&amp;&amp;(this.state=jt.IDLE);break;case jt.FRAG_LOADING_WAITING_RETRY:var L=_r.now(),D=this.retryDate;o=this.media;var P=o&amp;&amp;o.seeking;(!D||L&gt;=D||P)&amp;&amp;(ze.logger.log(&quot;audioStreamController: retryDate reached, switch back to IDLE state&quot;),this.state=jt.IDLE);break;case jt.WAITING_INIT_PTS:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var C=this.waitingFragment;if(C){var x=C.frag.cc;I!==x?(t=this.tracks[this.trackId],t.details&amp;&amp;t.details.live&amp;&amp;(ze.logger.warn(&quot;Waiting fragment CC (&quot;+x+&quot;) does not match video track CC (&quot;+I+&quot;)&quot;),this.waitingFragment=null,this.state=jt.IDLE)):(this.state=jt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=jt.IDLE;break;case jt.STOPPED:case jt.FRAG_LOADING:case jt.PARSING:case jt.PARSED:case jt.ENDED:}},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(&quot;seeking&quot;,this.onvseeking),t.addEventListener(&quot;ended&quot;,this.onvended);var r=this.config;this.tracks&amp;&amp;r.autoStartLoad&amp;&amp;this.startLoad(r.startPosition)},r.onMediaDetaching=function(){var e=this.media;e&amp;&amp;e.ended&amp;&amp;(ze.logger.log(&quot;MSE detaching and video ended, reset startPosition&quot;),this.startPosition=this.lastCurrentTime=0),e&amp;&amp;(e.removeEventListener(&quot;seeking&quot;,this.onvseeking),e.removeEventListener(&quot;ended&quot;,this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onAudioTracksUpdated=function(e){ze.logger.log(&quot;audio tracks updated&quot;),this.tracks=e.audioTracks},r.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=jt.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),t&amp;&amp;(this.audioSwitch=!0,this.state=jt.IDLE),this.tick()},r.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],i=t.totalduration,a=0;if(ze.logger.log(&quot;track &quot;+r+&quot; loaded [&quot;+t.startSN+&quot;,&quot;+t.endSN+&quot;],duration:&quot;+i),t.live){var o=n.details;o&amp;&amp;t.fragments.length&gt;0?(T(o,t),a=t.fragments[0].start,t.PTSKnown?ze.logger.log(&quot;live audio playlist sliding:&quot;+a.toFixed(3)):ze.logger.log(&quot;live audio playlist - outdated PTS, unknown sliding&quot;)):(t.PTSKnown=!1,ze.logger.log(&quot;live audio playlist - first load, unknown sliding&quot;))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(He.isFiniteNumber)(s)?(ze.logger.log(&quot;start time offset found in playlist, adjust startPosition to &quot;+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(a,t),ze.logger.log(&quot;compute startPosition for audio-track to &quot;+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===jt.WAITING_TRACK&amp;&amp;(this.state=jt.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===jt.KEY_LOADING&amp;&amp;(this.state=jt.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===jt.FRAG_LOADING&amp;&amp;t&amp;&amp;&quot;audio&quot;===r.type&amp;&amp;r.level===t.level&amp;&amp;r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,l=t.cc,u=this.config.defaultAudioCodec||n.audioCodec||&quot;mp4a.40.2&quot;,c=this.stats=e.stats;if(&quot;initSegment&quot;===s)this.state=jt.IDLE,c.tparsed=c.tbuffered=_r.now(),i.initSegment.data=e.payload,this.hls.trigger(Ye.default.FRAG_BUFFERED,{stats:c,frag:t,id:&quot;audio&quot;}),this.tick();else{this.state=jt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Mt(this.hls,&quot;audio&quot;));var d=this.initPTS[l],f=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==d){this.pendingBuffering=!0,ze.logger.log(&quot;Demuxing &quot;+s+&quot; of [&quot;+i.startSN+&quot; ,&quot;+i.endSN+&quot;],track &quot;+o);this.demuxer.push(e.payload,f,u,null,t,a,!1,d)}else ze.logger.log(&quot;unknown video PTS for continuity counter &quot;+l+&quot;, waiting for video PTS before demuxing audio frag &quot;+s+&quot; of [&quot;+i.startSN+&quot; ,&quot;+i.endSN+&quot;],track &quot;+o),this.waitingFragment=e,this.state=jt.WAITING_INIT_PTS}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===jt.PARSING){var n,i=e.tracks;if(i.video&amp;&amp;delete i.video,n=i.audio){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(Ye.default.BUFFER_CODECS,i),ze.logger.log(&quot;audio track:audio,container:&quot;+n.container+&quot;,codecs[level/parsed]=[&quot;+n.levelCodec+&quot;/&quot;+n.codec+&quot;]&quot;);var a=n.initSegment;if(a){var o={type:&quot;audio&quot;,data:a,parent:&quot;audio&quot;,content:&quot;initSegment&quot;};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Ye.default.BUFFER_APPENDING,o))}this.tick()}}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;&quot;audio&quot;===e.type&amp;&amp;n.sn===r.sn&amp;&amp;n.level===r.level&amp;&amp;this.state===jt.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(He.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(Qe.AUDIO),ze.logger.log(&quot;parsed &quot;+e.type+&quot;,PTS:[&quot;+e.startPTS.toFixed(3)+&quot;,&quot;+e.endPTS.toFixed(3)+&quot;],DTS:[&quot;+e.startDTS.toFixed(3)+&quot;/&quot;+e.endDTS.toFixed(3)+&quot;],nb:&quot;+e.nb),_(a.details,r,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s)if(l&amp;&amp;l.readyState){var c=l.currentTime;ze.logger.log(&quot;switching audio track : currentTime:&quot;+c),c&gt;=e.startPTS&amp;&amp;(ze.logger.log(&quot;switching audio track : flushing all audio&quot;),this.state=jt.BUFFER_FLUSHING,o.trigger(Ye.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;}),u=!0,this.audioSwitch=!1,o.trigger(Ye.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(Ye.default.AUDIO_TRACK_SWITCHED,{id:i});var d=this.pendingData;if(!d)return ze.logger.warn(&quot;Apparently attempt to enqueue media payload without codec initialization data upfront&quot;),void o.trigger(Ye.default.ERROR,{type:We.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&amp;&amp;t.length&amp;&amp;d.push({type:e.type,data:t,parent:&quot;audio&quot;,content:&quot;data&quot;})}),!u&amp;&amp;d.length&amp;&amp;(d.forEach(function(e){t.state===jt.PARSING&amp;&amp;(t.pendingBuffering=!0,t.hls.trigger(Ye.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===jt.PARSING&amp;&amp;(this.stats.tparsed=_r.now(),this.state=jt.PARSED,this._checkAppendedParsed())},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(e){var t=e.tracks.audio;t&amp;&amp;(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&amp;&amp;(this.videoBuffer=e.tracks.video.buffer)},r.onBufferAppended=function(e){if(&quot;audio&quot;===e.parent){var t=this.state;t!==jt.PARSING&amp;&amp;t!==jt.PARSED||(this.pendingBuffering=e.pending&gt;0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(!(this.state!==jt.PARSED||this.appended&amp;&amp;this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=_r.now(),r.trigger(Ye.default.FRAG_BUFFERED,{stats:t,frag:e,id:&quot;audio&quot;});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&amp;&amp;ze.logger.log(&quot;audio buffered : &quot;+Ut.toString(n.buffered)),this.audioSwitch&amp;&amp;this.appended&amp;&amp;(this.audioSwitch=!1,r.trigger(Ye.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=jt.IDLE}this.tick()}},r.onError=function(e){var t=e.frag;if(!t||&quot;audio&quot;===t.type)switch(e.details){case We.ErrorDetails.FRAG_LOAD_ERROR:case We.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&amp;&amp;&quot;audio&quot;!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n&lt;=i.fragLoadingMaxRetry){this.fragLoadError=n;var a=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);ze.logger.warn(&quot;AudioStreamController: frag loading failed, retry in &quot;+a+&quot; ms&quot;),this.retryDate=_r.now()+a,this.state=jt.FRAG_LOADING_WAITING_RETRY}else ze.logger.error(&quot;AudioStreamController: &quot;+e.details+&quot; reaches max retry, redispatch as fatal ...&quot;),e.fatal=!0,this.state=jt.ERROR}break;case We.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case We.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case We.ErrorDetails.KEY_LOAD_ERROR:case We.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==jt.ERROR&amp;&amp;(this.state=e.fatal?jt.ERROR:jt.IDLE,ze.logger.warn(&quot;AudioStreamController: &quot;+e.details+&quot; while loading frag, now switching to &quot;+this.state+&quot; state ...&quot;));break;case We.ErrorDetails.BUFFER_FULL_ERROR:if(&quot;audio&quot;===e.parent&amp;&amp;(this.state===jt.PARSING||this.state===jt.PARSED)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&amp;&amp;Lt.isBuffered(o,s)&amp;&amp;Lt.isBuffered(o,s+.5)){var l=this.config;l.maxMaxBufferLength&gt;=l.maxBufferLength&amp;&amp;(l.maxMaxBufferLength/=2,ze.logger.warn(&quot;AudioStreamController: reduce max buffer length to &quot;+l.maxMaxBufferLength+&quot;s&quot;)),this.state=jt.IDLE}else ze.logger.warn(&quot;AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer&quot;),this.fragCurrent=null,this.state=jt.BUFFER_FLUSHING,this.hls.trigger(Ye.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;})}}},r.onBufferFlushed=function(){var e=this,t=this.pendingData;t&amp;&amp;t.length?(ze.logger.log(&quot;AudioStreamController: appending pending audio data after buffer flushed&quot;),t.forEach(function(t){e.hls.trigger(Ye.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=jt.PARSED):(this.state=jt.IDLE,this.fragPrevious=null,this.tick())},fe(t,[{key:&quot;state&quot;,set:function(e){if(this.state!==e){var t=this.state;this._state=e,ze.logger.log(&quot;audio stream:&quot;+t+&quot;-&gt;&quot;+e)}},get:function(){return this._state}}]),t}(Vt),Sr=Tr,wr=function(){function e(e){return&quot;string&quot;==typeof e&amp;&amp;(!!a[e.toLowerCase()]&amp;&amp;e.toLowerCase())}function t(e){return&quot;string&quot;==typeof e&amp;&amp;(!!o[e.toLowerCase()]&amp;&amp;e.toLowerCase())}function r(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function n(n,a,o){var s=this,l={};l.enumerable=!0,s.hasBeenReset=!1;var u=&quot;&quot;,c=!1,d=n,f=a,h=o,g=null,p=&quot;&quot;,v=!0,m=&quot;auto&quot;,y=&quot;start&quot;,b=50,E=&quot;middle&quot;,_=50,T=&quot;middle&quot;;Object.defineProperty(s,&quot;id&quot;,r({},l,{get:function(){return u},set:function(e){u=&quot;&quot;+e}})),Object.defineProperty(s,&quot;pauseOnExit&quot;,r({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,&quot;startTime&quot;,r({},l,{get:function(){return d},set:function(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&quot;Start time must be set to a number.&quot;);d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;endTime&quot;,r({},l,{get:function(){return f},set:function(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&quot;End time must be set to a number.&quot;);f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;text&quot;,r({},l,{get:function(){return h},set:function(e){h=&quot;&quot;+e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;region&quot;,r({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;vertical&quot;,r({},l,{get:function(){return p},set:function(t){var r=e(t);if(!1===r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);p=r,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;snapToLines&quot;,r({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;line&quot;,r({},l,{get:function(){return m},set:function(e){if(&quot;number&quot;!=typeof e&amp;&amp;e!==i)throw new SyntaxError(&quot;An invalid number or illegal string was specified.&quot;);m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;lineAlign&quot;,r({},l,{get:function(){return y},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);y=r,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;position&quot;,r({},l,{get:function(){return b},set:function(e){if(e&lt;0||e&gt;100)throw new Error(&quot;Position must be between 0 and 100.&quot;);b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;positionAlign&quot;,r({},l,{get:function(){return E},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);E=r,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;size&quot;,r({},l,{get:function(){return _},set:function(e){if(e&lt;0||e&gt;100)throw new Error(&quot;Size must be between 0 and 100.&quot;);_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,&quot;align&quot;,r({},l,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);T=r,this.hasBeenReset=!0}})),s.displayState=void 0}if(&quot;undefined&quot;!=typeof window&amp;&amp;window.VTTCue)return window.VTTCue;var i=&quot;auto&quot;,a={&quot;&quot;:!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),Rr=function(){return{decode:function(e){if(!e)return&quot;&quot;;if(&quot;string&quot;!=typeof e)throw new Error(&quot;Error - expected string data.&quot;);return decodeURIComponent(encodeURIComponent(e))}}};ve.prototype={set:function(e,t){this.get(e)||&quot;&quot;===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n&lt;r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&amp;&amp;this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&amp;&amp;(t=parseFloat(t))&gt;=0&amp;&amp;t&lt;=100)&amp;&amp;(this.set(e,t),!0)}};var Ar=new wr(0,0,0),Lr=&quot;middle&quot;===Ar.align?&quot;middle&quot;:&quot;center&quot;;ge.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=be(e);t&lt;e.length&amp;&amp;&quot;\r&quot;!==e[t]&amp;&amp;&quot;\n&quot;!==e[t];)++t;var n=e.substr(0,t);return&quot;\r&quot;===e[t]&amp;&amp;++t,&quot;\n&quot;===e[t]&amp;&amp;++t,r.buffer=e.substr(t),n}var r=this;e&amp;&amp;(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n;if(&quot;INITIAL&quot;===r.state){if(!/\r\n|\n/.test(r.buffer))return this;n=t();var i=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error(&quot;Malformed WebVTT signature.&quot;);r.state=&quot;HEADER&quot;}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:n=t(),r.state){case&quot;HEADER&quot;:/:/.test(n)?function(e){me(e,function(e,t){},/:/)}(n):n||(r.state=&quot;ID&quot;);continue;case&quot;NOTE&quot;:n||(r.state=&quot;ID&quot;);continue;case&quot;ID&quot;:if(/^NOTE($|[ \t])/.test(n)){r.state=&quot;NOTE&quot;;break}if(!n)continue;if(r.cue=new wr(0,0,&quot;&quot;),r.state=&quot;CUE&quot;,-1===n.indexOf(&quot;--\x3e&quot;)){r.cue.id=n;continue}case&quot;CUE&quot;:try{ye(n,r.cue,r.regionList)}catch(e){r.cue=null,r.state=&quot;BADCUE&quot;;continue}r.state=&quot;CUETEXT&quot;;continue;case&quot;CUETEXT&quot;:var o=-1!==n.indexOf(&quot;--\x3e&quot;);if(!n||o&amp;&amp;(a=!0)){r.oncue&amp;&amp;r.oncue(r.cue),r.cue=null,r.state=&quot;ID&quot;;continue}r.cue.text&amp;&amp;(r.cue.text+=&quot;\n&quot;),r.cue.text+=n;continue;case&quot;BADCUE&quot;:n||(r.state=&quot;ID&quot;);continue}}}catch(e){&quot;CUETEXT&quot;===r.state&amp;&amp;r.cue&amp;&amp;r.oncue&amp;&amp;r.oncue(r.cue),r.cue=null,r.state=&quot;INITIAL&quot;===r.state?&quot;BADWEBVTT&quot;:&quot;BADCUE&quot;}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||&quot;HEADER&quot;===e.state)&amp;&amp;(e.buffer+=&quot;\n\n&quot;,e.parse()),&quot;INITIAL&quot;===e.state)throw new Error(&quot;Malformed WebVTT signature.&quot;)}catch(e){throw e}return e.onflush&amp;&amp;e.onflush(),this}};var kr,Dr=ge,Pr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ir=function(e){var t=e;return Pr.hasOwnProperty(e)&amp;&amp;(t=Pr[e]),String.fromCharCode(t)},Cr=15,xr=100,Or={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Nr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Mr={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Fr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ur=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;,&quot;black&quot;,&quot;transparent&quot;];!function(e){e[e.ERROR=0]=&quot;ERROR&quot;,e[e.TEXT=1]=&quot;TEXT&quot;,e[e.WARNING=2]=&quot;WARNING&quot;,e[e.INFO=2]=&quot;INFO&quot;,e[e.DEBUG=3]=&quot;DEBUG&quot;,e[e.DATA=3]=&quot;DATA&quot;}(kr||(kr={}));var Br,Gr={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},jr=function(e){for(var t=[],r=0;r&lt;e.length;r++)t.push(e[r].toString(16));return t},Vr=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||&quot;white&quot;,this.underline=t||!1,this.italics=r||!1,this.background=n||&quot;black&quot;,this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground=&quot;white&quot;,this.underline=!1,this.italics=!1,this.background=&quot;black&quot;,this.flash=!1},t.setStyles=function(e){for(var t=[&quot;foreground&quot;,&quot;underline&quot;,&quot;italics&quot;,&quot;background&quot;,&quot;flash&quot;],r=0;r&lt;t.length;r++){var n=t[r];e.hasOwnProperty(n)&amp;&amp;(this[n]=e[n])}},t.isDefault=function(){return&quot;white&quot;===this.foreground&amp;&amp;!this.underline&amp;&amp;!this.italics&amp;&amp;&quot;black&quot;===this.background&amp;&amp;!this.flash},t.equals=function(e){return this.foreground===e.foreground&amp;&amp;this.underline===e.underline&amp;&amp;this.italics===e.italics&amp;&amp;this.background===e.background&amp;&amp;this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return&quot;color=&quot;+this.foreground+&quot;, underline=&quot;+this.underline+&quot;, italics=&quot;+this.italics+&quot;, background=&quot;+this.background+&quot;, flash=&quot;+this.flash},e}(),Kr=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||&quot; &quot;,this.penState=new Vr(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=&quot; &quot;,this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&amp;&amp;this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return&quot; &quot;===this.uchar&amp;&amp;this.penState.isDefault()},e}(),Wr=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e&lt;xr;e++)this.chars.push(new Kr);this.pos=0,this.currPenState=new Vr}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r&lt;xr;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t&lt;xr;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t&lt;xr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&amp;&amp;(this.pos=e),this.pos&lt;0?(Gr.log(&quot;ERROR&quot;,&quot;Negative cursor position &quot;+this.pos),this.pos=0):this.pos&gt;xr&amp;&amp;(Gr.log(&quot;ERROR&quot;,&quot;Too large cursor position &quot;+this.pos),this.pos=xr)},t.moveCursor=function(e){var t=this.pos+e;if(e&gt;1)for(var r=this.pos+1;r&lt;t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(&quot; &quot;,this.currPenState)},t.insertChar=function(e){e&gt;=144&amp;&amp;this.backSpace();var t=Ir(e);if(this.pos&gt;=xr)return void Gr.log(&quot;ERROR&quot;,&quot;Cannot insert &quot;+e.toString(16)+&quot; (&quot;+t+&quot;) at position &quot;+this.pos+&quot;. Skipping it!&quot;);this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},t.clearFromPos=function(e){var t;for(t=e;t&lt;xr;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r&lt;xr;r++){var n=this.chars[r].uchar;&quot; &quot;!==n&amp;&amp;(t=!1),e.push(n)}return t?&quot;&quot;:e.join(&quot;&quot;)},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Hr=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e&lt;Cr;e++)this.rows.push(new Wr);this.currRow=Cr-1,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e&lt;Cr;e++)this.rows[e].clear();this.currRow=Cr-1},t.equals=function(e){for(var t=!0,r=0;r&lt;Cr;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t&lt;Cr;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t&lt;Cr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){Gr.log(&quot;INFO&quot;,&quot;setCursor: &quot;+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){Gr.log(&quot;INFO&quot;,&quot;pacData = &quot;+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&amp;&amp;t&lt;this.nrRollUpRows-1&amp;&amp;(t=this.nrRollUpRows-1),this.nrRollUpRows&amp;&amp;this.currRow!==t){for(var r=0;r&lt;Cr;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&amp;&amp;Gr.time&amp;&amp;a&lt;Gr.time)for(var o=0;o&lt;this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:&quot;black&quot;,flash:!1};this.setPen(c)},t.setBkgData=function(e){Gr.log(&quot;INFO&quot;,&quot;bkgData = &quot;+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null===this.nrRollUpRows)return void Gr.log(&quot;DEBUG&quot;,&quot;roll_up but nrRollUpRows not set yet&quot;);Gr.log(&quot;TEXT&quot;,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Gr.log(&quot;INFO&quot;,&quot;Rolling up&quot;)},t.getDisplayText=function(e){e=e||!1;for(var t=[],r=&quot;&quot;,n=-1,i=0;i&lt;Cr;i++){var a=this.rows[i].getTextString();a&amp;&amp;(n=i+1,e?t.push(&quot;Row &quot;+n+&quot;: &#39;&quot;+a+&quot;&#39;&quot;):t.push(a.trim()))}return t.length&gt;0&amp;&amp;(r=e?&quot;[&quot;+t.join(&quot; | &quot;)+&quot;]&quot;:t.join(&quot;\n&quot;)),r},t.getTextAndFormat=function(){return this.rows},e}(),Yr=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Hr,this.nonDisplayedMemory=new Hr,this.lastOutputScreen=new Hr,this.currRollUpRow=this.displayedMemory.rows[Cr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Cr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&amp;&amp;(this.mode=e,Gr.log(&quot;INFO&quot;,&quot;MODE=&quot;+e),&quot;MODE_POP-ON&quot;===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),&quot;MODE_ROLL-UP&quot;!==this.mode&amp;&amp;(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t&lt;e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?&quot;DISP&quot;:&quot;NON_DISP&quot;;Gr.log(&quot;INFO&quot;,r+&quot;: &quot;+this.writeScreen.getDisplayText(!0)),&quot;MODE_PAINT-ON&quot;!==this.mode&amp;&amp;&quot;MODE_ROLL-UP&quot;!==this.mode||(Gr.log(&quot;TEXT&quot;,&quot;DISPLAYED: &quot;+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){Gr.log(&quot;INFO&quot;,&quot;RCL - Resume Caption Loading&quot;),this.setMode(&quot;MODE_POP-ON&quot;)},t.ccBS=function(){Gr.log(&quot;INFO&quot;,&quot;BS - BackSpace&quot;),&quot;MODE_TEXT&quot;!==this.mode&amp;&amp;(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&amp;&amp;this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){Gr.log(&quot;INFO&quot;,&quot;DER- Delete to End of Row&quot;),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){Gr.log(&quot;INFO&quot;,&quot;RU(&quot;+e+&quot;) - Roll Up&quot;),this.writeScreen=this.displayedMemory,this.setMode(&quot;MODE_ROLL-UP&quot;),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){Gr.log(&quot;INFO&quot;,&quot;FON - Flash On&quot;),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){Gr.log(&quot;INFO&quot;,&quot;RDC - Resume Direct Captioning&quot;),this.setMode(&quot;MODE_PAINT-ON&quot;)},t.ccTR=function(){Gr.log(&quot;INFO&quot;,&quot;TR&quot;),this.setMode(&quot;MODE_TEXT&quot;)},t.ccRTD=function(){Gr.log(&quot;INFO&quot;,&quot;RTD&quot;),this.setMode(&quot;MODE_TEXT&quot;)},t.ccEDM=function(){Gr.log(&quot;INFO&quot;,&quot;EDM - Erase Displayed Memory&quot;),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){Gr.log(&quot;INFO&quot;,&quot;CR - Carriage Return&quot;),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){Gr.log(&quot;INFO&quot;,&quot;ENM - Erase Non-displayed Memory&quot;),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(Gr.log(&quot;INFO&quot;,&quot;EOC - End Of Caption&quot;),&quot;MODE_POP-ON&quot;===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Gr.log(&quot;TEXT&quot;,&quot;DISP: &quot;+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){Gr.log(&quot;INFO&quot;,&quot;TO(&quot;+e+&quot;) - Tab Offset&quot;),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e&gt;=46,t.italics)t.foreground=&quot;white&quot;;else{var r=Math.floor(e/2)-16,n=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;];t.foreground=n[r]}Gr.log(&quot;INFO&quot;,&quot;MIDROW: &quot;+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&amp;&amp;(e=!1);var t=Gr.time;null!==t&amp;&amp;this.outputFilter&amp;&amp;(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&amp;&amp;this.outputFilter.dispatchCue&amp;&amp;this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&amp;&amp;(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&amp;&amp;this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),zr=function(){function e(e,t,r){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,r],this.channels=[new Yr(1,t),new Yr(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,i,a=!1;this.lastTime=e,Gr.setTime(e);for(var o=0;o&lt;t.length;o+=2)if(n=127&amp;t[o],i=127&amp;t[o+1],0!==n||0!==i){if(Gr.log(&quot;DATA&quot;,&quot;[&quot;+jr([t[o],t[o+1]])+&quot;] -&gt; (&quot;+jr([n,i])+&quot;)&quot;),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&amp;&amp;(a=this.parseChars(n,i)))if(this.currChNr&amp;&amp;this.currChNr&gt;=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else Gr.log(&quot;WARNING&quot;,&quot;No channel found yet. TEXT-MODE?&quot;);r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Gr.log(&quot;WARNING&quot;,&quot;Couldn&#39;t parse cleaned data &quot;+jr([n,i])+&quot; orig: &quot;+jr([t[o],t[o+1]])))}else this.dataCounters.padding+=2},t.parseCmd=function(e,t){var r=null,n=(20===e||28===e)&amp;&amp;t&gt;=32&amp;&amp;t&lt;=47,i=(23===e||31===e)&amp;&amp;t&gt;=33&amp;&amp;t&lt;=35;if(!n&amp;&amp;!i)return!1;if(e===this.lastCmdA&amp;&amp;t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Gr.log(&quot;DEBUG&quot;,&quot;Repeated command (&quot;+jr([e,t])+&quot;) is dropped&quot;),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&amp;&amp;a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.parseMidrow=function(e,t){var r=null;if((17===e||25===e)&amp;&amp;t&gt;=32&amp;&amp;t&lt;=47){if((r=17===e?1:2)!==this.currChNr)return Gr.log(&quot;ERROR&quot;,&quot;Mismatch channel in midrow parsing&quot;),!1;return this.channels[r-1].ccMIDROW(t),Gr.log(&quot;DEBUG&quot;,&quot;MIDROW (&quot;+jr([e,t])+&quot;)&quot;),!0}return!1},t.parsePAC=function(e,t){var r=null,n=null,i=(e&gt;=17&amp;&amp;e&lt;=23||e&gt;=25&amp;&amp;e&lt;=31)&amp;&amp;t&gt;=64&amp;&amp;t&lt;=127,a=(16===e||24===e)&amp;&amp;t&gt;=64&amp;&amp;t&lt;=95;if(!i&amp;&amp;!a)return!1;if(e===this.lastCmdA&amp;&amp;t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e&lt;=23?1:2,n=t&gt;=64&amp;&amp;t&lt;=95?1===r?Or[e]:Mr[e]:1===r?Nr[e]:Fr[e];var o=this.interpretPAC(n,t);return this.channels[r-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t&gt;95?t-96:t-64,n.underline=1==(1&amp;r),r&lt;=13?n.color=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;,&quot;white&quot;][Math.floor(r/2)]:r&lt;=15?(n.italics=!0,n.color=&quot;white&quot;):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r=null,n=null,i=null;if(e&gt;=25?(r=2,i=e-8):(r=1,i=e),i&gt;=17&amp;&amp;i&lt;=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,Gr.log(&quot;INFO&quot;,&quot;Special char &#39;&quot;+Ir(a)+&quot;&#39; in channel &quot;+r),n=[a]}else e&gt;=32&amp;&amp;e&lt;=127&amp;&amp;(n=0===t?[e]:[e,t]);if(n){var o=jr(n);Gr.log(&quot;DEBUG&quot;,&quot;Char codes =  &quot;+o.join(&quot;,&quot;)),this.lastCmdA=null,this.lastCmdB=null}return n},t.parseBackgroundAttributes=function(e,t){var r,n,i,a,o=(16===e||24===e)&amp;&amp;t&gt;=32&amp;&amp;t&lt;=47,s=(23===e||31===e)&amp;&amp;t&gt;=45&amp;&amp;t&lt;=47;return!(!o&amp;&amp;!s)&amp;&amp;(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=Ur[n],t%2==1&amp;&amp;(r.background=r.background+&quot;_semi&quot;)):45===t?r.background=&quot;transparent&quot;:(r.foreground=&quot;black&quot;,47===t&amp;&amp;(r.underline=!0)),i=e&lt;24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e&lt;this.channels.length;e++)this.channels[e]&amp;&amp;this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t&lt;this.channels.length;t++)this.channels[t]&amp;&amp;this.channels[t].cueSplitAtTime(e)},e}(),qr=zr,Xr=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&amp;&amp;(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime&gt;e)&amp;&amp;(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Zr=function(e,t,r){return e.substr(r||0,t.length)===t},Jr=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length&gt;9?parseInt(e.substr(0,e.indexOf(&quot;:&quot;))):0;if(!(Object(He.isFiniteNumber)(t)&amp;&amp;Object(He.isFiniteNumber)(r)&amp;&amp;Object(He.isFiniteNumber)(n)&amp;&amp;Object(He.isFiniteNumber)(i)))throw Error(&quot;Malformed X-TIMESTAMP-MAP: Local:&quot;+e);return t+=1e3*r,t+=6e4*n,t+=36e5*i},Qr=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t&gt;&gt;&gt;0).toString()},$r=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&amp;&amp;n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&amp;&amp;i.new;)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},en={parse:function(e,t,r,n,i,a){var o,s=/\r\n|\n\r|\n|\r/g,l=Object(zt.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(s,&quot;\n&quot;).split(&quot;\n&quot;),u=&quot;00:00.000&quot;,c=0,d=0,f=0,h=[],g=!0,p=!1,v=new Dr;v.oncue=function(e){var t=r[n],i=r.ccOffset;t&amp;&amp;t.new&amp;&amp;(void 0!==d?i=r.ccOffset=t.start:$r(r,n,f)),f&amp;&amp;(i=f-r.presentationOffset),p&amp;&amp;(e.startTime+=i-d,e.endTime+=i-d),e.id=Qr(e.startTime.toString())+Qr(e.endTime.toString())+Qr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime&gt;0&amp;&amp;h.push(e)},v.onparsingerror=function(e){o=e},v.onflush=function(){if(o&amp;&amp;a)return void a(o);i(h)},l.forEach(function(e){if(g){if(Zr(e,&quot;X-TIMESTAMP-MAP=&quot;)){g=!1,p=!0,e.substr(16).split(&quot;,&quot;).forEach(function(e){Zr(e,&quot;LOCAL:&quot;)?u=e.substr(6):Zr(e,&quot;MPEGTS:&quot;)&amp;&amp;(c=parseInt(e.substr(7)))});try{t+(9e4*r[n].start||0)&lt;0&amp;&amp;(t+=8589934592),c-=t,d=Jr(u)/1e3,f=c/9e4}catch(e){p=!1,o=e}return}&quot;&quot;===e&amp;&amp;(g=!1)}v.parse(e+&quot;\n&quot;)}),v.flush()}},tn=en,rn=function(e){function t(t){var r;if(r=e.call(this,t,Ye.default.MEDIA_ATTACHING,Ye.default.MEDIA_DETACHING,Ye.default.FRAG_PARSING_USERDATA,Ye.default.FRAG_DECRYPTED,Ye.default.MANIFEST_LOADING,Ye.default.MANIFEST_LOADED,Ye.default.FRAG_LOADED,Ye.default.INIT_PTS_FOUND)||this,r.media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties=void 0,r.cea608Parser=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=null,r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new Xr(_e(r),&quot;textTrack1&quot;),i=new Xr(_e(r),&quot;textTrack2&quot;);r.cea608Parser=new qr(0,n,i)}return r}Te(t,e);var r=t.prototype;return r.addCues=function(e,t,r,n){for(var i=this.cueRanges,a=!1,o=i.length;o--;){var s=i[o],l=we(s[0],s[1],t,r);if(l&gt;=0&amp;&amp;(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),a=!0,l/(r-t)&gt;.5))return}a||i.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,i=e.initPTS,a=this.unparsedVttFrags;&quot;main&quot;===n&amp;&amp;(this.initPTS[r.cc]=i),a.length&amp;&amp;(this.unparsedVttFrags=[],a.forEach(function(e){t.onFragLoaded(e)}))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r&lt;t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.createCaptionsTrack=function(e){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode;if(!r[e]){var s=this.getExistingTrack(e);if(s)r[e]=s,X(r[e]),q(r[e],n);else{var l=this.createTextTrack(&quot;captions&quot;,a,o);l&amp;&amp;(l[e]=!0,r[e]=l)}}},r.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){X(e[t]),delete e[t]})},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r&lt;t.length;r++)X(t[r])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var i;if(n&lt;r.length){for(var a=null,o=0;o&lt;r.length;o++)if(Se(r[o],e)){a=r[o];break}a&amp;&amp;(i=a)}i||(i=t.createTextTrack(&quot;subtitles&quot;,e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?&quot;showing&quot;:&quot;hidden&quot;:i.mode=&quot;disabled&quot;,t.textTracks.push(i)})}},r.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser,i=this.initPTS,a=this.lastSn,o=this.unparsedVttFrags;if(&quot;main&quot;===t.type){var s=t.sn;t.sn!==a+1&amp;&amp;n&amp;&amp;n.reset(),this.lastSn=s}else if(&quot;subtitle&quot;===t.type)if(r.byteLength){if(!Object(He.isFiniteNumber)(i[t.cc]))return o.push(e),void(i.length&amp;&amp;this.hls.trigger(Ye.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var l=t.decryptdata;null!=l&amp;&amp;null!=l.key&amp;&amp;&quot;AES-128&quot;===l.method||this._parseVTTs(t,r)}else this.hls.trigger(Ye.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var r=this.hls,n=this.prevCC,i=this.textTracks,a=this.vttCCs;a[e.cc]||(a[e.cc]={start:e.start,prevCC:n,new:!0},this.prevCC=e.cc),tn.parse(t,this.initPTS[e.cc],a,e.cc,function(t){var n=i[e.level];if(&quot;disabled&quot;===n.mode)return void r.trigger(Ye.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach(function(e){if(!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(&quot;addCue is failed for: &quot;+e)}catch(r){ze.logger.debug(&quot;Failed occurred on adding cues: &quot;+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),r.trigger(Ye.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){ze.logger.log(&quot;Failed to parse VTT cue: &quot;+t),r.trigger(Ye.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if(&quot;subtitle&quot;===t.type){if(!Object(He.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},r.onFragParsingUserdata=function(e){if(this.enabled&amp;&amp;this.cea608Parser)for(var t=0;t&lt;e.samples.length;t++){var r=e.samples[t].bytes;if(r){var n=this.extractCea608Data(r);this.cea608Parser.addData(e.samples[t].pts,n)}}},r.extractCea608Data=function(e){for(var t,r,n,i,a,o=31&amp;e[0],s=2,l=[],u=0;u&lt;o;u++)t=e[s++],r=127&amp;e[s++],n=127&amp;e[s++],i=0!=(4&amp;t),a=3&amp;t,0===r&amp;&amp;0===n||i&amp;&amp;0===a&amp;&amp;(l.push(r),l.push(n));return l},t}(Ze),nn=rn,an=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHING,Ye.default.MANIFEST_LOADED,Ye.default.SUBTITLE_TRACK_LOADED)||this,r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}Le(t,e);var r=t.prototype;return r.destroy=function(){Ze.prototype.destroy.call(this)},r.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&amp;&amp;(Object(He.isFiniteNumber)(this.queuedDefaultTrack)&amp;&amp;(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&amp;&amp;&quot;onchange&quot;in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener(&quot;change&quot;,this.trackChangeListener))},r.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener(&quot;change&quot;,this.trackChangeListener),Object(He.isFiniteNumber)(this.subtitleTrack)&amp;&amp;(this.queuedDefaultTrack=this.subtitleTrack);ke(this.media.textTracks).forEach(function(e){X(e)}),this.subtitleTrack=-1,this.media=null}},r.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(Ye.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&amp;&amp;(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,o=a[i];if(r&gt;=a.length||r!==i||!o||this.stopped)return void this._clearReloadTimer();if(ze.logger.log(&quot;subtitle track &quot;+r+&quot; loaded&quot;),n.live){var s=A(o.details,n,e.stats.trequest);ze.logger.log(&quot;Reloading live subtitle playlist in &quot;+s+&quot;ms&quot;),this.timer=setTimeout(function(){t._loadCurrentTrack()},s)}else this._clearReloadTimer()},r.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},r._clearReloadTimer=function(){this.timer&amp;&amp;(clearTimeout(this.timer),this.timer=null)},r._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e&lt;0||!n||n.details&amp;&amp;!n.details.live||(ze.logger.log(&quot;Loading subtitle track &quot;+e),r.trigger(Ye.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=ke(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode=&quot;disabled&quot;});else{var a=i[n];a&amp;&amp;(a.mode=&quot;disabled&quot;)}var o=i[e];o&amp;&amp;(o.mode=r?&quot;showing&quot;:&quot;hidden&quot;)}},r._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(He.isFiniteNumber)(e)||e&lt;-1||e&gt;=r.length||(this.trackId=e,ze.logger.log(&quot;Switching to subtitle track &quot;+e),t.trigger(Ye.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=ke(this.media.textTracks),r=0;r&lt;t.length;r++)if(&quot;hidden&quot;===t[r].mode)e=r;else if(&quot;showing&quot;===t[r].mode){e=r;break}this.subtitleTrack=e}},Ae(t,[{key:&quot;subtitleTracks&quot;,get:function(){return this.tracks}},{key:&quot;subtitleTrack&quot;,get:function(){return this.trackId},set:function(e){this.trackId!==e&amp;&amp;(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),t}(Ze),on=an,sn=r(&quot;./src/crypt/decrypter.js&quot;),ln=window,un=ln.performance,cn=function(e){function t(t,r){var n;return n=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHING,Ye.default.ERROR,Ye.default.KEY_LOADED,Ye.default.FRAG_LOADED,Ye.default.SUBTITLE_TRACKS_UPDATED,Ye.default.SUBTITLE_TRACK_SWITCH,Ye.default.SUBTITLE_TRACK_LOADED,Ye.default.SUBTITLE_FRAG_PROCESSED,Ye.default.LEVEL_UPDATED)||this,n.fragmentTracker=r,n.config=t.config,n.state=jt.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new sn.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(De(n)),n}Pe(t,e);var r=t.prototype;return r.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=jt.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,o=0;o&lt;n.length;o++)if(a&gt;=n[o].start&amp;&amp;a&lt;=n[o].end){i=n[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener(&quot;seeking&quot;,this._onMediaSeeking),this.state=jt.IDLE},r.onMediaDetaching=function(){var e=this;this.media&amp;&amp;(this.media.removeEventListener(&quot;seeking&quot;,this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]}),this.media=null,this.state=jt.STOPPED)},r.onError=function(e){var t=e.frag;t&amp;&amp;&quot;subtitle&quot;===t.type&amp;&amp;(this.state=jt.IDLE)},r.onSubtitleTracksUpdated=function(e){var t=this;ze.logger.log(&quot;subtitle tracks updated&quot;),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,!this.tracks||!this.tracks.length||-1===this.currentTrackId)return void this.clearInterval();var t=this.tracks[this.currentTrackId];t&amp;&amp;t.details&amp;&amp;this.setInterval(500)},r.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t&gt;=i.length||t!==n||!a||(r.live&amp;&amp;S(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},r.onKeyLoaded=function(){this.state===jt.KEY_LOADING&amp;&amp;(this.state=jt.IDLE)},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===jt.FRAG_LOADING&amp;&amp;t&amp;&amp;&quot;subtitle&quot;===e.frag.type&amp;&amp;t.sn===e.frag.sn&amp;&amp;e.payload.byteLength&gt;0&amp;&amp;r&amp;&amp;r.key&amp;&amp;&quot;AES-128&quot;===r.method){var a=un.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=un.now();i.trigger(Ye.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})})}},r.onLevelUpdated=function(e){var t=e.details,r=t.fragments;this.lastAVStart=r.length?r[0].start:0},r.doTick=function(){if(!this.media)return void(this.state=jt.IDLE);switch(this.state){case jt.IDLE:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a=e.maxBufferHole,o=e.maxFragLookUpTolerance,s=Math.min(e.maxBufferLength,e.maxMaxBufferLength),l=Lt.bufferedInfo(this._getBuffered(),n.currentTime,a),u=l.end,c=l.len,d=i[t].details,f=d.fragments,h=f.length,g=f[h-1].start+f[h-1].duration;if(c&gt;s)return;var p,v=this.fragPrevious;u&lt;g?(v&amp;&amp;d.hasProgramDateTime&amp;&amp;(p=N(f,v.endProgramDateTime,o)),p||(p=M(v,f,u,o))):p=f[h-1],p&amp;&amp;p.encrypted?(ze.logger.log(&quot;Loading key for &quot;+p.sn),this.state=jt.KEY_LOADING,this.hls.trigger(Ye.default.KEY_LOADING,{frag:p})):p&amp;&amp;r.getState(p)===St.NOT_LOADED&amp;&amp;(this.fragCurrent=p,this.state=jt.FRAG_LOADING,this.hls.trigger(Ye.default.FRAG_LOADING,{frag:p}))}},r.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){this.fragPrevious=null},t}(Vt);!function(e){e.WIDEVINE=&quot;com.widevine.alpha&quot;,e.PLAYREADY=&quot;com.microsoft.playready&quot;}(Br||(Br={}));var dn=function(){return&quot;undefined&quot;!=typeof window&amp;&amp;window.navigator&amp;&amp;window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),fn=function(e,t){var r={videoCapabilities:[]};return t.forEach(function(e){r.videoCapabilities.push({contentType:&#39;video/mp4; codecs=&quot;&#39;+e+&#39;&quot;&#39;})}),[r]},hn=function(e,t,r){switch(e){case Br.WIDEVINE:return fn(0,r);default:throw new Error(&quot;Unknown key-system: &quot;+e)}},gn=function(e){function t(t){var r;return r=e.call(this,t,Ye.default.MEDIA_ATTACHED,Ye.default.MEDIA_DETACHED,Ye.default.MANIFEST_PARSED)||this,r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r._onMediaEncrypted=function(e){ze.logger.log(&#39;Media is encrypted using &quot;&#39;+e.initDataType+&#39;&quot; init data type&#39;),r._attemptSetMediaKeys(),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r}xe(t,e);var r=t.prototype;return r.getLicenseServerUrl=function(e){switch(e){case Br.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error(&#39;no license server URL configured for key-system &quot;&#39;+e+&#39;&quot;&#39;)},r._attemptKeySystemAccess=function(e,t,r){var n=this,i=hn(e,0,r);ze.logger.log(&quot;Requesting encrypted media key-system access&quot;),this.requestMediaKeySystemAccess(e,i).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){ze.logger.error(&#39;Failed to obtain key-system &quot;&#39;+e+&#39;&quot; access:&#39;,t)})},r._onMediaKeySystemAccessObtained=function(e,t){var r=this;ze.logger.log(&#39;Access for key-system &quot;&#39;+e+&#39;&quot; obtained&#39;);var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,ze.logger.log(&#39;Media-keys created for key-system &quot;&#39;+e+&#39;&quot;&#39;),r._onMediaKeysCreated()}).catch(function(e){ze.logger.error(&quot;Failed to create media-keys:&quot;,e)})},r._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},r._onNewMediaKeySession=function(e){var t=this;ze.logger.log(&quot;New key-system session &quot;+e.sessionId),e.addEventListener(&quot;message&quot;,function(r){t._onKeySessionMessage(e,r.message)},!1)},r._onKeySessionMessage=function(e,t){ze.logger.log(&quot;Got EME message event, creating license request&quot;),this._requestLicense(t,function(t){ze.logger.log(&quot;Received license data (length: &quot;+(t?t.byteLength:t)+&quot;), updating key-session&quot;),e.update(t)})},r._attemptSetMediaKeys=function(){if(!this._media)throw new Error(&quot;Attempted to set mediaKeys without first attaching a media element&quot;);if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return ze.logger.error(&quot;Fatal: Media is encrypted but no CDM access or no keys have been obtained yet&quot;),void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});ze.logger.log(&quot;Setting keys for encrypted media&quot;),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return ze.logger.error(&quot;Fatal: Media is encrypted but not any key-system access has been obtained yet&quot;),void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)return void ze.logger.warn(&quot;Key-Session already initialized but requested again&quot;);var i=n.mediaKeysSession;return i?t?(ze.logger.log(&#39;Generating key-session request for &quot;&#39;+e+&#39;&quot; init data type&#39;),n.mediaKeysSessionInitialized=!0,void i.generateRequest(e,t).then(function(){ze.logger.debug(&quot;Key-session generation succeeded&quot;)}).catch(function(e){ze.logger.error(&quot;Error generating key-session request:&quot;,e),r.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(ze.logger.warn(&quot;Fatal: initData required for generating a key session is null&quot;),void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(ze.logger.error(&quot;Fatal: Media is encrypted but no key-session existing&quot;),void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))},r._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open(&quot;POST&quot;,e,!0),i(n,e)}n.readyState||n.open(&quot;POST&quot;,e,!0)}catch(e){throw new Error(&quot;issue setting up KeySystem license XHR &quot;+e)}return n.responseType=&quot;arraybuffer&quot;,n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},r._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,ze.logger.log(&quot;License request succeeded&quot;),&quot;arraybuffer&quot;!==e.responseType&amp;&amp;ze.logger.warn(&quot;xhr response type was not set to the expected arraybuffer for license request&quot;),n(e.response);else{if(ze.logger.error(&quot;License Request XHR failed (&quot;+t+&quot;). Status: &quot;+e.status+&quot; (&quot;+e.statusText+&quot;)&quot;),++this._requestLicenseFailureCount&gt;3)return void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;ze.logger.warn(&quot;Retrying license request, &quot;+i+&quot; attempts left&quot;),this._requestLicense(r,n)}}},r._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Br.WIDEVINE:return t}throw new Error(&quot;unsupported key-system: &quot;+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){ze.logger.log(&quot;Requesting content license for key-system&quot;);var r=this._mediaKeysList[0];if(!r)return ze.logger.error(&quot;Fatal error: Media is encrypted but no key-system access has been obtained yet&quot;),void this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);ze.logger.log(&quot;Sending license request to URL: &quot;+n);var a=this._generateLicenseRequestChallenge(r,e);i.send(a)}catch(e){ze.logger.error(&quot;Failure requesting DRM license: &quot;+e),this.hls.trigger(Ye.default.ERROR,{type:We.ErrorTypes.KEY_SYSTEM_ERROR,details:We.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener(&quot;encrypted&quot;,this._onMediaEncrypted)}},r.onMediaDetached=function(){this._media&amp;&amp;(this._media.removeEventListener(&quot;encrypted&quot;,this._onMediaEncrypted),this._media=null)},r.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(Br.WIDEVINE,t,r)}},Ce(t,[{key:&quot;requestMediaKeySystemAccess&quot;,get:function(){if(!this._requestMediaKeySystemAccess)throw new Error(&quot;No requestMediaKeySystemAccess function configured&quot;);return this._requestMediaKeySystemAccess}}]),t}(Ze),pn=gn,vn=function(e){for(var t=1;t&lt;arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);&quot;function&quot;==typeof Object.getOwnPropertySymbols&amp;&amp;(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Oe(e,t,r[t])})}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:mr,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:nr,bufferController:or,capLevelController:lr,fpsController:fr,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:dn},function(){return{cueHandler:je,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:&quot;English&quot;,captionsTextTrack1LanguageCode:&quot;en&quot;,captionsTextTrack2Label:&quot;Spanish&quot;,captionsTextTrack2LanguageCode:&quot;es&quot;}}(),{subtitleStreamController:cn,subtitleTrackController:on,timelineController:nn,audioStreamController:Sr,audioTrackController:br,emeController:pn});r.d(t,&quot;default&quot;,function(){return mn});var mn=function(e){function t(r){var n;void 0===r&amp;&amp;(r={}),n=e.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&amp;&amp;(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error(&quot;Illegal hls.js config: don&#39;t mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration&quot;);n.config=Ne({},i,r);var a=Fe(n),o=a.config;if(void 0!==o.liveMaxLatencyDurationCount&amp;&amp;o.liveMaxLatencyDurationCount&lt;=o.liveSyncDurationCount)throw new Error(&#39;Illegal hls.js config: &quot;liveMaxLatencyDurationCount&quot; must be gt &quot;liveSyncDurationCount&quot;&#39;);if(void 0!==o.liveMaxLatencyDuration&amp;&amp;(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration&lt;=o.liveSyncDuration))throw new Error(&#39;Illegal hls.js config: &quot;liveMaxLatencyDuration&quot; must be gt &quot;liveSyncDuration&quot;&#39;);Object(ze.enableLogs)(o.debug),n._autoLevelCapping=-1;var s=n.abrController=new o.abrController(Fe(n)),l=new o.bufferController(Fe(n)),u=n.capLevelController=new o.capLevelController(Fe(n)),c=new o.fpsController(Fe(n)),d=new yt(Fe(n)),f=new Et(Fe(n)),h=new Tt(Fe(n)),g=new Xt(Fe(n)),p=n.levelController=new Yt(Fe(n)),v=new wt(Fe(n)),m=n.streamController=new Wt(Fe(n),v),y=[p,m],b=o.audioStreamController;b&amp;&amp;y.push(new b(Fe(n),v)),n.networkControllers=y;var E=[d,f,h,s,l,u,c,g,v];if(b=o.audioTrackController){var _=new b(Fe(n));n.audioTrackController=_,E.push(_)}if(b=o.subtitleTrackController){var T=new b(Fe(n));n.subtitleTrackController=T,y.push(T)}if(b=o.emeController){var S=new b(Fe(n));n.emeController=S,E.push(S)}return b=o.subtitleStreamController,b&amp;&amp;y.push(new b(Fe(n),v)),b=o.timelineController,b&amp;&amp;E.push(new b(Fe(n))),n.coreComponents=E,n}Ge(t,e),t.isSupported=function(){return Q()},Be(t,null,[{key:&quot;version&quot;,get:function(){return&quot;0.13.1&quot;}},{key:&quot;Events&quot;,get:function(){return Ye.default}},{key:&quot;ErrorTypes&quot;,get:function(){return We.ErrorTypes}},{key:&quot;ErrorDetails&quot;,get:function(){return We.ErrorDetails}},{key:&quot;DefaultConfig&quot;,get:function(){return t.defaultConfig?t.defaultConfig:vn},set:function(e){t.defaultConfig=e}}]);var r=t.prototype;return r.destroy=function(){ze.logger.log(&quot;destroy&quot;),this.trigger(Ye.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){ze.logger.log(&quot;attachMedia&quot;),this.media=e,this.trigger(Ye.default.MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){ze.logger.log(&quot;detachMedia&quot;),this.trigger(Ye.default.MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=Ke.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),ze.logger.log(&quot;loadSource:&quot;+e),this.url=e,this.trigger(Ye.default.MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&amp;&amp;(e=-1),ze.logger.log(&quot;startLoad(&quot;+e+&quot;)&quot;),this.networkControllers.forEach(function(t){t.startLoad(e)})},r.stopLoad=function(){ze.logger.log(&quot;stopLoad&quot;),this.networkControllers.forEach(function(e){e.stopLoad()})},r.swapAudioCodec=function(){ze.logger.log(&quot;swapAudioCodec&quot;),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){ze.logger.log(&quot;recoverMediaError&quot;);var e=this.media;this.detachMedia(),e&amp;&amp;this.attachMedia(e)},Be(t,[{key:&quot;levels&quot;,get:function(){return this.levelController.levels}},{key:&quot;currentLevel&quot;,get:function(){return this.streamController.currentLevel},set:function(e){ze.logger.log(&quot;set currentLevel:&quot;+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:&quot;nextLevel&quot;,get:function(){return this.streamController.nextLevel},set:function(e){ze.logger.log(&quot;set nextLevel:&quot;+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:&quot;loadLevel&quot;,get:function(){return this.levelController.level},set:function(e){ze.logger.log(&quot;set loadLevel:&quot;+e),this.levelController.manualLevel=e}},{key:&quot;nextLoadLevel&quot;,get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:&quot;firstLevel&quot;,get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){ze.logger.log(&quot;set firstLevel:&quot;+e),this.levelController.firstLevel=e}},{key:&quot;startLevel&quot;,get:function(){return this.levelController.startLevel},set:function(e){ze.logger.log(&quot;set startLevel:&quot;+e),-1!==e&amp;&amp;(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:&quot;capLevelToPlayerSize&quot;,set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&amp;&amp;(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:&quot;autoLevelCapping&quot;,get:function(){return this._autoLevelCapping},set:function(e){ze.logger.log(&quot;set autoLevelCapping:&quot;+e),this._autoLevelCapping=e}},{key:&quot;bandwidthEstimate&quot;,get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:&quot;autoLevelEnabled&quot;,get:function(){return-1===this.levelController.manualLevel}},{key:&quot;manualLevel&quot;,get:function(){return this.levelController.manualLevel}},{key:&quot;minAutoLevel&quot;,get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n&lt;r;n++){if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)&gt;t)return n}return 0}},{key:&quot;maxAutoLevel&quot;,get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&amp;&amp;e&amp;&amp;e.length?e.length-1:t}},{key:&quot;nextAutoLevel&quot;,get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:&quot;audioTracks&quot;,get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:&quot;audioTrack&quot;,get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&amp;&amp;(t.audioTrack=e)}},{key:&quot;liveSyncPosition&quot;,get:function(){return this.streamController.liveSyncPosition}},{key:&quot;subtitleTracks&quot;,get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:&quot;subtitleTrack&quot;,get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&amp;&amp;(t.subtitleTrack=e)}},{key:&quot;subtitleDisplay&quot;,get:function(){var e=this.subtitleTrackController;return!!e&amp;&amp;e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&amp;&amp;(t.subtitleDisplay=e)}}]),t}(Ct);mn.defaultConfig=void 0},&quot;./src/polyfills/number-isFinite.js&quot;:function(e,t,r){&quot;use strict&quot;;r.r(t),r.d(t,&quot;isFiniteNumber&quot;,function(){return n});var n=Number.isFinite||function(e){return&quot;number&quot;==typeof e&amp;&amp;isFinite(e)}},&quot;./src/utils/get-self-scope.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(){return&quot;undefined&quot;==typeof window?self:window}r.r(t),r.d(t,&quot;getSelfScope&quot;,function(){return n})},&quot;./src/utils/logger.js&quot;:function(e,t,r){&quot;use strict&quot;;function n(){}function i(e,t){return t=&quot;[&quot;+e+&quot;] &gt; &quot;+t}function a(e){var t=c.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),a=0;a&lt;r;a++)n[a]=arguments[a];n[0]&amp;&amp;(n[0]=i(e,n[0])),t.apply(c.console,n)}:n}function o(e){for(var t=arguments.length,r=new Array(t&gt;1?t-1:0),n=1;n&lt;t;n++)r[n-1]=arguments[n];r.forEach(function(t){u[t]=e[t]?e[t].bind(e):a(t)})}r.r(t),r.d(t,&quot;enableLogs&quot;,function(){return d}),r.d(t,&quot;logger&quot;,function(){return f});var s=r(&quot;./src/utils/get-self-scope.js&quot;),l={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=l,c=Object(s.getSelfScope)(),d=function(e){if(c.console&amp;&amp;!0===e||&quot;object&quot;==typeof e){o(e,&quot;debug&quot;,&quot;log&quot;,&quot;info&quot;,&quot;warn&quot;,&quot;error&quot;);try{u.log()}catch(e){u=l}}else u=l},f=u}}).default})}])});</td>
      </tr>
</table>

  <details class="details-reset details-overlay BlobToolbar position-absolute js-file-line-actions dropdown d-none" aria-hidden="true">
    <summary class="btn-octicon ml-0 px-2 p-0 bg-white border border-gray-dark rounded-1" aria-label="Inline file action toolbar">
      <svg class="octicon octicon-kebab-horizontal" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm5 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM13 7.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path></svg>
    </summary>
    <details-menu>
      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se mt-2" style="width:185px">
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-lines" style="cursor:pointer;">
            Copy lines
          </clipboard-copy>
        </li>
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;">
            Copy permalink
          </clipboard-copy>
        </li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" role="menuitem" href="/cdnbye/hlsjs-p2p-engine/blame/ecaa2fa74a939b6339c8f126f2c385ceb6891c01/dist/hls.min.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" role="menuitem" href="/cdnbye/hlsjs-p2p-engine/issues/new">Reference in new issue</a></li>
      </ul>
    </details-menu>
  </details>

  </div>

    </div>

  

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" action="" accept-charset="UTF-8" method="get">
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
        <button type="submit" class="btn" data-close-dialog>Go</button>
</form>    </details-dialog>
  </details>

    <div class="Popover anim-scale-in js-tagsearch-popover"
     hidden
     data-tagsearch-url="/cdnbye/hlsjs-p2p-engine/find-symbols"
     data-tagsearch-ref="master"
     data-tagsearch-path="dist/hls.min.js"
     data-tagsearch-lang="JavaScript"
     data-hydro-click="{&quot;event_type&quot;:&quot;code_navigation.click_on_symbol&quot;,&quot;payload&quot;:{&quot;action&quot;:&quot;click_on_symbol&quot;,&quot;repository_id&quot;:132340238,&quot;ref&quot;:&quot;master&quot;,&quot;language&quot;:&quot;JavaScript&quot;,&quot;originating_url&quot;:&quot;https://github.com/cdnbye/hlsjs-p2p-engine/blob/master/dist/hls.min.js&quot;,&quot;user_id&quot;:62872211}}"
     data-hydro-click-hmac="8239e289b28eac113c67cdf132490304fa0683ee7646bcc519c53539ea6d8238">
  <div class="Popover-message Popover-message--large Popover-message--top-left TagsearchPopover mt-1 mb-4 mx-auto Box box-shadow-large">
    <div class="TagsearchPopover-content js-tagsearch-popover-content overflow-auto" style="will-change:transform;">
    </div>
  </div>
</div>



  </div>
</div>

    </main>
  </div>
  

  </div>

        
<div class="footer container-lg width-full p-responsive" role="contentinfo">
  <div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      <li class="mr-3 mr-lg-0">&copy; 2020 GitHub, Inc.</li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to security, text:security" href="https://github.com/security">Security</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>

    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mx-lg-4" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" async="async" integrity="sha512-WcQmT2vhcClFVOaaAJV/M+HqsJ2Gq/myvl6F3gCVBxykazXTs+i5fvxncSXwyG1CSfcrqmLFw/R/bmFYzprX2A==" type="application/javascript" id="js-conditional-compat" data-src="https://github.githubassets.com/assets/compat-bootstrap-59c4264f.js"></script>
    <script crossorigin="anonymous" integrity="sha512-6XBdUZGib4aqdruJTnLMOLpIh0VJsGlgQ7M3vndWJIH6YQNv+zqpo1TbCDzjHJ+YYEm4xkEinaY0VsemDUfi9A==" type="application/javascript" src="https://github.githubassets.com/assets/environment-bootstrap-e9705d51.js"></script>
    <script crossorigin="anonymous" async="async" integrity="sha512-EDN3kiqMVKpDXq6euD9tcIPeh3xqtWzCcm8mqqLAZOkXwdMo0hSA8Bfg0NqZ8c2n51yU4SlSal3hqgdrus+M2A==" type="application/javascript" src="https://github.githubassets.com/assets/vendor-10337792.js"></script>
    <script crossorigin="anonymous" async="async" integrity="sha512-CcKFBqQZKOCZU5otP6R8GH2k+iJ3zC9r2z2Iakfs/Bo9/ptHy6JIWQN3FPhVuS3CR+Q/CkEOSfg+WJfoq3YMxQ==" type="application/javascript" src="https://github.githubassets.com/assets/frameworks-09c28506.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-7Evx/cY3o6cyoeTQc+OX5n6X4k+wTJkQnAyjtmpge6F3Hgw511TPF+N0BFvn3IZLaQro6kyC/f0dqhklyssNow==" type="application/javascript" src="https://github.githubassets.com/assets/github-bootstrap-ec4bf1fd.js"></script>
    
    
    
  <div class="js-stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

  <div aria-live="polite" class="js-global-screen-reader-notice sr-only"></div>

  </body>
</html>

